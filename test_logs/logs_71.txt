[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 582399647050386
maxTicks_: 35
3
virtual: 654118637017526
weight: 3
jumpSize: 1
minAnchorPrice: 981177955526289
jumpLog: 0.6931471805599453
anchorLog: 1.110223024625156e-15
624331476816536.2
maxTicks: 582399647050386
maxTicks_: 624331476816536
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 219

trials left: 1 - iteration: 2 - block: 1219
virtual: 2929611550132152
weight: 1
jumpSize: 1
minAnchorPrice: 1464805775066076
jumpLog: 0.6931471805599453
anchorLog: 6.661338147750937e-16
1040552461360893.5
maxTicks: 1
maxTicks_: 1040552461360893
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 7270913098619699
weight: 1
jumpSize: 1
minAnchorPrice: 3635456549309849
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 3 - block: 1979

trials left: 1 - iteration: 4 - block: 2198
virtual: 5163189857437726
weight: 1
jumpSize: 28
minAnchorPrice: 4985148827870907
jumpLog: 0.03509131981127019
anchorLog: 2.2204460492503128e-16
158037254825975.38
maxTicks: 582399647050386
maxTicks_: 158037254825975
3
virtual: 3772303896019532
weight: 1
jumpSize: 5
minAnchorPrice: 3143586580016276
jumpLog: 0.1823215567939546
anchorLog: 2.2204460492503128e-16
821103295238862.8
maxTicks: 582399647050386
maxTicks_: 821103295238862
3
virtual: 3772303896019532
weight: 1
jumpSize: 5
minAnchorPrice: 3143586580016276
jumpLog: 0.1823215567939546
anchorLog: 2.2204460492503128e-16
821103295238862.8
virtual: 3772303896019532
weight: 1
jumpSize: 5
minAnchorPrice: 3143586580016276
jumpLog: 0.1823215567939546
anchorLog: 2.2204460492503128e-16
821103295238862.8
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 5 - block: 3198

trials left: 1 - iteration: 6 - block: 4198
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 260893228454049
maxTicks_: 35
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 260893228454049
maxTicks_: 44812306322540
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 7 - block: 4325
Swapping.boundary()
addedBuyingA0: 32512611609894453248000
addedSellingA0: 32512620617093700769740
diff: -9007199247521740
Swapping.boundary()
addedBuyingA0: 32512611609894453248000
addedSellingA0: 32512618437464853551200
diff: -6827570400303200
Swapping.boundary()
addedBuyingA0: 32512611609894453248000
addedSellingA0: 32512618812166675938756
diff: -7202272222690756
subSwap: 3633650 sold
addedBuyingA0: 32512611609894453248000
addedSellingA0: 32512618437464853551200
diff: -6827570400303200
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 3f172aa5715de02ba5c702cf0e42dbafcd09b91e9509efa07e5041a3, 
   +     +  virtual: +[
   +     +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 1,
   +     +  +  _: 9007199254740991
   +     +  ], 
   +     +  weights: +[
   +     +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 100,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 1,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 3f172aa5715de02ba5c702cf0e42dbafcd09b91e9509efa07e5041a3,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 48e3f5a0a9f746806bea51c731ce6c013f6de83a760101d23ab6980fe6a49046),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 0baef03b3efd796f3d0be228f6b6d2043dadf0a6c19e3896950a077b4f1953b7),
   +     +  anchorPrices: +[
   +     +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 50,
   +     +  +  _: 8947647252064688
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2310160,
   +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 86964409484683
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10, )
  boughtAmount: 2310160
  soldAmount: 3633650
  boughtSpot: 8947647252064688
  soldSpot: 14073748835532800
  boughtExp: 0
  soldExp: 48
  spotPrice: 1.572899382268926
  effectivePrice: 1.572899712574021
)

trials left: 1 - iteration: 8 - block: 4326
virtual: 5624077242376928
weight: 1
jumpSize: 16
minAnchorPrice: 5293249169295932
jumpLog: 0.06062462181643484
anchorLog: 2.2204460492503128e-16
273029024221973.22
maxTicks: 1
maxTicks_: 273029024221973
1
virtual: 2909245871880818
weight: 6
jumpSize: 1
minAnchorPrice: 8727737615642454
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 9 - block: 5124
Swapping.boundary()
addedBuyingA0: 32512611609894453248000
addedSellingA0: 32512620617093700769740
diff: -9007199247521740
Swapping.boundary()
addedBuyingA0: 32512611609894453248000
addedSellingA0: 32512618437464853551200
diff: -6827570400303200
Swapping.boundary()
addedBuyingA0: 32512611609894453248000
addedSellingA0: 32512618812166675938756
diff: -7202272222690756
subSwap: 2085856 sold
addedBuyingA0: 18725502816894949785600
addedSellingA0: 18725509157804808239552
diff: -6340909858453952
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 3f172aa5715de02ba5c702cf0e42dbafcd09b91e9509efa07e5041a3, 
   +     +  virtual: +[
   +     +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 1,
   +     +  +  _: 9007199254740991
   +     +  ], 
   +     +  weights: +[
   +     +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 100,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 1,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 3f172aa5715de02ba5c702cf0e42dbafcd09b91e9509efa07e5041a3,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 8d96f48195b12fc18c510624778a760d673a880c04390653f477f6fa741a6a22),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 0baef03b3efd796f3d0be228f6b6d2043dadf0a6c19e3896950a077b4f1953b7),
   +     +  anchorPrices: +[
   +     +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 50,
   +     +  +  _: 8977373873270642
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2310160,
   +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 86964409484683
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10, )
  boughtAmount: 1330527
  soldAmount: 2085856
  boughtSpot: 8977373873270642
  soldSpot: 14073748835532800
  boughtExp: 0
  soldExp: 48
  spotPrice: 1.5676910680345146
  effectivePrice: 1.5676915988927695
)

trials left: 1 - iteration: 10 - block: 5650
virtual: 4684063615633730
weight: 1
jumpSize: 100
minAnchorPrice: 4637686748152207
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 11 - block: 5651

trials left: 1 - iteration: 12 - block: 6447

trials left: 1 - iteration: 13 - block: 6448

trials left: 1 - iteration: 14 - block: 7448
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 582399647050386
maxTicks_: 3121657384082680
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 582399647050386
maxTicks_: 3121657384082680
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 15 - block: 7449

trials left: 1 - iteration: 16 - block: 7645
virtual: 4294868379269006
weight: 1
jumpSize: 80
minAnchorPrice: 4241845312858277
jumpLog: 0.01242251999855711
anchorLog: 2.2204460492503128e-16
55946056436504.34
maxTicks: 582399647050386
maxTicks_: 55946056436504
3
virtual: 9007199254740991
weight: 1
jumpSize: 85
minAnchorPrice: 8902464379685863
jumpLog: 0.011696039763191236
anchorLog: 2.2204460492503128e-16
52674280319218.56
maxTicks: 194133215683462
maxTicks_: 52674280319218
3
virtual: 234386818993816
weight: 40
jumpSize: 16
minAnchorPrice: 8823974362120131
jumpLog: 0.06062462181643484
anchorLog: 2.2204460492503128e-16
273029024221973.22
maxTicks: 64711071894487
maxTicks_: 273029024221973
3
virtual: 4294868379269006
weight: 1
jumpSize: 80
minAnchorPrice: 4241845312858277
jumpLog: 0.01242251999855711
anchorLog: 2.2204460492503128e-16
55946056436504.34
virtual: 4294868379269006
weight: 1
jumpSize: 80
minAnchorPrice: 4241845312858277
jumpLog: 0.01242251999855711
anchorLog: 2.2204460492503128e-16
55946056436504.34
virtual: 9007199254740991
weight: 1
jumpSize: 85
minAnchorPrice: 8902464379685863
jumpLog: 0.011696039763191236
anchorLog: 2.2204460492503128e-16
52674280319218.56
virtual: 9007199254740991
weight: 1
jumpSize: 85
minAnchorPrice: 8902464379685863
jumpLog: 0.011696039763191236
anchorLog: 2.2204460492503128e-16
52674280319218.56
virtual: 9007199254740991
weight: 1
jumpSize: 85
minAnchorPrice: 8902464379685863
jumpLog: 0.011696039763191236
anchorLog: 2.2204460492503128e-16
52674280319218.56
virtual: 9007199254740991
weight: 1
jumpSize: 85
minAnchorPrice: 8902464379685863
jumpLog: 0.011696039763191236
anchorLog: 2.2204460492503128e-16
52674280319218.56
virtual: 9007199254740991
weight: 1
jumpSize: 85
minAnchorPrice: 8902464379685863
jumpLog: 0.011696039763191236
anchorLog: 2.2204460492503128e-16
52674280319218.56
virtual: 9007199254740991
weight: 1
jumpSize: 85
minAnchorPrice: 8902464379685863
jumpLog: 0.011696039763191236
anchorLog: 2.2204460492503128e-16
52674280319218.56
virtual: 234386818993816
weight: 40
jumpSize: 16
minAnchorPrice: 8823974362120131
jumpLog: 0.06062462181643484
anchorLog: 2.2204460492503128e-16
273029024221973.22
virtual: 234386818993816
weight: 40
jumpSize: 16
minAnchorPrice: 8823974362120131
jumpLog: 0.06062462181643484
anchorLog: 2.2204460492503128e-16
273029024221973.22
virtual: 234386818993816
weight: 40
jumpSize: 16
minAnchorPrice: 8823974362120131
jumpLog: 0.06062462181643484
anchorLog: 2.2204460492503128e-16
273029024221973.22
virtual: 234386818993816
weight: 40
jumpSize: 16
minAnchorPrice: 8823974362120131
jumpLog: 0.06062462181643484
anchorLog: 2.2204460492503128e-16
273029024221973.22
virtual: 234386818993816
weight: 40
jumpSize: 16
minAnchorPrice: 8823974362120131
jumpLog: 0.06062462181643484
anchorLog: 2.2204460492503128e-16
273029024221973.22
virtual: 234386818993816
weight: 40
jumpSize: 16
minAnchorPrice: 8823974362120131
jumpLog: 0.06062462181643484
anchorLog: 2.2204460492503128e-16
273029024221973.22
virtual: 234386818993816
weight: 40
jumpSize: 16
minAnchorPrice: 8823974362120131
jumpLog: 0.06062462181643484
anchorLog: 2.2204460492503128e-16
273029024221973.22
virtual: 234386818993816
weight: 40
jumpSize: 16
minAnchorPrice: 8823974362120131
jumpLog: 0.06062462181643484
anchorLog: 2.2204460492503128e-16
273029024221973.22
virtual: 234386818993816
weight: 40
jumpSize: 16
minAnchorPrice: 8823974362120131
jumpLog: 0.06062462181643484
anchorLog: 2.2204460492503128e-16
273029024221973.22
Opening pool with 9 dirac utxos and 1 param utxos

trials left: 1 - iteration: 17 - block: 7646
Swapping.boundary()
addedBuyingA0: 26417466971609946
addedSellingA0: 28126418279257917
diff: -1708951307647971
Swapping.boundary()
addedBuyingA0: 26199589405189812
addedSellingA0: 28126418279257917
diff: -1926828874068105
Swapping.boundary()
addedBuyingA0: 26308302639686658
addedSellingA0: 28126418279257917
diff: -1818115639571259
Swapping.boundary()
addedBuyingA0: 26417466971609946
addedSellingA0: 28126418279257917
diff: -1708951307647971
Swapping.boundary()
addedBuyingA0: 26417466971609946
addedSellingA0: 28126418279257917
diff: -1708951307647971
Swapping.boundary()
addedBuyingA0: 26199589405189812
addedSellingA0: 28126418279257917
diff: -1926828874068105
Swapping.boundary()
addedBuyingA0: 26199589405189812
addedSellingA0: 28126418279257917
diff: -1926828874068105
Swapping.boundary()
addedBuyingA0: 26308302639686658
addedSellingA0: 28126418279257917
diff: -1818115639571259
Swapping.boundary()
addedBuyingA0: 26308302639686658
addedSellingA0: 28126418279257917
diff: -1818115639571259
subSwap: 3 sold
addedBuyingA0: 26199589405189812
addedSellingA0: 28126418279257917
diff: -1926828874068105
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 3f172aa5715de02ba5c702cf0e42dbafcd09b91e9509efa07e5041a3, 
   +     +  virtual: +[
   +     +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 4294868379269006,
   +     +  +  f8b69034c471e4bc21a38e278a140a4775f4f5e27464933de6b856d3_: 9007199254740991,
   +     +  +  _: 234386818993816
   +     +  ], 
   +     +  weights: +[
   +     +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 1,
   +     +  +  f8b69034c471e4bc21a38e278a140a4775f4f5e27464933de6b856d3_: 1,
   +     +  +  _: 40
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 80,
   +     +  +  f8b69034c471e4bc21a38e278a140a4775f4f5e27464933de6b856d3_: 85,
   +     +  +  _: 16
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 3f172aa5715de02ba5c702cf0e42dbafcd09b91e9509efa07e5041a3,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 48e3f5a0a9f746806bea51c731ce6c013f6de83a760101d23ab6980fe6a49046),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 0baef03b3efd796f3d0be228f6b6d2043dadf0a6c19e3896950a077b4f1953b7),
   +     +  anchorPrices: +[
   +     +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 4259446532368410,
   +     +  +  f8b69034c471e4bc21a38e278a140a4775f4f5e27464933de6b856d3_: 8902464379685863,
   +     +  +  _: 8823974362120131
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2521350,
   +  +  d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10_: 64711071894487
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(d847f97a03983df2c0dcd560786e45e6be99042b0f539bc0406e1e10, )
  boughtAmount: 6
  soldAmount: 3
  boughtSpot: 9375472759752639
  soldSpot: 4366598234198302
  boughtExp: 1
  soldExp: 2
  spotPrice: 0.46574699176167295
  effectivePrice: 0.5
)

trials left: 1 - iteration: 18 - block: 8646

trials left: 1 - iteration: 19 - block: 8647
virtual: 7682846937494851
weight: 1
jumpSize: 31
minAnchorPrice: 7442757970698136
jumpLog: 0.03174869831458027
anchorLog: 2.2204460492503128e-16
142983425899042.03
maxTicks: 1
maxTicks_: 142983425899042
1
virtual: 6777077026431374
weight: 1
jumpSize: 100
minAnchorPrice: 6709977253892449
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
Opening pool with 1 dirac utxos and 1 param utxos
traces.length: 20
Opening: 9
Closing: 8
Swapping: 3
--- DONE ---
Opening: 9
Closing: 8
Swapping: 3
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(41s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(3m4s)[0m

