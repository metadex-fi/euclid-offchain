[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
virtual: 5567
weight: 1
jumpSize: 1
minAnchorPrice: 2783
jumpLog: 0.6931471805599453
anchorLog: 0.00035925992841950486
1929.3751563368432
maxTicks: 1
maxTicks_: 1929
1
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1

trials left: 1 - iteration: 2 - block: 1001
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 1
maxTicks_: 3119
1
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 1
maxTicks_: 3119
1
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 3 - block: 2001
virtual: 9000
weight: 1
jumpSize: 18
minAnchorPrice: 8526
jumpLog: 0.05406722127027579
anchorLog: 0.00011728141689384437
461.00416163298894
maxTicks: 1
maxTicks_: 461
1
virtual: 3088
weight: 1
jumpSize: 18
minAnchorPrice: 2925
jumpLog: 0.05406722127027579
anchorLog: 0.0003418219141128381
158.1736542860379
maxTicks: 1
maxTicks_: 158
1
virtual: 1
weight: 89
jumpSize: 88
minAnchorPrice: 88
jumpLog: 0.011299555253933466
anchorLog: 0.011299555253933466
1
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 4 - block: 3001

          maxBuying: 1
          maxSelling: 188
          maxBuyingA0: 18000
          maxSellingA0: 1692000
          maxSwapA0: 18000
          spotBuying: 9000
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 2
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9003 > 
        spotSelling 9000

          maxBuying: 1
          maxSelling: 188
          maxBuyingA0: 18000
          maxSellingA0: 1691812
          maxSwapA0: 18000
          spotBuying: 8999
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 3
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9003 > 
        spotSelling 9000

          maxBuying: 3
          maxSelling: 88
          maxBuyingA0: 27267
          maxSellingA0: 792000
          maxSwapA0: 27267
          spotBuying: 9000
          spotSelling: 9089
          buyingAmount: 3
          sellingAmount: 4
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9001 > 
        spotSelling 8999

          maxBuying: 1
          maxSelling: 88
          maxBuyingA0: 9089
          maxSellingA0: 792000
          maxSwapA0: 9089
          spotBuying: 9000
          spotSelling: 9089
          buyingAmount: 1
          sellingAmount: 2
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9001 > 
        spotSelling 8999

          maxBuying: 1
          maxSelling: 498
          maxBuyingA0: 9499
          maxSellingA0: 1537326
          maxSwapA0: 9499
          spotBuying: 3087
          spotSelling: 9499
          buyingAmount: 1
          sellingAmount: 4
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9001 > 
        spotSelling 8999

          maxBuying: 80
          maxSelling: 498
          maxBuyingA0: 759920
          maxSellingA0: 395388096
          maxSwapA0: 759920
          spotBuying: 793952
          spotSelling: 9499
          buyingAmount: 80
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9001 > 
        spotSelling 8999

          maxBuying: 1
          maxSelling: 170
          maxBuyingA0: 3259
          maxSellingA0: 1529830
          maxSwapA0: 3259
          spotBuying: 8999
          spotSelling: 3259
          buyingAmount: 1
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  3089 > 
        spotSelling 3087

          maxBuying: 80
          maxSelling: 170
          maxBuyingA0: 260720
          maxSellingA0: 134971840
          maxSwapA0: 260720
          spotBuying: 793952
          spotSelling: 3259
          buyingAmount: 80
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  3089 > 
        spotSelling 3087
subSwap: 1 sold
subSwap: 1 bought
boughtAssetForSale (old):
        sellingAmm  9001 > 
        spotSelling 8999
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: f2e7dafe5db8fb9004677d53205cdfa142fb7946199d19eccd1b0130, 
   +     +  virtual: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 9000,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 3088,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 1,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 1,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 89
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 18,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 18,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 88
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: f2e7dafe5db8fb9004677d53205cdfa142fb7946199d19eccd1b0130,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 98dce4141990779c74e2aa81ed399fb2fcfc093eae8125de1f1b73a6b1ddbf0b),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: a29a3f5a4b2f7cd6e3ee6bc51c076a8fbf10d555f13ed698a930666bed6e5e91),
   +     +  anchorPrices: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 8526,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 2925,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 88
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3047170,
   +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 1,
   +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 9000,
   +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 1
   +  ]
     )
  boughtAsset:  Asset(295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d, r236)
  soldAsset:    Asset(b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6, gN0UmmNmcLasT2MB5jp4v5)
  boughtAmount: 1
  soldAmount:   4
  boughtSpot:   3087
  soldSpot:     9499
  (boughtA0:    9499)
  (soldA0:      12348)
  boughtExp:    1
  soldExp:      2
  spotPrice:    3.077097505668934
  eff.Price:    4
  maxBuying:    1
  (maxBuyingA0: 9499)
)

trials left: 1 - iteration: 5 - block: 3002
virtual: 9000
weight: 1
jumpSize: 81
minAnchorPrice: 8890
jumpLog: 0.012270092591814401
anchorLog: 0.00011247961318873772
109.0872580724964
maxTicks: 162
maxTicks_: 109
3
virtual: 1
weight: 13
jumpSize: 1
minAnchorPrice: 6
jumpLog: 0.6931471805599453
anchorLog: 0.15415067982725836
4.49655610560192
maxTicks: 54
maxTicks_: 4
3
virtual: 9000
weight: 1
jumpSize: 81
minAnchorPrice: 8890
jumpLog: 0.012270092591814401
anchorLog: 0.00011247961318873772
109.0872580724964
virtual: 9000
weight: 1
jumpSize: 81
minAnchorPrice: 8890
jumpLog: 0.012270092591814401
anchorLog: 0.00011247961318873772
109.0872580724964
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 4002

trials left: 1 - iteration: 7 - block: 4713
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 67
maxTicks_: 88
3
virtual: 2
weight: 55
jumpSize: 100
minAnchorPrice: 108
jumpLog: 0.009950330853168092
anchorLog: 0.009216655104924048
1.0796032551822488
maxTicks: 22
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 5219
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 915
maxTicks_: 3119
3
virtual: 7670
weight: 1
jumpSize: 100
minAnchorPrice: 7594
jumpLog: 0.009950330853168092
anchorLog: 0.00013167423812560322
75.56778755519765
maxTicks: 305
maxTicks_: 75
3
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
virtual: 7670
weight: 1
jumpSize: 100
minAnchorPrice: 7594
jumpLog: 0.009950330853168092
anchorLog: 0.00013167423812560322
75.56778755519765
virtual: 7670
weight: 1
jumpSize: 100
minAnchorPrice: 7594
jumpLog: 0.009950330853168092
anchorLog: 0.00013167423812560322
75.56778755519765
virtual: 7670
weight: 1
jumpSize: 100
minAnchorPrice: 7594
jumpLog: 0.009950330853168092
anchorLog: 0.00013167423812560322
75.56778755519765
virtual: 7670
weight: 1
jumpSize: 100
minAnchorPrice: 7594
jumpLog: 0.009950330853168092
anchorLog: 0.00013167423812560322
75.56778755519765
virtual: 7670
weight: 1
jumpSize: 100
minAnchorPrice: 7594
jumpLog: 0.009950330853168092
anchorLog: 0.00013167423812560322
75.56778755519765
virtual: 7670
weight: 1
jumpSize: 100
minAnchorPrice: 7594
jumpLog: 0.009950330853168092
anchorLog: 0.00013167423812560322
75.56778755519765
Opening pool with 9 dirac utxos and 1 param utxos

trials left: 1 - iteration: 9 - block: 5220
virtual: 8636
weight: 1
jumpSize: 45
minAnchorPrice: 8448
jumpLog: 0.021978906718775167
anchorLog: 0.00011836420680198825
185.68879319694787
maxTicks: 464
maxTicks_: 185
3
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 154
maxTicks_: 88
3
virtual: 8636
weight: 1
jumpSize: 45
minAnchorPrice: 8448
jumpLog: 0.021978906718775167
anchorLog: 0.00011836420680198825
185.68879319694787
virtual: 8636
weight: 1
jumpSize: 45
minAnchorPrice: 8448
jumpLog: 0.021978906718775167
anchorLog: 0.00011836420680198825
185.68879319694787
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
Opening pool with 9 dirac utxos and 1 param utxos

trials left: 1 - iteration: 10 - block: 5221

trials left: 1 - iteration: 11 - block: 5222

          maxBuying: 1
          maxSelling: 189
          maxBuyingA0: 18000
          maxSellingA0: 1701000
          maxSwapA0: 18000
          spotBuying: 9000
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 2
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9003 > 
        spotSelling 9000

          maxBuying: 1
          maxSelling: 189
          maxBuyingA0: 18000
          maxSellingA0: 1700811
          maxSwapA0: 18000
          spotBuying: 8999
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 3
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9003 > 
        spotSelling 9000

          maxBuying: 3
          maxSelling: 71
          maxBuyingA0: 27267
          maxSellingA0: 639000
          maxSwapA0: 27267
          spotBuying: 9000
          spotSelling: 9089
          buyingAmount: 3
          sellingAmount: 4
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9001 > 
        spotSelling 8999

          maxBuying: 1
          maxSelling: 71
          maxBuyingA0: 9089
          maxSellingA0: 639000
          maxSwapA0: 9089
          spotBuying: 9000
          spotSelling: 9089
          buyingAmount: 1
          sellingAmount: 2
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9001 > 
        spotSelling 8999

          maxBuying: 80
          maxSelling: 71
          maxBuyingA0: 759920
          maxSellingA0: 56370592
          maxSwapA0: 759920
          spotBuying: 793952
          spotSelling: 9499
          buyingAmount: 80
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9005 > 
        spotSelling 8999

          maxBuying: 5
          maxSelling: 171
          maxBuyingA0: 16295
          maxSellingA0: 1538829
          maxSwapA0: 16295
          spotBuying: 8999
          spotSelling: 3259
          buyingAmount: 5
          sellingAmount: 2
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  3088 > 
        spotSelling 3087

          maxBuying: 80
          maxSelling: 171
          maxBuyingA0: 260720
          maxSellingA0: 135765792
          maxSwapA0: 260720
          spotBuying: 793952
          spotSelling: 3259
          buyingAmount: 80
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  3088 > 
        spotSelling 3087
subSwap: 1 sold
boughtAssetForSale (old):
        sellingAmm  3088 > 
        spotSelling 3087
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: f2e7dafe5db8fb9004677d53205cdfa142fb7946199d19eccd1b0130, 
   +     +  virtual: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 9000,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 3088,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 1,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 1,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 89
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 18,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 18,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 88
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: f2e7dafe5db8fb9004677d53205cdfa142fb7946199d19eccd1b0130,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 98dce4141990779c74e2aa81ed399fb2fcfc093eae8125de1f1b73a6b1ddbf0b),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: a29a3f5a4b2f7cd6e3ee6bc51c076a8fbf10d555f13ed698a930666bed6e5e91),
   +     +  anchorPrices: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 8526,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 2925,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 88
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3047170,
   +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 9000,
   +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 5
   +  ]
     )
  boughtAsset:  Asset(b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6, gN0UmmNmcLasT2MB5jp4v5)
  soldAsset:    Asset(295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d, r236)
  boughtAmount: 2
  soldAmount:   1
  boughtSpot:   8999
  soldSpot:     3259
  (boughtA0:    6518)
  (soldA0:      8999)
  boughtExp:    1
  soldExp:      2
  spotPrice:    0.36215135015001665
  eff.Price:    0.5
  maxBuying:    5
  (maxBuyingA0: 16295)
)

trials left: 1 - iteration: 12 - block: 6222
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 66
maxTicks_: 1
1
virtual: 6265
weight: 1
jumpSize: 100
minAnchorPrice: 6202
jumpLog: 0.009950330853168092
anchorLog: 0.00016122531272329174
61.716926983082836
maxTicks: 66
maxTicks_: 61
3
virtual: 1
weight: 16
jumpSize: 1
minAnchorPrice: 8
jumpLog: 0.6931471805599453
anchorLog: 0.11778303565638346
5.884949192361718
maxTicks: 22
maxTicks_: 5
3
virtual: 6265
weight: 1
jumpSize: 100
minAnchorPrice: 6202
jumpLog: 0.009950330853168092
anchorLog: 0.00016122531272329174
61.716926983082836
virtual: 6265
weight: 1
jumpSize: 100
minAnchorPrice: 6202
jumpLog: 0.009950330853168092
anchorLog: 0.00016122531272329174
61.716926983082836
virtual: 1
weight: 16
jumpSize: 1
minAnchorPrice: 8
jumpLog: 0.6931471805599453
anchorLog: 0.11778303565638346
5.884949192361718
virtual: 1
weight: 16
jumpSize: 1
minAnchorPrice: 8
jumpLog: 0.6931471805599453
anchorLog: 0.11778303565638346
5.884949192361718
virtual: 1
weight: 16
jumpSize: 1
minAnchorPrice: 8
jumpLog: 0.6931471805599453
anchorLog: 0.11778303565638346
5.884949192361718
Opening pool with 6 dirac utxos and 1 param utxos

trials left: 1 - iteration: 13 - block: 7222

          maxBuying: 1
          maxSelling: 122
          maxBuyingA0: 18000
          maxSellingA0: 1098000
          maxSwapA0: 18000
          spotBuying: 9000
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 2
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9003 > 
        spotSelling 9000

          maxBuying: 1
          maxSelling: 122
          maxBuyingA0: 18000
          maxSellingA0: 1097878
          maxSwapA0: 18000
          spotBuying: 8999
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 3
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9003 > 
        spotSelling 9000

          maxBuying: 80
          maxSelling: 1
          maxBuyingA0: 802160
          maxSellingA0: 793952
          maxSwapA0: 793952
          spotBuying: 793952
          spotSelling: 10027
          buyingAmount: 79
          sellingAmount: 1
        
Swapping.boundary()
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[31mFAILED[0m [0m[38;5;245m(6s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[1m[37m[41m ERRORS [0m

emulator [0m[38;5;245m=> ./tests/emulator.test.ts:15:6[0m
[0m[1m[31merror[0m: AssertionError: lowering selling price should fail: Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: f2e7dafe5db8fb9004677d53205cdfa142fb7946199d19eccd1b0130, 
   +     +  virtual: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 9000,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 3088,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 1,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 1,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 89
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 18,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 18,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 88
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: f2e7dafe5db8fb9004677d53205cdfa142fb7946199d19eccd1b0130,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 98dce4141990779c74e2aa81ed399fb2fcfc093eae8125de1f1b73a6b1ddbf0b),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: a29a3f5a4b2f7cd6e3ee6bc51c076a8fbf10d555f13ed698a930666bed6e5e91),
   +     +  anchorPrices: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 8526,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 2925,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 88
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3047170,
   +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 1,
   +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 9000,
   +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 3
   +  ]
     )
  boughtAsset:  Asset(436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee, )
  soldAsset:    Asset(b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6, gN0UmmNmcLasT2MB5jp4v5)
  boughtAmount: 79
  soldAmount:   1
  boughtSpot:   793952
  soldSpot:     10027
  (boughtA0:    792133)
  (soldA0:      793952)
  boughtExp:    806
  soldExp:      3
  spotPrice:    0.01262922695578574
  eff.Price:    0.012658227848101266
  maxBuying:    9000
  (maxBuyingA0: 90243000)
)
~~~>
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: f2e7dafe5db8fb9004677d53205cdfa142fb7946199d19eccd1b0130, 
   +     +  virtual: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 9000,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 3088,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 1,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 1,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 89
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 18,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 18,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 88
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: f2e7dafe5db8fb9004677d53205cdfa142fb7946199d19eccd1b0130,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 98dce4141990779c74e2aa81ed399fb2fcfc093eae8125de1f1b73a6b1ddbf0b),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: a29a3f5a4b2f7cd6e3ee6bc51c076a8fbf10d555f13ed698a930666bed6e5e91),
   +     +  anchorPrices: +[
   +     +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 8526,
   +     +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 2925,
   +     +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 88
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3047170,
   +  +  295d66c84ea242e3818e1adfd1772a658f0b40365747a3670db6075d_r236: 1,
   +  +  436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee_: 9000,
   +  +  b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6_gN0UmmNmcLasT2MB5jp4v5: 3
   +  ]
     )
  boughtAsset:  Asset(436d4cb091b18dbb865b0b4106e4ee8d68a1ed6d6330dce4a7f2f2ee, )
  soldAsset:    Asset(b73811d4ebd9016af718aee9e18f2e165c15cf2e3de7dc5c4f6ce2b6, gN0UmmNmcLasT2MB5jp4v5)
  boughtAmount: 79
  soldAmount:   1
  boughtSpot:   793952
  soldSpot:     9499
  (boughtA0:    750421)
  (soldA0:      793952)
  boughtExp:    806
  soldExp:      2
  spotPrice:    0.011964199347063803
  eff.Price:    0.012658227848101266
  maxBuying:    9000
  (maxBuyingA0: 85491000)
)
    throw new AssertionError(msg);
[0m[31m          ^[0m
    at [0m[1m[3massert[0m ([0m[36mhttps://deno.land/std@0.167.0/testing/asserts.ts[0m:[0m[33m141[0m:[0m[33m11[0m)
    at [0m[1m[3mSwapping.testSellingPrice[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/swapping.ts[0m:[0m[33m640[0m:[0m[33m7[0m)
    at [0m[1m[3mSwapping.corruptionTests[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/swapping.ts[0m:[0m[33m516[0m:[0m[33m10[0m)
    at new [0m[1m[3mSwapping[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/swapping.ts[0m:[0m[33m56[0m:[0m[33m36[0m)
    at [0m[1m[3mFunction.boundary[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/swapping.ts[0m:[0m[33m303[0m:[0m[33m12[0m)
    at [0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/utxo.ts[0m:[0m[33m454[0m:[0m[33m35[0m
    at [0m[1m[3mArray.forEach[0m ([0m[36m<anonymous>[0m)
    at [0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/utxo.ts[0m:[0m[33m338[0m:[0m[33m21[0m
    at [0m[1m[3mArray.forEach[0m ([0m[36m<anonymous>[0m)
    at [0m[1m[3mDiracUtxo.swappingsFor[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/utxo.ts[0m:[0m[33m333[0m:[0m[33m20[0m)

[0m[1m[37m[41m FAILURES [0m

emulator [0m[38;5;245m=> ./tests/emulator.test.ts:15:6[0m

[0m[31mFAILED[0m | 0 passed | 1 failed [0m[38;5;245m(17s)[0m

[0m[1m[31merror[0m: Test failed
