[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 6

trials left: 1 - iteration: 0 - block: 0
virtual: 1
weight: 86
jumpSize: 46
minAnchorPrice: 84
jumpLog: 0.021506205220963682
anchorLog: 0.011834457647002798
1.8172531316980425
maxTicks: 9007199254740991
maxTicks_: 1
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 9007199254740991
maxTicks_: 3121657384082680
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1
virtual: 1
weight: 28
jumpSize: 1
minAnchorPrice: 14
jumpLog: 0.6931471805599453
anchorLog: 0.06899287148695142
10.04664924971328
maxTicks: 9007199254740991
maxTicks_: 10
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 9007199254740991
maxTicks_: 44812306322540
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 2 - block: 1001
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 163932449527855
maxTicks_: 3121657384082680
3
virtual: 4207034190294786
weight: 1
jumpSize: 24
minAnchorPrice: 4038752822682994
jumpLog: 0.0408219945202552
anchorLog: 2.2204460492503128e-16
183845919309941.78
maxTicks: 163932449527855
maxTicks_: 183845919309941
3
virtual: 4207034190294786
weight: 1
jumpSize: 24
minAnchorPrice: 4038752822682994
jumpLog: 0.0408219945202552
anchorLog: 2.2204460492503128e-16
183845919309941.78
virtual: 4207034190294786
weight: 1
jumpSize: 24
minAnchorPrice: 4038752822682994
jumpLog: 0.0408219945202552
anchorLog: 2.2204460492503128e-16
183845919309941.78
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 3 - block: 2001
virtual: 9007199254740991
weight: 1
jumpSize: 69
minAnchorPrice: 8878524979673262
jumpLog: 0.01438873745209967
anchorLog: 2.2204460492503128e-16
64801112627607.984
maxTicks: 657483750066746
maxTicks_: 64801112627607
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 657483750066746
maxTicks_: 3121657384082680
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 4 - block: 2304

trials left: 1 - iteration: 5 - block: 2666
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  4207034192635116 > 
        spotBuying 4382327281557068
boughtAssetForSale (old):
        sellingAmm  9061843404583609 > 
        spotSelling 9007199254740990
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  4207034192635116 > 
        spotBuying 4264671957942744
boughtAssetForSale (old):
        sellingAmm  9061843404583609 > 
        spotSelling 9007199254740990
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  4207034192635116 > 
        spotBuying 4323099382177546
boughtAssetForSale (old):
        sellingAmm  9061843404583609 > 
        spotSelling 9007199254740990
subSwap: 2419698 sold
boughtAssetForSale (old): 
        buyingAmm  4207034192635116 > 
        spotBuying 4382327281557068
boughtAssetForSale (old):
        sellingAmm  9061843404583609 > 
        spotSelling 9007199254740990
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: a63a4db95d21bebe50a2baab840b0e4e64c02817dac34be09144aeb1, 
   +     +  virtual: +[
   +     +  +  fc2269e96d3cb951e0c59a59d4d8a8319c14773e8df3dcacbab1acdb_: 9007199254740991,
   +     +  +  _: 4207034190294786
   +     +  ], 
   +     +  weights: +[
   +     +  +  fc2269e96d3cb951e0c59a59d4d8a8319c14773e8df3dcacbab1acdb_: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  fc2269e96d3cb951e0c59a59d4d8a8319c14773e8df3dcacbab1acdb_: 1,
   +     +  +  _: 24
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: a63a4db95d21bebe50a2baab840b0e4e64c02817dac34be09144aeb1,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 5458c35dfc0ff2e1732c4d55983e65ceeffd758b48841a521ec4c2d2d24e8039),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 4a5c91b2b411b1ebdbfc4bfe6245144bf194670940b3d0e7d832104050231b46),
   +     +  anchorPrices: +[
   +     +  +  fc2269e96d3cb951e0c59a59d4d8a8319c14773e8df3dcacbab1acdb_: 4503599627370495,
   +     +  +  _: 4038752822682994
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2340330,
   +  +  fc2269e96d3cb951e0c59a59d4d8a8319c14773e8df3dcacbab1acdb_: 54644149842618
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(fc2269e96d3cb951e0c59a59d4d8a8319c14773e8df3dcacbab1acdb, )
  boughtAmount: 565089
  soldAmount: 2419695
  boughtSpot: 4207034190294785
  soldSpot: 18014398509481980
  boughtExp: 1
  soldExp: 2
  spotPrice: 4.281971026296727
  effectivePrice: 4.281971512452021
)

trials left: 1 - iteration: 6 - block: 3666

trials left: 1 - iteration: 7 - block: 3667
virtual: 4555641233818716
weight: 1
jumpSize: 100
minAnchorPrice: 4510535875068035
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 1078334224689030
weight: 1
jumpSize: 1
minAnchorPrice: 539167112344515
jumpLog: 0.6931471805599453
anchorLog: 1.7763568394002489e-15
390207173010335.3
maxTicks: 1
maxTicks_: 390207173010335
1
virtual: 5031530389666030
weight: 1
jumpSize: 18
minAnchorPrice: 4766713000736238
jumpLog: 0.05406722127027579
anchorLog: 2.2204460492503128e-16
243497117565772.25
maxTicks: 1
maxTicks_: 243497117565772
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 4350
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1981585619496795
maxTicks_: 1
1
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1981585619496795
maxTicks_: 1
1
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1981585619496795
maxTicks_: 44812306322540
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 9 - block: 4351

trials left: 1 - iteration: 10 - block: 5037
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  1078334227318130 > 
        spotBuying 2156668449378060
boughtAssetForSale (old):
        sellingAmm  4555641233818717 > 
        spotSelling 4555641233818715
subSwap: 1005685 sold
boughtAssetForSale (old): 
        buyingAmm  1078334227318130 > 
        spotBuying 2156668449378060
boughtAssetForSale (old):
        sellingAmm  4555641233818717 > 
        spotSelling 4555641233818715
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: fd61b5cdafca7e9a229c73330853c6eeedd7f1c1e02d6e4749427499, 
   +     +  virtual: +[
   +     +  +  78a3ffeb946924e24e1672b19ae92600839db4f493900554eb21e82e_: 4555641233818716,
   +     +  +  _: 1078334224689030,
   +     +  +  e3d61e154590d7e5a7ba8b12bcb7688a308ba917e5780ff2973004ee_ufbjr3OS9P5sC3iCrOmLc0ZSqnCCOeE0: 5031530389666030
   +     +  ], 
   +     +  weights: +[
   +     +  +  78a3ffeb946924e24e1672b19ae92600839db4f493900554eb21e82e_: 1,
   +     +  +  _: 1,
   +     +  +  e3d61e154590d7e5a7ba8b12bcb7688a308ba917e5780ff2973004ee_ufbjr3OS9P5sC3iCrOmLc0ZSqnCCOeE0: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  78a3ffeb946924e24e1672b19ae92600839db4f493900554eb21e82e_: 100,
   +     +  +  _: 1,
   +     +  +  e3d61e154590d7e5a7ba8b12bcb7688a308ba917e5780ff2973004ee_ufbjr3OS9P5sC3iCrOmLc0ZSqnCCOeE0: 18
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: fd61b5cdafca7e9a229c73330853c6eeedd7f1c1e02d6e4749427499,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 271b7105f8aa0212eb6bc15331a951eab8cecd95824d72f0164befe52cb0406f),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 70c9b3db1bcaf3d91d098a8350fbcff618c297e545e6f1db175daa2d4e2dc9a7),
   +     +  anchorPrices: +[
   +     +  +  78a3ffeb946924e24e1672b19ae92600839db4f493900554eb21e82e_: 4510535875068035,
   +     +  +  _: 539167112344515,
   +     +  +  e3d61e154590d7e5a7ba8b12bcb7688a308ba917e5780ff2973004ee_ufbjr3OS9P5sC3iCrOmLc0ZSqnCCOeE0: 4766713000736238
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2629100,
   +  +  78a3ffeb946924e24e1672b19ae92600839db4f493900554eb21e82e_: 1
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(78a3ffeb946924e24e1672b19ae92600839db4f493900554eb21e82e, )
  boughtAmount: 235691
  soldAmount: 1005682
  boughtSpot: 1078334224689030
  soldSpot: 4601197646156902
  boughtExp: 1
  soldExp: 2
  spotPrice: 4.2669494678088284
  effectivePrice: 4.266951220029615
)

trials left: 1 - iteration: 11 - block: 5038

trials left: 1 - iteration: 12 - block: 5039
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 6570155161273022
maxTicks_: 44812306322540
3
virtual: 8903646387467155
weight: 1
jumpSize: 100
minAnchorPrice: 8815491472739757
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 3285077580636511
maxTicks_: 44812306322540
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 8903646387467155
weight: 1
jumpSize: 100
minAnchorPrice: 8815491472739757
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 8903646387467155
weight: 1
jumpSize: 100
minAnchorPrice: 8815491472739757
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 8903646387467155
weight: 1
jumpSize: 100
minAnchorPrice: 8815491472739757
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 8903646387467155
weight: 1
jumpSize: 100
minAnchorPrice: 8815491472739757
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
Opening pool with 6 dirac utxos and 1 param utxos

trials left: 1 - iteration: 13 - block: 5758
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  4207034192635116 > 
        spotBuying 4382327281557068
boughtAssetForSale (old):
        sellingAmm  9061843407003304 > 
        spotSelling 9007199254740990
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  4207034192635116 > 
        spotBuying 4264671957942744
boughtAssetForSale (old):
        sellingAmm  9061843404583609 > 
        spotSelling 9007199254740990
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  4207034192635116 > 
        spotBuying 4323099382177546
boughtAssetForSale (old):
        sellingAmm  9061843404583609 > 
        spotSelling 9007199254740990
subSwap: 2340330 bought
boughtAssetForSale (old): 
        buyingAmm  4207034192635116 > 
        spotBuying 4264671957942744
boughtAssetForSale (old):
        sellingAmm  9061843404583609 > 
        spotSelling 9007199254740990
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: a63a4db95d21bebe50a2baab840b0e4e64c02817dac34be09144aeb1, 
   +     +  virtual: +[
   +     +  +  fc2269e96d3cb951e0c59a59d4d8a8319c14773e8df3dcacbab1acdb_: 9007199254740991,
   +     +  +  _: 4207034190294786
   +     +  ], 
   +     +  weights: +[
   +     +  +  fc2269e96d3cb951e0c59a59d4d8a8319c14773e8df3dcacbab1acdb_: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  fc2269e96d3cb951e0c59a59d4d8a8319c14773e8df3dcacbab1acdb_: 1,
   +     +  +  _: 24
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: a63a4db95d21bebe50a2baab840b0e4e64c02817dac34be09144aeb1,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: c3f7f4af1d8d7d5de27241aa96de7538197f0b91ead833bf5292773305a04b30),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 4a5c91b2b411b1ebdbfc4bfe6245144bf194670940b3d0e7d832104050231b46),
   +     +  anchorPrices: +[
   +     +  +  fc2269e96d3cb951e0c59a59d4d8a8319c14773e8df3dcacbab1acdb_: 4503599627370495,
   +     +  +  _: 4094085079625035
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2340330,
   +  +  fc2269e96d3cb951e0c59a59d4d8a8319c14773e8df3dcacbab1acdb_: 54644149842618
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(fc2269e96d3cb951e0c59a59d4d8a8319c14773e8df3dcacbab1acdb, )
  boughtAmount: 2340330
  soldAmount: 10297695
  boughtSpot: 4094085079625035
  soldSpot: 18014398509481980
  boughtExp: 0
  soldExp: 2
  spotPrice: 4.400103602910925
  effectivePrice: 4.400103831510941
)

trials left: 1 - iteration: 14 - block: 6707

trials left: 1 - iteration: 15 - block: 7707

trials left: 1 - iteration: 16 - block: 8707
virtual: 8269823570851249
weight: 1
jumpSize: 96
minAnchorPrice: 8184567657749689
jumpLog: 0.010362787035546658
anchorLog: 2.2204460492503128e-16
46669843831807.74
maxTicks: 1
maxTicks_: 46669843831807
1
virtual: 9007199254740991
weight: 1
jumpSize: 85
minAnchorPrice: 8902464379685863
jumpLog: 0.011696039763191236
anchorLog: 2.2204460492503128e-16
52674280319218.56
maxTicks: 1
maxTicks_: 52674280319218
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 17 - block: 9707

trials left: 1 - iteration: 18 - block: 10292

trials left: 1 - iteration: 19 - block: 10851
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 5393091856776890
maxTicks_: 3121657384082680
3
virtual: 1
weight: 16
jumpSize: 1
minAnchorPrice: 8
jumpLog: 0.6931471805599453
anchorLog: 0.11778303565638346
5.884949192361718
maxTicks: 5393091856776890
maxTicks_: 5
3
Opening pool with 1 dirac utxos and 1 param utxos
traces.length: 20
Opening: 9
Closing: 8
Swapping: 3
--- DONE ---
Opening: 9
Closing: 8
Swapping: 3
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(1m59s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(3m40s)[0m

