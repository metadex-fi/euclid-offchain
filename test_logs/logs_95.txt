[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 1
weight: 85
jumpSize: 84
minAnchorPrice: 84
jumpLog: 0.011834457647002798
anchorLog: 0.011834457647002798
1
maxTicks: 6768004644088482
maxTicks_: 1
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 6768004644088482
maxTicks_: 3121657384082680
3
virtual: 5390402397317652
weight: 1
jumpSize: 100
minAnchorPrice: 5337032076552130
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 6768004644088482
maxTicks_: 44812306322540
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 790
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  5390402400235522 > 
        spotBuying 5444306421290827
boughtAssetForSale (old):
        sellingAmm  575280394747521055 > 
        spotSelling 574789803220932812
subSwap: 314842569 sold
boughtAssetForSale (old): 
        buyingAmm  5390402400235522 > 
        spotBuying 5444306421290827
boughtAssetForSale (old):
        sellingAmm  575280394747521055 > 
        spotSelling 574789803220932812
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 0c95aa878467802dd49d8e219b324a21587dd438b652c6f87844b8ff, 
   +     +  virtual: +[
   +     +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 1,
   +     +  +  99682fd8e4e06813ba0e5f3e7e8fd672f0f6d3c8684458ed53707afb_WEyIjf52F9qNrVW2p3sVSv49Jzp46J5L: 9007199254740991,
   +     +  +  _: 5390402397317652
   +     +  ], 
   +     +  weights: +[
   +     +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 85,
   +     +  +  99682fd8e4e06813ba0e5f3e7e8fd672f0f6d3c8684458ed53707afb_WEyIjf52F9qNrVW2p3sVSv49Jzp46J5L: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 84,
   +     +  +  99682fd8e4e06813ba0e5f3e7e8fd672f0f6d3c8684458ed53707afb_WEyIjf52F9qNrVW2p3sVSv49Jzp46J5L: 1,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 0c95aa878467802dd49d8e219b324a21587dd438b652c6f87844b8ff,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: a1b6eb7f5a1bd02cc3e409f9caf7e6f076f675610885e74a09482b64b8006e13),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 82629a687e270971e373c254f03d90dfd90d13c646d48fb9314eaf01312dcd40),
   +     +  anchorPrices: +[
   +     +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 84,
   +     +  +  99682fd8e4e06813ba0e5f3e7e8fd672f0f6d3c8684458ed53707afb_WEyIjf52F9qNrVW2p3sVSv49Jzp46J5L: 4503599627370495,
   +     +  +  _: 5337032076552130
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2917870,
   +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 6768004644088482
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7, SJurPGmId7GqvhTceUXhfx4YoSyPobE6)
  boughtAmount: 2917870
  soldAmount: 314842569
  boughtSpot: 5390402397317651
  soldSpot: 581632538973562965
  boughtExp: 1
  soldExp: 3082
  spotPrice: 107.90150643725457
  effectivePrice: 107.90150657842878
)

trials left: 1 - iteration: 2 - block: 1790
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 9007199254740991
weight: 1
jumpSize: 53
minAnchorPrice: 8840399268542083
jumpLog: 0.018692133012152546
anchorLog: 2.2204460492503128e-16
84181883268289.97
maxTicks: 1
maxTicks_: 84181883268289
1
virtual: 3668666202777064
weight: 1
jumpSize: 33
minAnchorPrice: 3560764255636562
jumpLog: 0.02985296314968113
anchorLog: 2.2204460492503128e-16
134445793716809.1
maxTicks: 1
maxTicks_: 134445793716809
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 3 - block: 2790
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  5390402400235522 > 
        spotBuying 5444306421290827
boughtAssetForSale (old):
        sellingAmm  575280421509139420 > 
        spotSelling 574789803220932812
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  3668666205548394 > 
        spotBuying 3779837905891520
boughtAssetForSale (old):
        sellingAmm  9007199254740992 > 
        spotSelling 9007199254740990
subSwap: 1947549 bought
boughtAssetForSale (old): 
        buyingAmm  5390402400235522 > 
        spotBuying 5444306421290827
boughtAssetForSale (old):
        sellingAmm  575280421509139420 > 
        spotSelling 574789803220932812
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 0c95aa878467802dd49d8e219b324a21587dd438b652c6f87844b8ff, 
   +     +  virtual: +[
   +     +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 1,
   +     +  +  99682fd8e4e06813ba0e5f3e7e8fd672f0f6d3c8684458ed53707afb_WEyIjf52F9qNrVW2p3sVSv49Jzp46J5L: 9007199254740991,
   +     +  +  _: 5390402397317652
   +     +  ], 
   +     +  weights: +[
   +     +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 85,
   +     +  +  99682fd8e4e06813ba0e5f3e7e8fd672f0f6d3c8684458ed53707afb_WEyIjf52F9qNrVW2p3sVSv49Jzp46J5L: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 84,
   +     +  +  99682fd8e4e06813ba0e5f3e7e8fd672f0f6d3c8684458ed53707afb_WEyIjf52F9qNrVW2p3sVSv49Jzp46J5L: 1,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 0c95aa878467802dd49d8e219b324a21587dd438b652c6f87844b8ff,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: a1b6eb7f5a1bd02cc3e409f9caf7e6f076f675610885e74a09482b64b8006e13),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 82629a687e270971e373c254f03d90dfd90d13c646d48fb9314eaf01312dcd40),
   +     +  anchorPrices: +[
   +     +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 84,
   +     +  +  99682fd8e4e06813ba0e5f3e7e8fd672f0f6d3c8684458ed53707afb_WEyIjf52F9qNrVW2p3sVSv49Jzp46J5L: 4503599627370495,
   +     +  +  _: 5337032076552130
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2917870,
   +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 6768004958931051
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7, SJurPGmId7GqvhTceUXhfx4YoSyPobE6)
  boughtAmount: 1947549
  soldAmount: 210143471
  boughtSpot: 5390402397317651
  soldSpot: 581632538973562965
  boughtExp: 1
  soldExp: 3082
  spotPrice: 107.90150643725457
  effectivePrice: 107.90150645760389
)

trials left: 1 - iteration: 4 - block: 3790

trials left: 1 - iteration: 5 - block: 4790
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  3668666205548394 > 
        spotBuying 3779837905891520
boughtAssetForSale (old):
        sellingAmm  9007199254740992 > 
        spotSelling 9007199254740990
subSwap: 1 bought
boughtAssetForSale (old): 
        buyingAmm  3668666205548394 > 
        spotBuying 3779837905891520
boughtAssetForSale (old):
        sellingAmm  9007199254740992 > 
        spotSelling 9007199254740990
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 0c95aa878467802dd49d8e219b324a21587dd438b652c6f87844b8ff, 
   +     +  virtual: +[
   +     +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 9007199254740991,
   +     +  +  1a29446c9fe811d3850be75176d417851c88647cc18a06c7d9d208d5_: 9007199254740991,
   +     +  +  _: 3668666202777064
   +     +  ], 
   +     +  weights: +[
   +     +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 1,
   +     +  +  1a29446c9fe811d3850be75176d417851c88647cc18a06c7d9d208d5_: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 1,
   +     +  +  1a29446c9fe811d3850be75176d417851c88647cc18a06c7d9d208d5_: 53,
   +     +  +  _: 33
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 0c95aa878467802dd49d8e219b324a21587dd438b652c6f87844b8ff,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 7f45b9700f5b77cf6c6f91c70fc917bf99a7661b9a5254fa4fa2117d6438681e),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 1552f939890a7ee78f95c1fca4118d5364864805cbf420d29fe5f44a74ad7b18),
   +     +  anchorPrices: +[
   +     +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 4503599627370495,
   +     +  +  1a29446c9fe811d3850be75176d417851c88647cc18a06c7d9d208d5_: 8840399268542083,
   +     +  +  _: 3560764255636562
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2771330,
   +  +  add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7_SJurPGmId7GqvhTceUXhfx4YoSyPobE6: 1
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(add98083c5fb0ee0d0c37a1e272fc6f1ba0389e47f89e3c94e1d87d7, SJurPGmId7GqvhTceUXhfx4YoSyPobE6)
  boughtAmount: 1
  soldAmount: 5
  boughtSpot: 3668666202777063
  soldSpot: 18014398509481980
  boughtExp: 1
  soldExp: 2
  spotPrice: 4.910340029257951
  effectivePrice: 5
)

trials left: 1 - iteration: 6 - block: 5513

trials left: 1 - iteration: 7 - block: 6513
virtual: 1536748572257008
weight: 5
jumpSize: 83
minAnchorPrice: 7592269731984027
jumpLog: 0.01197619104671562
anchorLog: 2.2204460492503128e-16
53935969535306.34
maxTicks: 3992432181286595
maxTicks_: 53935969535306
3
virtual: 1
weight: 98
jumpSize: 74
minAnchorPrice: 96
jumpLog: 0.01342302033214077
anchorLog: 0.010362787035546658
1.2953098704138988
maxTicks: 3992432181286595
maxTicks_: 1
1
virtual: 1256029937824215
weight: 1
jumpSize: 100
minAnchorPrice: 1243593997845757
jumpLog: 0.009950330853168092
anchorLog: 8.881784197001248e-16
11203076580635.248
maxTicks: 3992432181286595
maxTicks_: 11203076580635
3
virtual: 1256029937824215
weight: 1
jumpSize: 100
minAnchorPrice: 1243593997845757
jumpLog: 0.009950330853168092
anchorLog: 8.881784197001248e-16
11203076580635.248
virtual: 1256029937824215
weight: 1
jumpSize: 100
minAnchorPrice: 1243593997845757
jumpLog: 0.009950330853168092
anchorLog: 8.881784197001248e-16
11203076580635.248
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 7513

trials left: 1 - iteration: 9 - block: 8513
virtual: 4958020681596562
weight: 1
jumpSize: 55
minAnchorPrice: 4869484597996623
jumpLog: 0.018018505502678212
anchorLog: 2.2204460492503128e-16
81148134667634.84
maxTicks: 7004347785965901
maxTicks_: 81148134667634
3
virtual: 3165464552010784
weight: 1
jumpSize: 1
minAnchorPrice: 1582732276005392
jumpLog: 0.6931471805599453
anchorLog: 6.661338147750937e-16
1040552461360893.5
maxTicks: 7004347785965901
maxTicks_: 1040552461360893
3
virtual: 3165464552010784
weight: 1
jumpSize: 1
minAnchorPrice: 1582732276005392
jumpLog: 0.6931471805599453
anchorLog: 6.661338147750937e-16
1040552461360893.5
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 10 - block: 9513
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 1233362200481412
weight: 13
jumpSize: 1
minAnchorPrice: 8016854303129178
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 11 - block: 9514

trials left: 1 - iteration: 12 - block: 9515

trials left: 1 - iteration: 13 - block: 10256
virtual: 9007199254740991
weight: 1
jumpSize: 72
minAnchorPrice: 8883812963580155
jumpLog: 0.01379332213233577
anchorLog: 2.2204460492503128e-16
62119600415388.59
maxTicks: 314335080217156
maxTicks_: 62119600415388
3
virtual: 2
weight: 87
jumpSize: 100
minAnchorPrice: 172
jumpLog: 0.009950330853168092
anchorLog: 0.005797117684325915
1.7164272652376058
maxTicks: 314335080217156
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 14 - block: 10415
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 9007199254740991
weight: 1
jumpSize: 36
minAnchorPrice: 8763761437045288
jumpLog: 0.027398974188114347
anchorLog: 2.2204460492503128e-16
123394009943925.62
maxTicks: 1
maxTicks_: 123394009943925
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 15 - block: 10416

trials left: 1 - iteration: 16 - block: 10417

trials left: 1 - iteration: 17 - block: 11417
virtual: 3020401540798466
weight: 1
jumpSize: 9
minAnchorPrice: 2718361386718619
jumpLog: 0.10536051565782635
anchorLog: 4.440892098500625e-16
237250789528075.1
maxTicks: 7004347785965901
maxTicks_: 237250789528075
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 2334782595321967
maxTicks_: 44812306322540
3
virtual: 2
weight: 86
jumpSize: 100
minAnchorPrice: 170
jumpLog: 0.009950330853168092
anchorLog: 0.005865119452398058
1.6965265471447002
maxTicks: 2334782595321967
maxTicks_: 1
1
virtual: 3020401540798466
weight: 1
jumpSize: 9
minAnchorPrice: 2718361386718619
jumpLog: 0.10536051565782635
anchorLog: 4.440892098500625e-16
237250789528075.1
virtual: 3020401540798466
weight: 1
jumpSize: 9
minAnchorPrice: 2718361386718619
jumpLog: 0.10536051565782635
anchorLog: 4.440892098500625e-16
237250789528075.1
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 18 - block: 12417

trials left: 1 - iteration: 19 - block: 12418
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 7004347785965901
maxTicks_: 3121657384082680
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 7004347785965901
maxTicks_: 44812306322540
3
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 2334782595321967
maxTicks_: 1
1
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
Opening pool with 3 dirac utxos and 1 param utxos
traces.length: 20
Opening: 9
Swapping: 3
Closing: 8
--- DONE ---
Opening: 9
Swapping: 3
Closing: 8
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(1m5s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(3m37s)[0m

