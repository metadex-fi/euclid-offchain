[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 9007199254740991
maxTicks_: 3121657384082680
3
virtual: 1
weight: 9
jumpSize: 1
minAnchorPrice: 4
jumpLog: 0.6931471805599453
anchorLog: 0.22314355131420976
3.10628371950539
maxTicks: 4503599627370495
maxTicks_: 3
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 1
weight: 9
jumpSize: 1
minAnchorPrice: 4
jumpLog: 0.6931471805599453
anchorLog: 0.22314355131420976
3.10628371950539
virtual: 1
weight: 9
jumpSize: 1
minAnchorPrice: 4
jumpLog: 0.6931471805599453
anchorLog: 0.22314355131420976
3.10628371950539
virtual: 1
weight: 9
jumpSize: 1
minAnchorPrice: 4
jumpLog: 0.6931471805599453
anchorLog: 0.22314355131420976
3.10628371950539
virtual: 1
weight: 9
jumpSize: 1
minAnchorPrice: 4
jumpLog: 0.6931471805599453
anchorLog: 0.22314355131420976
3.10628371950539
Opening pool with 6 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1

trials left: 1 - iteration: 2 - block: 2
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 1
maxTicks_: 1
1
virtual: 4390654476524642
weight: 2
jumpSize: 28
minAnchorPrice: 8478505196047584
jumpLog: 0.03509131981127019
anchorLog: 2.2204460492503128e-16
158037254825975.38
maxTicks: 1
maxTicks_: 158037254825975
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 3 - block: 3

trials left: 1 - iteration: 4 - block: 4
virtual: 9007199254740991
weight: 1
jumpSize: 81
minAnchorPrice: 8897355361390491
jumpLog: 0.012270092591814401
anchorLog: 2.2204460492503128e-16
55259584424296.83
maxTicks: 1
maxTicks_: 55259584424296
1
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 5 - block: 446
virtual: 4133700806740186
weight: 1
jumpSize: 5
minAnchorPrice: 3444750672283488
jumpLog: 0.1823215567939546
anchorLog: 2.2204460492503128e-16
821103295238862.8
maxTicks: 1
maxTicks_: 821103295238862
1
virtual: 2
weight: 58
jumpSize: 100
minAnchorPrice: 114
jumpLog: 0.009950330853168092
anchorLog: 0.008733679968754631
1.139305640779845
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 1251
Swapping.boundary()
addedBuyingA0: 21340063306315241366460
addedSellingA0: 21340063639915212550770
diff: -333599971184310
subSwap: 2340330 bought
addedBuyingA0: 21340063306315241366460
addedSellingA0: 21340063639915212550770
diff: -333599971184310
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 574472c45a3f864ba9db6c7562a21684a54483b9439d2034a2c0ca6a, 
   +     +  virtual: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 9007199254740991,
   +     +  +  _: 9007199254740991
   +     +  ], 
   +     +  weights: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 81,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 574472c45a3f864ba9db6c7562a21684a54483b9439d2034a2c0ca6a,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3fa1bb2d2a758148048d8e25ad138bbeace21f401b6ce53eb53965842fcd50b6),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: c1cd6611af063d5f2d2cbd1eb7f17cbc4f450124f56225cea4b8dac9947c2517),
   +     +  anchorPrices: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 8897355361390491,
   +     +  +  _: 8918019064099991
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2340330,
   +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 1
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809, PD2M)
  boughtAmount: 2340330
  soldAmount: 2369223
  boughtSpot: 9007199254740990
  soldSpot: 9118399245540262
  boughtExp: 1
  soldExp: 2
  spotPrice: 1.0123456790123457
  effectivePrice: 1.0123456948379075
)

trials left: 1 - iteration: 7 - block: 2106
Swapping.boundary()
addedBuyingA0: 21497264509308355483340
addedSellingA0: 21497266288508207049240
diff: -1779199851565900
subSwap: 2357570 bought
addedBuyingA0: 21497264509308355483340
addedSellingA0: 21497266288508207049240
diff: -1779199851565900
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 574472c45a3f864ba9db6c7562a21684a54483b9439d2034a2c0ca6a, 
   +     +  virtual: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 9007199254740991,
   +     +  +  _: 9007199254740991
   +     +  ], 
   +     +  weights: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 81,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 574472c45a3f864ba9db6c7562a21684a54483b9439d2034a2c0ca6a,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3fa1bb2d2a758148048d8e25ad138bbeace21f401b6ce53eb53965842fcd50b6),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: c1cd6611af063d5f2d2cbd1eb7f17cbc4f450124f56225cea4b8dac9947c2517),
   +     +  anchorPrices: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 8897355361390491,
   +     +  +  _: 8918019064099991
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2357570,
   +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 2369224
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809, PD2M)
  boughtAmount: 2357570
  soldAmount: 2386676
  boughtSpot: 9007199254740990
  soldSpot: 9118399245540262
  boughtExp: 1
  soldExp: 2
  spotPrice: 1.0123456790123457
  effectivePrice: 1.0123457627981354
)

trials left: 1 - iteration: 8 - block: 3106
Swapping.boundary()
addedBuyingA0: 21497264509308355483340
addedSellingA0: 21497266288508207049240
diff: -1779199851565900
subSwap: 2386676 sold
addedBuyingA0: 21497264509308355483340
addedSellingA0: 21497266288508207049240
diff: -1779199851565900
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 574472c45a3f864ba9db6c7562a21684a54483b9439d2034a2c0ca6a, 
   +     +  virtual: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 9007199254740991,
   +     +  +  _: 9007199254740991
   +     +  ], 
   +     +  weights: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 81,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 574472c45a3f864ba9db6c7562a21684a54483b9439d2034a2c0ca6a,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3fa1bb2d2a758148048d8e25ad138bbeace21f401b6ce53eb53965842fcd50b6),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: c1cd6611af063d5f2d2cbd1eb7f17cbc4f450124f56225cea4b8dac9947c2517),
   +     +  anchorPrices: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 8897355361390491,
   +     +  +  _: 8918019064099991
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2357570,
   +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 4755900
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809, PD2M)
  boughtAmount: 2357570
  soldAmount: 2386676
  boughtSpot: 9007199254740990
  soldSpot: 9118399245540262
  boughtExp: 1
  soldExp: 2
  spotPrice: 1.0123456790123457
  effectivePrice: 1.0123457627981354
)

trials left: 1 - iteration: 9 - block: 4106

trials left: 1 - iteration: 10 - block: 4909

trials left: 1 - iteration: 11 - block: 5909
virtual: 2
weight: 72
jumpSize: 100
minAnchorPrice: 142
jumpLog: 0.009950330853168092
anchorLog: 0.00701757265864654
1.4179163276504194
maxTicks: 9007199254740991
maxTicks_: 1
1
virtual: 1
weight: 32
jumpSize: 2
minAnchorPrice: 21
jumpLog: 0.4054651081081644
anchorLog: 0.04652001563489291
8.715928027419672
maxTicks: 9007199254740991
maxTicks_: 8
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 12 - block: 5910

trials left: 1 - iteration: 13 - block: 5911
virtual: 8621027047263409
weight: 1
jumpSize: 1
minAnchorPrice: 4310513523631704
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 8725176979728835
maxTicks_: 3121657384082680
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 8725176979728835
maxTicks_: 44812306322540
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 14 - block: 6111

trials left: 1 - iteration: 15 - block: 6650
virtual: 510440367728200
weight: 14
jumpSize: 1
minAnchorPrice: 3573082574097400
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 9007199254740991
weight: 1
jumpSize: 30
minAnchorPrice: 8716644440071926
jumpLog: 0.03278982282299097
anchorLog: 2.2204460492503128e-16
147672233847166.75
maxTicks: 1
maxTicks_: 147672233847166
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 16 - block: 7650
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 9007199254740991
weight: 1
jumpSize: 71
minAnchorPrice: 8882099265091810
jumpLog: 0.01398624197473987
anchorLog: 2.2204460492503128e-16
62988434145752.08
maxTicks: 1
maxTicks_: 62988434145752
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 17 - block: 8650
Swapping.boundary()
addedBuyingA0: 21290616818166461172000
addedSellingA0: 21290623123205939256660
diff: -6305039478084660
subSwap: 2363734 sold
addedBuyingA0: 21290616818166461172000
addedSellingA0: 21290623123205939256660
diff: -6305039478084660
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 574472c45a3f864ba9db6c7562a21684a54483b9439d2034a2c0ca6a, 
   +     +  virtual: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 9007199254740991,
   +     +  +  _: 9007199254740991
   +     +  ], 
   +     +  weights: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 100,
   +     +  +  _: 71
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 574472c45a3f864ba9db6c7562a21684a54483b9439d2034a2c0ca6a,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: df08cfad334c41e3710221f563a966ae19a5858c6d6f703071def4fe2e741afe),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: f74c822292f965c7ae7874d7603a442a61b4e281d8c8d0c173ed544029929a16),
   +     +  anchorPrices: +[
   +     +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 8918019064099991,
   +     +  +  _: 8882099265091810
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2340330,
   +  +  5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809_PD2M: 1
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(5e58b971575f0aab372d4667025912e49de30c9b3700a7bb1555f809, PD2M)
  boughtAmount: 2340330
  soldAmount: 2363734
  boughtSpot: 9007199254740990
  soldSpot: 9097271247288400
  boughtExp: 1
  soldExp: 2
  spotPrice: 1.01
  effectivePrice: 1.0100002991031178
)

trials left: 1 - iteration: 18 - block: 9650
virtual: 9007199254740991
weight: 1
jumpSize: 87
minAnchorPrice: 8904844717755297
jumpLog: 0.01142869582362285
anchorLog: 2.2204460492503128e-16
51470270252598.62
maxTicks: 9007199254740991
maxTicks_: 51470270252598
3
virtual: 2462546519962016
weight: 6
jumpSize: 1
minAnchorPrice: 7387639559886048
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 3002399751580330
maxTicks_: 3121657384082680
3
virtual: 9007199254740991
weight: 1
jumpSize: 87
minAnchorPrice: 8904844717755297
jumpLog: 0.01142869582362285
anchorLog: 2.2204460492503128e-16
51470270252598.62
virtual: 9007199254740991
weight: 1
jumpSize: 87
minAnchorPrice: 8904844717755297
jumpLog: 0.01142869582362285
anchorLog: 2.2204460492503128e-16
51470270252598.62
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 9775
virtual: 12609321543540
weight: 100
jumpSize: 1
minAnchorPrice: 630466077177000
jumpLog: 0.6931471805599453
anchorLog: 1.554312234475218e-15
445951054868954.56
maxTicks: 1
maxTicks_: 445951054868954
1
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos
traces.length: 20
Opening: 10
Closing: 6
Swapping: 4
--- DONE ---
Opening: 10
Closing: 6
Swapping: 4
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(42s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(2m59s)[0m

