[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0

trials left: 1 - iteration: 1 - block: 40

trials left: 1 - iteration: 2 - block: 1040

trials left: 1 - iteration: 3 - block: 1185

trials left: 1 - iteration: 4 - block: 2185

trials left: 1 - iteration: 5 - block: 3171

trials left: 1 - iteration: 6 - block: 4171

trials left: 1 - iteration: 7 - block: 5171

trials left: 1 - iteration: 8 - block: 6036

trials left: 1 - iteration: 9 - block: 6037

trials left: 1 - iteration: 10 - block: 6641

trials left: 1 - iteration: 11 - block: 6642

trials left: 1 - iteration: 12 - block: 6643

trials left: 1 - iteration: 13 - block: 6644

trials left: 1 - iteration: 14 - block: 7597

trials left: 1 - iteration: 15 - block: 8251

trials left: 1 - iteration: 16 - block: 8252

trials left: 1 - iteration: 17 - block: 8253

trials left: 1 - iteration: 18 - block: 8254

trials left: 1 - iteration: 19 - block: 9254
traces.length: 0
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
virtual: 9000
weight: 1
jumpSize: 24
minAnchorPrice: 8640
jumpLog: 0.0408219945202552
anchorLog: 0.00011573404329807224
352.7224432582765
maxTicks: 1
maxTicks_: 352
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1000

trials left: 1 - iteration: 2 - block: 1960
virtual: 652
weight: 2
jumpSize: 4
minAnchorPrice: 1043
jumpLog: 0.22314355131420976
anchorLog: 0.0009583134418115972
232.85027797625258
maxTicks: 9000
maxTicks_: 232
3
virtual: 5304
weight: 1
jumpSize: 31
minAnchorPrice: 5138
jumpLog: 0.03174869831458027
anchorLog: 0.0001946093224007242
163.14068577457894
maxTicks: 3000
maxTicks_: 163
3
virtual: 652
weight: 2
jumpSize: 4
minAnchorPrice: 1043
jumpLog: 0.22314355131420976
anchorLog: 0.0009583134418115972
232.85027797625258
virtual: 652
weight: 2
jumpSize: 4
minAnchorPrice: 1043
jumpLog: 0.22314355131420976
anchorLog: 0.0009583134418115972
232.85027797625258
virtual: 5304
weight: 1
jumpSize: 31
minAnchorPrice: 5138
jumpLog: 0.03174869831458027
anchorLog: 0.0001946093224007242
163.14068577457894
virtual: 5304
weight: 1
jumpSize: 31
minAnchorPrice: 5138
jumpLog: 0.03174869831458027
anchorLog: 0.0001946093224007242
163.14068577457894
virtual: 5304
weight: 1
jumpSize: 31
minAnchorPrice: 5138
jumpLog: 0.03174869831458027
anchorLog: 0.0001946093224007242
163.14068577457894
Opening pool with 6 dirac utxos and 1 param utxos

trials left: 1 - iteration: 3 - block: 1961

trials left: 1 - iteration: 4 - block: 2759
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 1
maxTicks_: 3119
1
virtual: 524
weight: 1
jumpSize: 17
minAnchorPrice: 494
jumpLog: 0.05715841383994862
anchorLog: 0.0020222453807678706
28.264826011492676
maxTicks: 1
maxTicks_: 28
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 5 - block: 3704

trials left: 1 - iteration: 6 - block: 3705
virtual: 9000
weight: 1
jumpSize: 36
minAnchorPrice: 8756
jumpLog: 0.027398974188114347
anchorLog: 0.0001142008794708242
239.91911721760584
maxTicks: 1
maxTicks_: 239
1
virtual: 8711
weight: 1
jumpSize: 1
minAnchorPrice: 4355
jumpLog: 0.6931471805599453
anchorLog: 0.00022959476624798155
3019.002531666111
maxTicks: 1
maxTicks_: 3019
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 7 - block: 4705
virtual: 1
weight: 96
jumpSize: 92
minAnchorPrice: 94
jumpLog: 0.010810916104215676
anchorLog: 0.010582109330537008
1.021622038341486
maxTicks: 8999
maxTicks_: 1
1
virtual: 6470
weight: 1
jumpSize: 32
minAnchorPrice: 6273
jumpLog: 0.030771658666753687
anchorLog: 0.00015940065388012043
193.04600023721332
maxTicks: 8999
maxTicks_: 193
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 5705

trials left: 1 - iteration: 9 - block: 5779
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 8675
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 8675
maxTicks_: 3119
3
virtual: 2152
weight: 1
jumpSize: 100
minAnchorPrice: 2130
jumpLog: 0.009950330853168092
anchorLog: 0.0004693733951464155
21.199179493469593
maxTicks: 8675
maxTicks_: 21
3
virtual: 2152
weight: 1
jumpSize: 100
minAnchorPrice: 2130
jumpLog: 0.009950330853168092
anchorLog: 0.0004693733951464155
21.199179493469593
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 10 - block: 6779
Swapping.boundary()
valueEquation: 
        addedBuyingA0  92403863 > 
        addedSellingA0 92160000
valueEquation: 
        addedBuyingA0  91965930 > 
        addedSellingA0 89856000
Swapping.boundary()
valueEquation: 
        addedBuyingA0  91965930 > 
        addedSellingA0 89856000
valueEquation: 
        addedBuyingA0  92403863 > 
        addedSellingA0 92160000
subSwap: 120 bought
valueEquation: 
        addedBuyingA0  52551960 > 
        addedSellingA0 50688000
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 7ec8dca0bf40ba6d9310a43895f13d9d6beef67c289324cba021facd, 
   +     +  virtual: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 2,
   +     +  +  _: 9000,
   +     +  +  4a07c25a8e995dba84f519c7c05670c2cada6336f6654c40beb25737_UoYxJUTAljFCRrGWV5kJIutdI: 2152
   +     +  ], 
   +     +  weights: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 100,
   +     +  +  _: 1,
   +     +  +  4a07c25a8e995dba84f519c7c05670c2cada6336f6654c40beb25737_UoYxJUTAljFCRrGWV5kJIutdI: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 100,
   +     +  +  _: 1,
   +     +  +  4a07c25a8e995dba84f519c7c05670c2cada6336f6654c40beb25737_UoYxJUTAljFCRrGWV5kJIutdI: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 7ec8dca0bf40ba6d9310a43895f13d9d6beef67c289324cba021facd,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: f252c90d25238a24bb0a5bae1d6449720b3a7ec6ec52fb5642ea3fb83bc39471),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 81ffceaa09aeb366924ea26a20db7902a7a3dbc13d9fc01bd0407fa2e3ea366a),
   +     +  anchorPrices: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 198,
   +     +  +  _: 4500,
   +     +  +  4a07c25a8e995dba84f519c7c05670c2cada6336f6654c40beb25737_UoYxJUTAljFCRrGWV5kJIutdI: 2140
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2810120,
   +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 4337
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a, 8ztNaj968UpsUTukvwK0dP5xlPoT6daJ)
  boughtAmount: 120
  soldAmount:   23
  boughtSpot:   2304000
  soldSpot:     437933
  (boughtA0:    52551960)
  (soldA0:      52992000)
  boughtExp:    9
  soldExp:      774
  spotPrice:    0.19007508680555554
  eff.Price:    0.19166666666666668
  maxBuying:    120
  (maxBuyingA0: 52551960)
)

trials left: 1 - iteration: 11 - block: 6780
Swapping.boundary()
valueEquation: 
        addedBuyingA0  92403863 > 
        addedSellingA0 92160000
valueEquation: 
        addedBuyingA0  91965930 > 
        addedSellingA0 89856000
Swapping.boundary()
valueEquation: 
        addedBuyingA0  39413970 > 
        addedSellingA0 39168000
valueEquation: 
        addedBuyingA0  38976037 > 
        addedSellingA0 36864000
subSwap: 4 bought
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 7ec8dca0bf40ba6d9310a43895f13d9d6beef67c289324cba021facd, 
   +     +  virtual: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 2,
   +     +  +  _: 9000,
   +     +  +  4a07c25a8e995dba84f519c7c05670c2cada6336f6654c40beb25737_UoYxJUTAljFCRrGWV5kJIutdI: 2152
   +     +  ], 
   +     +  weights: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 100,
   +     +  +  _: 1,
   +     +  +  4a07c25a8e995dba84f519c7c05670c2cada6336f6654c40beb25737_UoYxJUTAljFCRrGWV5kJIutdI: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 100,
   +     +  +  _: 1,
   +     +  +  4a07c25a8e995dba84f519c7c05670c2cada6336f6654c40beb25737_UoYxJUTAljFCRrGWV5kJIutdI: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 7ec8dca0bf40ba6d9310a43895f13d9d6beef67c289324cba021facd,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: f252c90d25238a24bb0a5bae1d6449720b3a7ec6ec52fb5642ea3fb83bc39471),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 81ffceaa09aeb366924ea26a20db7902a7a3dbc13d9fc01bd0407fa2e3ea366a),
   +     +  anchorPrices: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 198,
   +     +  +  _: 4500,
   +     +  +  4a07c25a8e995dba84f519c7c05670c2cada6336f6654c40beb25737_UoYxJUTAljFCRrGWV5kJIutdI: 2140
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2810120,
   +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 4360
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a, 8ztNaj968UpsUTukvwK0dP5xlPoT6daJ)
  boughtAmount: 4
  soldAmount:   1
  boughtSpot:   2304000
  soldSpot:     437933
  (boughtA0:    1751732)
  (soldA0:      2304000)
  boughtExp:    9
  soldExp:      774
  spotPrice:    0.19007508680555554
  eff.Price:    0.25
  maxBuying:    4
  (maxBuyingA0: 1751732)
)

trials left: 1 - iteration: 12 - block: 7762
virtual: 1
weight: 88
jumpSize: 87
minAnchorPrice: 87
jumpLog: 0.01142869582362285
anchorLog: 0.01142869582362285
1
maxTicks: 301
maxTicks_: 1
1
virtual: 8613
weight: 1
jumpSize: 100
minAnchorPrice: 8527
jumpLog: 0.009950330853168092
anchorLog: 0.00011726766357610302
84.85144625321746
maxTicks: 301
maxTicks_: 84
3
virtual: 8613
weight: 1
jumpSize: 100
minAnchorPrice: 8527
jumpLog: 0.009950330853168092
anchorLog: 0.00011726766357610302
84.85144625321746
virtual: 8613
weight: 1
jumpSize: 100
minAnchorPrice: 8527
jumpLog: 0.009950330853168092
anchorLog: 0.00011726766357610302
84.85144625321746
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 13 - block: 7763
virtual: 2205
weight: 2
jumpSize: 100
minAnchorPrice: 4366
jumpLog: 0.009950330853168092
anchorLog: 0.00022901637567181813
43.44811948044701
maxTicks: 1
maxTicks_: 43
1
virtual: 8930
weight: 1
jumpSize: 79
minAnchorPrice: 8818
jumpLog: 0.012578782206860185
anchorLog: 0.00011339797029790409
110.92599077227642
maxTicks: 1
maxTicks_: 110
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 14 - block: 8763

trials left: 1 - iteration: 15 - block: 9729
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 300
maxTicks_: 3119
3
virtual: 8294
weight: 1
jumpSize: 62
minAnchorPrice: 8162
jumpLog: 0.01600034134644112
anchorLog: 0.00012251148560493962
130.6027860770304
maxTicks: 300
maxTicks_: 130
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 16 - block: 10729

trials left: 1 - iteration: 17 - block: 10730
Swapping.boundary()
valueEquation: 
        addedBuyingA0  50661781 > 
        addedSellingA0 48131199
valueEquation: 
        addedBuyingA0  50666234 > 
        addedSellingA0 50664420
subSwap: 1 bought
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 7ec8dca0bf40ba6d9310a43895f13d9d6beef67c289324cba021facd, 
   +     +  virtual: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 2205,
   +     +  +  _: 8930
   +     +  ], 
   +     +  weights: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 2,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 100,
   +     +  +  _: 79
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 7ec8dca0bf40ba6d9310a43895f13d9d6beef67c289324cba021facd,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 267a34412c80a0cb5128b09ad8f650206a122421a708469292f5d6dd5889e25b),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 1280f27c09740d2b286ec8cce38369f030eef2e9f3f18caa99a8b3ab4e9f4624),
   +     +  anchorPrices: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 4366,
   +     +  +  _: 8818
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2538590,
   +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 1
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a, 8ztNaj968UpsUTukvwK0dP5xlPoT6daJ)
  boughtAmount: 1
  soldAmount:   1
  boughtSpot:   2533221
  soldSpot:     4453
  (boughtA0:    4453)
  (soldA0:      2533221)
  boughtExp:    450
  soldExp:      2
  spotPrice:    0.0017578411042700182
  eff.Price:    1
  maxBuying:    1
  (maxBuyingA0: 4453)
)

trials left: 1 - iteration: 18 - block: 11711

trials left: 1 - iteration: 19 - block: 12711
Swapping.boundary()
valueEquation: 
        addedBuyingA0  48128024 > 
        addedSellingA0 45597978
valueEquation: 
        addedBuyingA0  48132477 > 
        addedSellingA0 48131199
subSwap: 1 bought
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 7ec8dca0bf40ba6d9310a43895f13d9d6beef67c289324cba021facd, 
   +     +  virtual: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 2205,
   +     +  +  _: 8930
   +     +  ], 
   +     +  weights: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 2,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 100,
   +     +  +  _: 79
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 7ec8dca0bf40ba6d9310a43895f13d9d6beef67c289324cba021facd,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 267a34412c80a0cb5128b09ad8f650206a122421a708469292f5d6dd5889e25b),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 1280f27c09740d2b286ec8cce38369f030eef2e9f3f18caa99a8b3ab4e9f4624),
   +     +  anchorPrices: +[
   +     +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 4366,
   +     +  +  _: 8818
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2538590,
   +  +  4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a_8ztNaj968UpsUTukvwK0dP5xlPoT6daJ: 2
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(4273dd3cf90da20ec1ebb5d25b5df9371add80c2a3a1cf871f44ad7a, 8ztNaj968UpsUTukvwK0dP5xlPoT6daJ)
  boughtAmount: 1
  soldAmount:   1
  boughtSpot:   2533221
  soldSpot:     4453
  (boughtA0:    4453)
  (soldA0:      2533221)
  boughtExp:    450
  soldExp:      2
  spotPrice:    0.0017578411042700182
  eff.Price:    1
  maxBuying:    1
  (maxBuyingA0: 4453)
)
traces.length: 20
Opening: 9
Closing: 7
Swapping: 4
--- DONE ---
Opening: 9
Closing: 7
Swapping: 4
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(4s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(33s)[0m

