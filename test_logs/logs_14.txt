[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 6

trials left: 1 - iteration: 0 - block: 0
virtual: 1
weight: 97
jumpSize: 70
minAnchorPrice: 95
jumpLog: 0.014184634991956381
anchorLog: 0.010471299867295437
1.3546202641239073
maxTicks: 1
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1000

trials left: 1 - iteration: 2 - block: 1001

trials left: 1 - iteration: 3 - block: 1002
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
virtual: 9000
weight: 1
jumpSize: 21
minAnchorPrice: 8590
jumpLog: 0.04652001563489291
anchorLog: 0.0001164076597554767
399.63019386019613
maxTicks: 1
maxTicks_: 399
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 4 - block: 1003

trials left: 1 - iteration: 5 - block: 1004

trials left: 1 - iteration: 6 - block: 2004

trials left: 1 - iteration: 7 - block: 3004

trials left: 1 - iteration: 8 - block: 3776

trials left: 1 - iteration: 9 - block: 3777

trials left: 1 - iteration: 10 - block: 3778
virtual: 1594
weight: 3
jumpSize: 100
minAnchorPrice: 4734
jumpLog: 0.009950330853168092
anchorLog: 0.00021121554624945724
47.10984124916734
maxTicks: 7492
maxTicks_: 47
3
virtual: 1
weight: 85
jumpSize: 58
minAnchorPrice: 83
jumpLog: 0.01709443335930004
anchorLog: 0.01197619104671562
1.427368125025699
maxTicks: 2497
maxTicks_: 1
1
virtual: 1594
weight: 3
jumpSize: 100
minAnchorPrice: 4734
jumpLog: 0.009950330853168092
anchorLog: 0.00021121554624945724
47.10984124916734
virtual: 1594
weight: 3
jumpSize: 100
minAnchorPrice: 4734
jumpLog: 0.009950330853168092
anchorLog: 0.00021121554624945724
47.10984124916734
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 11 - block: 4128
virtual: 1171
weight: 1
jumpSize: 8
minAnchorPrice: 1040
jumpLog: 0.11778303565638346
anchorLog: 0.000961076479550532
122.5532391672588
maxTicks: 1
maxTicks_: 122
1
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 1
maxTicks_: 3119
1
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 12 - block: 5128

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        buyingAsset: Asset(51591dc1e424435f241c1aadd80c52d85ac5da506254b0aaa9708376, VfOrCWglNTfHG0dxbt3hZ3RnU4PEI)
        sellingAsset: Asset(357f8ef51adfd3a65d751d6a4a82dedbca78d8b3f6065b5d037cf26f, )
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        
not looping

          ---------------------------
          maxBuying:     1
          maxSelling:    144
          maxBuyingA0:   1316
          maxSellingA0:  1296000
          maxSwapA0:     1316
          spotBuying:    9000
          spotSelling:   1316
          buyingAmount:  1
          sellingAmount: 1
          ---------------------------
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  1172 > 
        spotSelling 1170

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        buyingAsset: Asset(, )
        sellingAsset: Asset(357f8ef51adfd3a65d751d6a4a82dedbca78d8b3f6065b5d037cf26f, )
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        
not looping

          ---------------------------
          maxBuying:     13396
          maxSelling:    144
          maxBuyingA0:   17629136
          maxSellingA0:  40210787088
          maxSwapA0:     17629136
          spotBuying:    279241577
          spotSelling:   1316
          buyingAmount:  13396
          sellingAmount: 1
          ---------------------------
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  1172 > 
        spotSelling 1170

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        buyingAsset: Asset(357f8ef51adfd3a65d751d6a4a82dedbca78d8b3f6065b5d037cf26f, )
        sellingAsset: Asset(51591dc1e424435f241c1aadd80c52d85ac5da506254b0aaa9708376, VfOrCWglNTfHG0dxbt3hZ3RnU4PEI)
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        
not looping

          ---------------------------
          maxBuying:     1
          maxSelling:    8999
          maxBuyingA0:   18000
          maxSellingA0:  10528830
          maxSwapA0:     18000
          spotBuying:    1170
          spotSelling:   18000
          buyingAmount:  1
          sellingAmount: 16
          ---------------------------
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9001 > 
        spotSelling 9000

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        buyingAsset: Asset(, )
        sellingAsset: Asset(51591dc1e424435f241c1aadd80c52d85ac5da506254b0aaa9708376, VfOrCWglNTfHG0dxbt3hZ3RnU4PEI)
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        
not looping

          ---------------------------
          maxBuying:     13396
          maxSelling:    8999
          maxBuyingA0:   241128000
          maxSellingA0:  2512894951423
          maxSwapA0:     241128000
          spotBuying:    279241577
          spotSelling:   18000
          buyingAmount:  13396
          sellingAmount: 1
          ---------------------------
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9001 > 
        spotSelling 9000

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        buyingAsset: Asset(357f8ef51adfd3a65d751d6a4a82dedbca78d8b3f6065b5d037cf26f, )
        sellingAsset: Asset(51591dc1e424435f241c1aadd80c52d85ac5da506254b0aaa9708376, VfOrCWglNTfHG0dxbt3hZ3RnU4PEI)
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        
not looping

          ---------------------------
          maxBuying:     1
          maxSelling:    16
          maxBuyingA0:   18000
          maxSellingA0:  18720
          maxSwapA0:     18000
          spotBuying:    1170
          spotSelling:   18000
          buyingAmount:  1
          sellingAmount: 16
          ---------------------------
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9001 > 
        spotSelling 9000
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 1267fd20d059eb3a069d69fca185a06f87406e8e074a855b517d3a0b, 
   +     +  virtual: +[
   +     +  +  357f8ef51adfd3a65d751d6a4a82dedbca78d8b3f6065b5d037cf26f_: 1171,
   +     +  +  51591dc1e424435f241c1aadd80c52d85ac5da506254b0aaa9708376_VfOrCWglNTfHG0dxbt3hZ3RnU4PEI: 9000,
   +     +  +  _: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  357f8ef51adfd3a65d751d6a4a82dedbca78d8b3f6065b5d037cf26f_: 1,
   +     +  +  51591dc1e424435f241c1aadd80c52d85ac5da506254b0aaa9708376_VfOrCWglNTfHG0dxbt3hZ3RnU4PEI: 1,
   +     +  +  _: 100
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  357f8ef51adfd3a65d751d6a4a82dedbca78d8b3f6065b5d037cf26f_: 8,
   +     +  +  51591dc1e424435f241c1aadd80c52d85ac5da506254b0aaa9708376_VfOrCWglNTfHG0dxbt3hZ3RnU4PEI: 1,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 1267fd20d059eb3a069d69fca185a06f87406e8e074a855b517d3a0b,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 6cc7f1cc001b4448d9c4240fde5c11f581d5576b332185720f559e3740d7dcea),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: d56dd8fc73acfcdf50f774d7b93dd4a8d512a8869aac2935311a26de71fb7ab6),
   +     +  anchorPrices: +[
   +     +  +  357f8ef51adfd3a65d751d6a4a82dedbca78d8b3f6065b5d037cf26f_: 1040,
   +     +  +  51591dc1e424435f241c1aadd80c52d85ac5da506254b0aaa9708376_VfOrCWglNTfHG0dxbt3hZ3RnU4PEI: 4500,
   +     +  +  _: 198
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2805810,
   +  +  357f8ef51adfd3a65d751d6a4a82dedbca78d8b3f6065b5d037cf26f_: 1,
   +  +  51591dc1e424435f241c1aadd80c52d85ac5da506254b0aaa9708376_VfOrCWglNTfHG0dxbt3hZ3RnU4PEI: 1
   +  ]
     )
  boughtAsset:  Asset(357f8ef51adfd3a65d751d6a4a82dedbca78d8b3f6065b5d037cf26f, )
  soldAsset:    Asset(51591dc1e424435f241c1aadd80c52d85ac5da506254b0aaa9708376, VfOrCWglNTfHG0dxbt3hZ3RnU4PEI)
  boughtAmount: 1
  soldAmount:   16
  boughtSpot:   1170
  soldSpot:     18000
  (boughtA0:    18000)
  (soldA0:      18720)
  boughtExp:    1
  soldExp:      2
  spotPrice:    15.384615384615385
  eff.Price:    16
  maxBuying:    1
  (maxBuyingA0: 18000)
)

trials left: 1 - iteration: 13 - block: 5378
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 9000
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 9000
maxTicks_: 3119
3
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 14 - block: 6378
virtual: 3239
weight: 1
jumpSize: 1
minAnchorPrice: 1619
jumpLog: 0.6931471805599453
anchorLog: 0.0006174745487945271
1122.551823250288
maxTicks: 3370
maxTicks_: 1122
3
virtual: 1
weight: 9
jumpSize: 1
minAnchorPrice: 4
jumpLog: 0.6931471805599453
anchorLog: 0.22314355131420976
3.10628371950539
maxTicks: 1123
maxTicks_: 3
3
virtual: 3239
weight: 1
jumpSize: 1
minAnchorPrice: 1619
jumpLog: 0.6931471805599453
anchorLog: 0.0006174745487945271
1122.551823250288
virtual: 3239
weight: 1
jumpSize: 1
minAnchorPrice: 1619
jumpLog: 0.6931471805599453
anchorLog: 0.0006174745487945271
1122.551823250288
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 15 - block: 6379
virtual: 1
weight: 100
jumpSize: 54
minAnchorPrice: 98
jumpLog: 0.018349138668196617
anchorLog: 0.010152371464017908
1.807374634904735
maxTicks: 1
maxTicks_: 1
1
virtual: 2381
weight: 3
jumpSize: 42
minAnchorPrice: 6976
jumpLog: 0.023530497410194036
anchorLog: 0.00014333835042091965
164.16051490125042
maxTicks: 1
maxTicks_: 164
1
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 16 - block: 6380

trials left: 1 - iteration: 17 - block: 6381

trials left: 1 - iteration: 18 - block: 6382

trials left: 1 - iteration: 19 - block: 6383

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        buyingAsset: Asset(2f50676bc7532f34a9323af6f13bf5d58e812afbd38bce84acc64f83, weLFgAUktjEji0RdMFVINmrPzoxALFhi)
        sellingAsset: Asset(841012922104a06aa035b7f6a7c09a5cfee13825a82cddb8a979875a, )
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        
looping

              maxBuying:     1
              maxSelling:    55
              maxBuyingA0:   7312
              maxSellingA0:  5445
              maxSwapA0:     5445
              spotBuying:    99
              spotSelling:   7312
              buyingAmount:  0
              sellingAmount: 0
              limitReached: false
            

          ---------------------------
          maxBuying:     1
          maxSelling:    113
          maxBuyingA0:   7486
          maxSellingA0:  11187
          maxSwapA0:     7486
          spotBuying:    99
          spotSelling:   7486
          buyingAmount:  1
          sellingAmount: 76
          ---------------------------
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  7374 > 
        spotSelling 7312

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        buyingAsset: Asset(874f02bdd0aae0d49213634f2503ee3d3eadc81fdf22bbb35404306f, ZbijDDo21DYEcdEuPuCn0rlCcg5kDN7T)
        sellingAsset: Asset(841012922104a06aa035b7f6a7c09a5cfee13825a82cddb8a979875a, )
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        
not looping

          ---------------------------
          maxBuying:     1
          maxSelling:    55
          maxBuyingA0:   7312
          maxSellingA0:  494945
          maxSwapA0:     7312
          spotBuying:    8999
          spotSelling:   7312
          buyingAmount:  1
          sellingAmount: 1
          ---------------------------
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  7146 > 
        spotSelling 7142

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        buyingAsset: Asset(2f50676bc7532f34a9323af6f13bf5d58e812afbd38bce84acc64f83, weLFgAUktjEji0RdMFVINmrPzoxALFhi)
        sellingAsset: Asset(841012922104a06aa035b7f6a7c09a5cfee13825a82cddb8a979875a, )
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        
looping

              maxBuying:     1
              maxSelling:    55
              maxBuyingA0:   7312
              maxSellingA0:  5445
              maxSwapA0:     5445
              spotBuying:    99
              spotSelling:   7312
              buyingAmount:  0
              sellingAmount: 0
              limitReached: false
            

          ---------------------------
          maxBuying:     1
          maxSelling:    76
          maxBuyingA0:   7486
          maxSellingA0:  7524
          maxSwapA0:     7486
          spotBuying:    99
          spotSelling:   7486
          buyingAmount:  1
          sellingAmount: 76
          ---------------------------
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  7374 > 
        spotSelling 7312
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 598253c577dfd3cc40de93911cef684771fc9e0b67462ec5c6d8fe1f, 
   +     +  virtual: +[
   +     +  +  2f50676bc7532f34a9323af6f13bf5d58e812afbd38bce84acc64f83_weLFgAUktjEji0RdMFVINmrPzoxALFhi: 1,
   +     +  +  841012922104a06aa035b7f6a7c09a5cfee13825a82cddb8a979875a_: 2381,
   +     +  +  874f02bdd0aae0d49213634f2503ee3d3eadc81fdf22bbb35404306f_ZbijDDo21DYEcdEuPuCn0rlCcg5kDN7T: 9000
   +     +  ], 
   +     +  weights: +[
   +     +  +  2f50676bc7532f34a9323af6f13bf5d58e812afbd38bce84acc64f83_weLFgAUktjEji0RdMFVINmrPzoxALFhi: 100,
   +     +  +  841012922104a06aa035b7f6a7c09a5cfee13825a82cddb8a979875a_: 3,
   +     +  +  874f02bdd0aae0d49213634f2503ee3d3eadc81fdf22bbb35404306f_ZbijDDo21DYEcdEuPuCn0rlCcg5kDN7T: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  2f50676bc7532f34a9323af6f13bf5d58e812afbd38bce84acc64f83_weLFgAUktjEji0RdMFVINmrPzoxALFhi: 54,
   +     +  +  841012922104a06aa035b7f6a7c09a5cfee13825a82cddb8a979875a_: 42,
   +     +  +  874f02bdd0aae0d49213634f2503ee3d3eadc81fdf22bbb35404306f_ZbijDDo21DYEcdEuPuCn0rlCcg5kDN7T: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 598253c577dfd3cc40de93911cef684771fc9e0b67462ec5c6d8fe1f,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 849d1ba0468d37f0b0f3c64790a125dedd5bd2d6a30dbfd6d095d5eed9a60c6e),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: ba3db036b2465e5e7e37eaecc61bec8717e49d37209e274b97889698b35d1f0a),
   +     +  anchorPrices: +[
   +     +  +  2f50676bc7532f34a9323af6f13bf5d58e812afbd38bce84acc64f83_weLFgAUktjEji0RdMFVINmrPzoxALFhi: 98,
   +     +  +  841012922104a06aa035b7f6a7c09a5cfee13825a82cddb8a979875a_: 6976,
   +     +  +  874f02bdd0aae0d49213634f2503ee3d3eadc81fdf22bbb35404306f_ZbijDDo21DYEcdEuPuCn0rlCcg5kDN7T: 8910
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3383350,
   +  +  2f50676bc7532f34a9323af6f13bf5d58e812afbd38bce84acc64f83_weLFgAUktjEji0RdMFVINmrPzoxALFhi: 1,
   +  +  841012922104a06aa035b7f6a7c09a5cfee13825a82cddb8a979875a_: 1,
   +  +  874f02bdd0aae0d49213634f2503ee3d3eadc81fdf22bbb35404306f_ZbijDDo21DYEcdEuPuCn0rlCcg5kDN7T: 1
   +  ]
     )
  boughtAsset:  Asset(2f50676bc7532f34a9323af6f13bf5d58e812afbd38bce84acc64f83, weLFgAUktjEji0RdMFVINmrPzoxALFhi)
  soldAsset:    Asset(841012922104a06aa035b7f6a7c09a5cfee13825a82cddb8a979875a, )
  boughtAmount: 1
  soldAmount:   76
  boughtSpot:   99
  soldSpot:     7486
  (boughtA0:    7486)
  (soldA0:      7524)
  boughtExp:    1
  soldExp:      3
  spotPrice:    75.61616161616162
  eff.Price:    76
  maxBuying:    1
  (maxBuyingA0: 7486)
)
traces.length: 13
Opening: 7
Closing: 4
Swapping: 2
--- DONE ---
Opening: 7
Closing: 4
Swapping: 2
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(4s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(34s)[0m

