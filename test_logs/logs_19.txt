[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
virtual: 9000
weight: 1
jumpSize: 87
minAnchorPrice: 8897
jumpLog: 0.01142869582362285
anchorLog: 0.00011239112121979753
101.68682098359298
maxTicks: 1
maxTicks_: 101
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1000

trials left: 1 - iteration: 2 - block: 2000
virtual: 2902
weight: 6
jumpSize: 1
minAnchorPrice: 8706
jumpLog: 0.6931471805599453
anchorLog: 0.00011485671637278756
6034.885920908751
maxTicks: 1
maxTicks_: 6034
1
virtual: 2
weight: 52
jumpSize: 100
minAnchorPrice: 102
jumpLog: 0.009950330853168092
anchorLog: 0.009756174945364656
1.0199008226985191
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 3 - block: 2486

trials left: 1 - iteration: 4 - block: 2487
virtual: 2546
weight: 7
jumpSize: 1
minAnchorPrice: 8911
jumpLog: 0.6931471805599453
anchorLog: 0.0001122145543455019
6176.981093074492
maxTicks: 1
maxTicks_: 6176
1
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 1
maxTicks_: 3119
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 5 - block: 3487
virtual: 340
weight: 52
jumpSize: 1
minAnchorPrice: 8840
jumpLog: 0.6931471805599453
anchorLog: 0.00011311577411529453
6127.7676432063945
maxTicks: 1
maxTicks_: 6127
1
virtual: 1978
weight: 2
jumpSize: 86
minAnchorPrice: 3910
jumpLog: 0.011560822401076006
anchorLog: 0.00025572177610270206
45.20859575303822
maxTicks: 1
maxTicks_: 45
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 3995

          maxBuying: 1
          maxSelling: 553
          maxBuyingA0: 18000
          maxSellingA0: 9855566
          maxSwapA0: 18000
          spotBuying: 17822
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 2
        
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  17829 > 
        spotBuying 35644
boughtAssetForSale (old):
        sellingAmm  16059 > 
        spotSelling 9000

          maxBuying: 5037
          maxSelling: 339
          maxBuyingA0: 178108320
          maxSellingA0: 1567136658
          maxSwapA0: 178108320
          spotBuying: 4622822
          spotSelling: 35360
          buyingAmount: 5037
          sellingAmount: 39
        
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  4632896 > 
        spotBuying 4676576
boughtAssetForSale (old):
        sellingAmm  17732 > 
        spotSelling 17680
subSwap: 3316 bought
boughtAssetForSale (old): 
        buyingAmm  4632896 > 
        spotBuying 4676576
boughtAssetForSale (old):
        sellingAmm  17732 > 
        spotSelling 17680
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 7914d9c7ce36a0fdcf0ab0700184a725709a872fbc8550e97ad8f03d, 
   +     +  virtual: +[
   +     +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 340,
   +     +  +  _: 1978
   +     +  ], 
   +     +  weights: +[
   +     +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 52,
   +     +  +  _: 2
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 1,
   +     +  +  _: 86
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 7914d9c7ce36a0fdcf0ab0700184a725709a872fbc8550e97ad8f03d,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 6438838e9ebc8bf83d780ab8d390f5847a2e08a8909281084a1df5d6793eaf37),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 08acd2865020cc1e33c3758b355915b21856e506b3cc4a0e52c28dcbac87edaf),
   +     +  anchorPrices: +[
   +     +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 8840,
   +     +  +  _: 3910
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2314470,
   +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 1
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b, y1PcrIl)
  boughtAmount: 3316
  soldAmount:   26
  boughtSpot:   4622822
  soldSpot:     35360
  (boughtA0:    117253760)
  (soldA0:      120193372)
  boughtExp:    612
  soldExp:      2
  spotPrice:    0.0076490074677329125
  eff.Price:    0.007840772014475271
  maxBuying:    3316
  (maxBuyingA0: 117253760)
)

trials left: 1 - iteration: 7 - block: 3996
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 1
maxTicks_: 3119
1
virtual: 2
weight: 73
jumpSize: 100
minAnchorPrice: 144
jumpLog: 0.009950330853168092
anchorLog: 0.006920442844573757
1.4378170698960453
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 3997

trials left: 1 - iteration: 9 - block: 4997

          maxBuying: 1
          maxSelling: 527
          maxBuyingA0: 18000
          maxSellingA0: 9392194
          maxSwapA0: 18000
          spotBuying: 17822
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 2
        
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  17829 > 
        spotBuying 35644
boughtAssetForSale (old):
        sellingAmm  16059 > 
        spotSelling 9000

          maxBuying: 9347
          maxSelling: 313
          maxBuyingA0: 330509920
          maxSellingA0: 1446943286
          maxSwapA0: 330509920
          spotBuying: 4622822
          spotSelling: 35360
          buyingAmount: 9347
          sellingAmount: 72
        
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  4641516 > 
        spotBuying 4676576
boughtAssetForSale (old):
        sellingAmm  19084 > 
        spotSelling 17680
subSwap: 18 sold
boughtAssetForSale (old): 
        buyingAmm  4641516 > 
        spotBuying 4676576
boughtAssetForSale (old):
        sellingAmm  19084 > 
        spotSelling 17680
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 7914d9c7ce36a0fdcf0ab0700184a725709a872fbc8550e97ad8f03d, 
   +     +  virtual: +[
   +     +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 340,
   +     +  +  _: 1978
   +     +  ], 
   +     +  weights: +[
   +     +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 52,
   +     +  +  _: 2
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 1,
   +     +  +  _: 86
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 7914d9c7ce36a0fdcf0ab0700184a725709a872fbc8550e97ad8f03d,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 6438838e9ebc8bf83d780ab8d390f5847a2e08a8909281084a1df5d6793eaf37),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 08acd2865020cc1e33c3758b355915b21856e506b3cc4a0e52c28dcbac87edaf),
   +     +  anchorPrices: +[
   +     +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 8840,
   +     +  +  _: 3910
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2318780,
   +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 27
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b, y1PcrIl)
  boughtAmount: 2353
  soldAmount:   18
  boughtSpot:   4622822
  soldSpot:     35360
  (boughtA0:    83202080)
  (soldA0:      83210796)
  boughtExp:    612
  soldExp:      2
  spotPrice:    0.0076490074677329125
  eff.Price:    0.00764980875478113
  maxBuying:    2318780
  (maxBuyingA0: 81992060800)
)

trials left: 1 - iteration: 10 - block: 5141

          maxBuying: 1
          maxSelling: 509
          maxBuyingA0: 18000
          maxSellingA0: 9071398
          maxSwapA0: 18000
          spotBuying: 17822
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 2
        
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  17829 > 
        spotBuying 35644
boughtAssetForSale (old):
        sellingAmm  16059 > 
        spotSelling 9000

          maxBuying: 9347
          maxSelling: 295
          maxBuyingA0: 330509920
          maxSellingA0: 1363732490
          maxSwapA0: 330509920
          spotBuying: 4622822
          spotSelling: 35360
          buyingAmount: 9347
          sellingAmount: 72
        
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  4641516 > 
        spotBuying 4676576
boughtAssetForSale (old):
        sellingAmm  20020 > 
        spotSelling 17680
subSwap: 31 sold
boughtAssetForSale (old): 
        buyingAmm  4641516 > 
        spotBuying 4676576
boughtAssetForSale (old):
        sellingAmm  20020 > 
        spotSelling 17680
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 7914d9c7ce36a0fdcf0ab0700184a725709a872fbc8550e97ad8f03d, 
   +     +  virtual: +[
   +     +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 340,
   +     +  +  _: 1978
   +     +  ], 
   +     +  weights: +[
   +     +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 52,
   +     +  +  _: 2
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 1,
   +     +  +  _: 86
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 7914d9c7ce36a0fdcf0ab0700184a725709a872fbc8550e97ad8f03d,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 6438838e9ebc8bf83d780ab8d390f5847a2e08a8909281084a1df5d6793eaf37),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 08acd2865020cc1e33c3758b355915b21856e506b3cc4a0e52c28dcbac87edaf),
   +     +  anchorPrices: +[
   +     +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 8840,
   +     +  +  _: 3910
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2318780,
   +  +  e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b_y1PcrIl: 45
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(e3a89bbe1c83db3200459308858f257855e7cd29ad7cb38c36ab124b, y1PcrIl)
  boughtAmount: 4052
  soldAmount:   31
  boughtSpot:   4622822
  soldSpot:     35360
  (boughtA0:    143278720)
  (soldA0:      143307482)
  boughtExp:    612
  soldExp:      2
  spotPrice:    0.0076490074677329125
  eff.Price:    0.007650542941757157
  maxBuying:    2318780
  (maxBuyingA0: 81992060800)
)

trials left: 1 - iteration: 11 - block: 6141

trials left: 1 - iteration: 12 - block: 6142

trials left: 1 - iteration: 13 - block: 7142
virtual: 873
weight: 20
jumpSize: 1
minAnchorPrice: 8730
jumpLog: 0.6931471805599453
anchorLog: 0.00011454097715976169
6051.521453262478
maxTicks: 1
maxTicks_: 6051
1
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 14 - block: 7980

trials left: 1 - iteration: 15 - block: 7981
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 1
maxTicks_: 1
1
virtual: 1
weight: 56
jumpSize: 25
minAnchorPrice: 53
jumpLog: 0.03922071315328133
anchorLog: 0.018692133012152546
2.0982470608240527
maxTicks: 1
maxTicks_: 2
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 16 - block: 8284
virtual: 1
weight: 15
jumpSize: 7
minAnchorPrice: 13
jumpLog: 0.13353139262452257
anchorLog: 0.07410797215372183
1.8018492308430596
maxTicks: 6208
maxTicks_: 1
1
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 6208
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 17 - block: 8285
virtual: 9000
weight: 1
jumpSize: 68
minAnchorPrice: 8869
jumpLog: 0.014598799421152631
anchorLog: 0.0001127459271729009
129.4840513286544
maxTicks: 1
maxTicks_: 129
1
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 18 - block: 9102
virtual: 2888
weight: 1
jumpSize: 1
minAnchorPrice: 1444
jumpLog: 0.6931471805599453
anchorLog: 0.0006922810937609341
1001.2510623312071
maxTicks: 141
maxTicks_: 1001
3
virtual: 2136
weight: 1
jumpSize: 1
minAnchorPrice: 1068
jumpLog: 0.6931471805599453
anchorLog: 0.0009358915049050237
740.6277083691313
maxTicks: 141
maxTicks_: 740
3
virtual: 2136
weight: 1
jumpSize: 1
minAnchorPrice: 1068
jumpLog: 0.6931471805599453
anchorLog: 0.0009358915049050237
740.6277083691313
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 10102
traces.length: 20
Opening: 10
Closing: 7
Swapping: 3
--- DONE ---
Opening: 10
Closing: 7
Swapping: 3
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(4s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(32s)[0m

