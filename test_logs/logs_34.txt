[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 687113482131894
weight: 1
jumpSize: 75
minAnchorPrice: 678072515261737
jumpLog: 0.013245226750020723
anchorLog: 1.554312234475218e-15
8521599750833.015
maxTicks: 362954065667222
maxTicks_: 8521599750833
3
virtual: 1
weight: 13
jumpSize: 12
minAnchorPrice: 12
jumpLog: 0.08004270767353636
anchorLog: 0.08004270767353636
1
maxTicks: 181477032833611
maxTicks_: 1
1
virtual: 687113482131894
weight: 1
jumpSize: 75
minAnchorPrice: 678072515261737
jumpLog: 0.013245226750020723
anchorLog: 1.554312234475218e-15
8521599750833.015
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1000
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  29976063 > 
        spotBuying 32372102
boughtAssetForSale (old):
        sellingAmm  868590514965505 > 
        spotSelling 860633131999646
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  29976063 > 
        spotBuying 32372102
boughtAssetForSale (old):
        sellingAmm  868590514965505 > 
        spotSelling 866351687480779
subSwap: 1 sold
subSwap: 12536931831 sold
boughtAssetForSale (old): 
        buyingAmm  29976063 > 
        spotBuying 32372102
boughtAssetForSale (old):
        sellingAmm  868590514965505 > 
        spotSelling 866351687480779
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: f8f5fd07dced2b6c68beb5cf7299271a1cab628214d30f536cb6dbb3, 
   +     +  virtual: +[
   +     +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 687113482131894,
   +     +  +  _: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 1,
   +     +  +  _: 13
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 75,
   +     +  +  _: 12
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: f8f5fd07dced2b6c68beb5cf7299271a1cab628214d30f536cb6dbb3,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: a8d7f9f3bfc20eb23727ab92d30753e142db7e575468fbf1ed46b2d947f8c4fd),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 55b8960e7858c3ffffd78ce241b7523afbe4a1011be7736ddec0688d4c204105),
   +     +  anchorPrices: +[
   +     +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 682578030044495,
   +     +  +  _: 12
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2305850,
   +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 181477032833611
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a, )
  boughtAmount: 426
  soldAmount: 12515475785
  boughtSpot: 29881940
  soldSpot: 877903043313856
  boughtExp: 184
  soldExp: 19
  spotPrice: 29379051.136367183
  effectivePrice: 29379051.138497654
)

trials left: 1 - iteration: 2 - block: 1456

trials left: 1 - iteration: 3 - block: 1457
virtual: 6958703473753771
weight: 1
jumpSize: 22
minAnchorPrice: 6656151148807954
jumpLog: 0.044451762570833796
anchorLog: 2.2204460492503128e-16
200192941349968.88
maxTicks: 1
maxTicks_: 200192941349968
1
virtual: 6126310788882968
weight: 1
jumpSize: 100
minAnchorPrice: 6065654246418780
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 4 - block: 2457

trials left: 1 - iteration: 5 - block: 3198
virtual: 1
weight: 67
jumpSize: 66
minAnchorPrice: 66
jumpLog: 0.015037877364540502
anchorLog: 0.015037877364540502
1
maxTicks: 1
maxTicks_: 1
1
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 4198

trials left: 1 - iteration: 7 - block: 4481
virtual: 1
weight: 89
jumpSize: 88
minAnchorPrice: 88
jumpLog: 0.011299555253933466
anchorLog: 0.011299555253933466
1
maxTicks: 1
maxTicks_: 1
1
virtual: 6643523320540384
weight: 1
jumpSize: 100
minAnchorPrice: 6577745861921172
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 7838267322142941
weight: 1
jumpSize: 11
minAnchorPrice: 7185078378631029
jumpLog: 0.08701137698962969
anchorLog: 2.2204460492503128e-16
391864404987490.06
maxTicks: 1
maxTicks_: 391864404987490
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 4482
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 9 - block: 4743
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 2564194564887676
maxTicks_: 44812306322540
3
virtual: 1
weight: 94
jumpSize: 68
minAnchorPrice: 92
jumpLog: 0.014598799421152631
anchorLog: 0.010810916104215676
1.3503757942825847
maxTicks: 2564194564887676
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 10 - block: 5743

trials left: 1 - iteration: 11 - block: 6743
virtual: 1
weight: 54
jumpSize: 7
minAnchorPrice: 47
jumpLog: 0.13353139262452257
anchorLog: 0.021053409197832263
6.342506877141373
maxTicks: 1
maxTicks_: 6
1
virtual: 1501269428714564
weight: 5
jumpSize: 62
minAnchorPrice: 7387198776214521
jumpLog: 0.01600034134644112
anchorLog: 2.2204460492503128e-16
72059131325632.98
maxTicks: 1
maxTicks_: 72059131325632
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 12 - block: 7140

trials left: 1 - iteration: 13 - block: 7141
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  241034289099441638 > 
        spotBuying 241602152259945052
boughtAssetForSale (old):
        sellingAmm  14067124221748577 > 
        spotSelling 13955012075511302
subSwap: 1 bought
boughtAssetForSale (old): 
        buyingAmm  241034289099441638 > 
        spotBuying 241602152259945052
boughtAssetForSale (old):
        sellingAmm  14067124221748577 > 
        spotSelling 13955012075511302
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: f8f5fd07dced2b6c68beb5cf7299271a1cab628214d30f536cb6dbb3, 
   +     +  virtual: +[
   +     +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 9007199254740991,
   +     +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 1,
   +     +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 94
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 100,
   +     +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 68
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: f8f5fd07dced2b6c68beb5cf7299271a1cab628214d30f536cb6dbb3,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 863f1d52e9f5ebb6f29dd78fea43e5401f11d34c63ac96259ba40f4c9d4251f5),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 0d88adbead0b88529654bb33193c696c24e3697975ffdfcb5d0bb6422aa1d510),
   +     +  anchorPrices: +[
   +     +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 8918019064099991,
   +     +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 92
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2900630,
   +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 2564194564887676,
   +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 5059924967007586
   +  ]
     )
  boughtAsset: Asset(175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293, JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW)
  soldAsset: Asset(2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a, )
  boughtAmount: 1
  soldAmount: 1
  boughtSpot: 238100671792409616
  soldSpot: 14094562196266415
  boughtExp: 2431
  soldExp: 46
  spotPrice: 0.05919581028546991
  effectivePrice: 1
)

trials left: 1 - iteration: 14 - block: 7842
virtual: 1677840639233784
weight: 10
jumpSize: 1
minAnchorPrice: 8389203196168920
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 1
weight: 100
jumpSize: 33
minAnchorPrice: 97
jumpLog: 0.02985296314968113
anchorLog: 0.010256500167189061
2.910638391561861
maxTicks: 1
maxTicks_: 2
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 15 - block: 8091

trials left: 1 - iteration: 16 - block: 9091

trials left: 1 - iteration: 17 - block: 9661
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  241034289099441544 > 
        spotBuying 241602152259945052
boughtAssetForSale (old):
        sellingAmm  14067124221748578 > 
        spotSelling 13955012075511302
subSwap: 1 sold
boughtAssetForSale (old): 
        buyingAmm  241034289099441544 > 
        spotBuying 241602152259945052
boughtAssetForSale (old):
        sellingAmm  14067124221748578 > 
        spotSelling 13955012075511302
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: f8f5fd07dced2b6c68beb5cf7299271a1cab628214d30f536cb6dbb3, 
   +     +  virtual: +[
   +     +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 9007199254740991,
   +     +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 1,
   +     +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 94
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 100,
   +     +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 68
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: f8f5fd07dced2b6c68beb5cf7299271a1cab628214d30f536cb6dbb3,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 863f1d52e9f5ebb6f29dd78fea43e5401f11d34c63ac96259ba40f4c9d4251f5),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 0d88adbead0b88529654bb33193c696c24e3697975ffdfcb5d0bb6422aa1d510),
   +     +  anchorPrices: +[
   +     +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 8918019064099991,
   +     +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 92
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2900630,
   +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 2564194564887675,
   +  +  2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a_: 5059924967007587
   +  ]
     )
  boughtAsset: Asset(175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293, JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW)
  soldAsset: Asset(2b2686eea1ae2104b87f285ab9659f7d07d060384fd63a47fcb15c6a, )
  boughtAmount: 16
  soldAmount: 1
  boughtSpot: 238100671792409616
  soldSpot: 14094562196266415
  boughtExp: 2431
  soldExp: 46
  spotPrice: 0.05919581028546991
  effectivePrice: 0.0625
)

trials left: 1 - iteration: 18 - block: 10661
virtual: 1
weight: 95
jumpSize: 94
minAnchorPrice: 94
jumpLog: 0.010582109330537008
anchorLog: 0.010582109330537008
1
maxTicks: 1
maxTicks_: 1
1
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 10707
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  9007199254740992 > 
        spotBuying 9097271247288400
boughtAssetForSale (new):
        sellingAmm  285 > 
        spotSelling 282
subSwap: 1 bought
boughtAssetForSale (old): 
        buyingAmm  9007199254740992 > 
        spotBuying 9097271247288400
boughtAssetForSale (new):
        sellingAmm  285 > 
        spotSelling 282
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: f8f5fd07dced2b6c68beb5cf7299271a1cab628214d30f536cb6dbb3, 
   +     +  virtual: +[
   +     +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 1,
   +     +  +  91043b1a133077b5a950a071879676a0137ae9d77f3ad2eff18cbf88_L0PCfmMxLsMUyGNda2XSKUq5aAoNh1wi: 9007199254740991,
   +     +  +  8db9593bbcb17f0dc4deaa7121b26936041e48038561a5dce339ed65_w5yW: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 95,
   +     +  +  91043b1a133077b5a950a071879676a0137ae9d77f3ad2eff18cbf88_L0PCfmMxLsMUyGNda2XSKUq5aAoNh1wi: 1,
   +     +  +  8db9593bbcb17f0dc4deaa7121b26936041e48038561a5dce339ed65_w5yW: 100
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 94,
   +     +  +  91043b1a133077b5a950a071879676a0137ae9d77f3ad2eff18cbf88_L0PCfmMxLsMUyGNda2XSKUq5aAoNh1wi: 100,
   +     +  +  8db9593bbcb17f0dc4deaa7121b26936041e48038561a5dce339ed65_w5yW: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: f8f5fd07dced2b6c68beb5cf7299271a1cab628214d30f536cb6dbb3,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 8c75529416a5fb7f5b0fb534d1f5718154c4685b731c609aae79f722367201c7),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: ff9e983b01fe3342a2d907981d62d1cbacb103ba643eca62c4e21c931f205799),
   +     +  anchorPrices: +[
   +     +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 94,
   +     +  +  91043b1a133077b5a950a071879676a0137ae9d77f3ad2eff18cbf88_L0PCfmMxLsMUyGNda2XSKUq5aAoNh1wi: 8918019064099991,
   +     +  +  8db9593bbcb17f0dc4deaa7121b26936041e48038561a5dce339ed65_w5yW: 50
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3439380,
   +  +  175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293_JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW: 1,
   +  +  8db9593bbcb17f0dc4deaa7121b26936041e48038561a5dce339ed65_w5yW: 1,
   +  +  91043b1a133077b5a950a071879676a0137ae9d77f3ad2eff18cbf88_L0PCfmMxLsMUyGNda2XSKUq5aAoNh1wi: 1
   +  ]
     )
  boughtAsset: Asset(91043b1a133077b5a950a071879676a0137ae9d77f3ad2eff18cbf88, L0PCfmMxLsMUyGNda2XSKUq5aAoNh1wi)
  soldAsset: Asset(175eaffb0841dc642927a0197a3834844c053ac5839ddc135ff9f293, JS3NLy9AuIMnwXk07BHD8SQjgqkNMPiW)
  boughtAmount: 1
  soldAmount: 1
  boughtSpot: 9007199254740990
  soldSpot: 285
  boughtExp: 1
  soldExp: 105
  spotPrice: 3.164135620181697e-14
  effectivePrice: 1
)
traces.length: 20
Opening: 9
Swapping: 4
Closing: 7
--- DONE ---
Opening: 9
Swapping: 4
Closing: 7
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(1m10s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(3m39s)[0m

