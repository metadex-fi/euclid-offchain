[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 9007199254740991
maxTicks_: 44812306322540
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 9007199254740991
maxTicks_: 44812306322540
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1000

trials left: 1 - iteration: 2 - block: 2000
virtual: 8972466860071539
weight: 2
jumpSize: 1
minAnchorPrice: 8972466860071539
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 3 - block: 2889

trials left: 1 - iteration: 4 - block: 3889
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 9007199254740991
maxTicks_: 3121657384082680
3
virtual: 7230570605339633
weight: 2
jumpSize: 1
minAnchorPrice: 7230570605339633
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 3002399751580330
maxTicks_: 3121657384082680
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1000799917193443
maxTicks_: 44812306322540
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 7230570605339633
weight: 2
jumpSize: 1
minAnchorPrice: 7230570605339633
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 7230570605339633
weight: 2
jumpSize: 1
minAnchorPrice: 7230570605339633
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 7230570605339633
weight: 2
jumpSize: 1
minAnchorPrice: 7230570605339633
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 5 - block: 4889
virtual: 6385859054210086
weight: 1
jumpSize: 100
minAnchorPrice: 6322632726940679
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 5325

trials left: 1 - iteration: 7 - block: 6230
virtual: 6603928620134036
weight: 1
jumpSize: 100
minAnchorPrice: 6538543188251520
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 1
weight: 46
jumpSize: 7
minAnchorPrice: 40
jumpLog: 0.13353139262452257
anchorLog: 0.024692612590371414
5.407746634173151
maxTicks: 1
maxTicks_: 5
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 7230

trials left: 1 - iteration: 9 - block: 7588

trials left: 1 - iteration: 10 - block: 7589
virtual: 9007199254740991
weight: 1
jumpSize: 45
minAnchorPrice: 8811390575290099
jumpLog: 0.021978906718775167
anchorLog: 2.2204460492503128e-16
98984196108686.75
maxTicks: 1634090146036678
maxTicks_: 98984196108686
3
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1634090146036678
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 11 - block: 7590
virtual: 280470334267595
weight: 32
jumpSize: 100
minAnchorPrice: 8886188808478257
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 12 - block: 7625
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 4201739186740753
maxTicks_: 3121657384082680
3
virtual: 8538415033683917
weight: 1
jumpSize: 1
minAnchorPrice: 4269207516841958
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 4201739186740753
maxTicks_: 3121657384082680
3
virtual: 8538415033683917
weight: 1
jumpSize: 1
minAnchorPrice: 4269207516841958
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 13 - block: 7760
Swapping.boundary()
addedBuyingA0: 408629580228292813488
addedSellingA0: 408632255166965350400
diff: -2674938672536912
Swapping.boundary()
addedBuyingA0: 93603137227637036094
addedSellingA0: 93603137227637385931
diff: -349837
subSwap: 1 bought
addedBuyingA0: 10738714922429644
addedSellingA0: 10738714925858816
diff: -3429172
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 4be5e36fea8e03f0995a85bd1ca1c71cf1ba2cdacf5bab8eedb48b13, 
   +     +  virtual: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 9007199254740991,
   +     +  +  _: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 1,
   +     +  +  _: 2
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 45,
   +     +  +  _: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 4be5e36fea8e03f0995a85bd1ca1c71cf1ba2cdacf5bab8eedb48b13,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 93d4d08c3a084b09f4fd22373f34adfdc1634cfd4bc90ba33cb7ab47103d4597),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: f2f3cfd0fc7fcc30951ea7617bd3513d20105cd2e7700936765e041f8e95d60f),
   +     +  anchorPrices: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 8811390575290099,
   +     +  +  _: 1
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2590310,
   +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 1634090146036678
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8, 4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z)
  boughtAmount: 1
  soldAmount: 2560309154
  boughtSpot: 4194304
  soldSpot: 10738714922429644
  boughtExp: 22
  soldExp: 9
  spotPrice: 2560309153.1824217
  effectivePrice: 2560309154
)

trials left: 1 - iteration: 14 - block: 8760
Swapping.boundary()
addedBuyingA0: 408618841513370383844
addedSellingA0: 408621516452039491584
diff: -2674938669107740
Swapping.boundary()
addedBuyingA0: 93603137227637036094
addedSellingA0: 93603137227637385931
diff: -349837
subSwap: 63652362418758 sold
addedBuyingA0: 266975191686523379484
addedSellingA0: 266975191686526795776
diff: -3416292
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 4be5e36fea8e03f0995a85bd1ca1c71cf1ba2cdacf5bab8eedb48b13, 
   +     +  virtual: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 9007199254740991,
   +     +  +  _: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 1,
   +     +  +  _: 2
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 45,
   +     +  +  _: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 4be5e36fea8e03f0995a85bd1ca1c71cf1ba2cdacf5bab8eedb48b13,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 93d4d08c3a084b09f4fd22373f34adfdc1634cfd4bc90ba33cb7ab47103d4597),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: f2f3cfd0fc7fcc30951ea7617bd3513d20105cd2e7700936765e041f8e95d60f),
   +     +  anchorPrices: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 8811390575290099,
   +     +  +  _: 1
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2590310,
   +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 1634092706345832
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8, 4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z)
  boughtAmount: 24861
  soldAmount: 63651845857269
  boughtSpot: 4194304
  soldSpot: 10738714922429644
  boughtExp: 22
  soldExp: 9
  spotPrice: 2560309153.1824217
  effectivePrice: 2560309153.1824546
)

trials left: 1 - iteration: 15 - block: 9760
Swapping.boundary()
addedBuyingA0: 141643649826847004360
addedSellingA0: 141646324765512695808
diff: -2674938665691448
Swapping.boundary()
addedBuyingA0: 93603137227637036094
addedSellingA0: 93603137227637385931
diff: -349837
subSwap: 31287825747251 sold
addedBuyingA0: 131227096352090249680
addedSellingA0: 131227096352093634560
diff: -3384880
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 4be5e36fea8e03f0995a85bd1ca1c71cf1ba2cdacf5bab8eedb48b13, 
   +     +  virtual: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 9007199254740991,
   +     +  +  _: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 1,
   +     +  +  _: 2
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 45,
   +     +  +  _: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 4be5e36fea8e03f0995a85bd1ca1c71cf1ba2cdacf5bab8eedb48b13,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 93d4d08c3a084b09f4fd22373f34adfdc1634cfd4bc90ba33cb7ab47103d4597),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: f2f3cfd0fc7fcc30951ea7617bd3513d20105cd2e7700936765e041f8e95d60f),
   +     +  anchorPrices: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 8811390575290099,
   +     +  +  _: 1
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2590310,
   +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 1697744552203101
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8, 4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z)
  boughtAmount: 12220
  soldAmount: 31286977851890
  boughtSpot: 4194304
  soldSpot: 10738714922429644
  boughtExp: 22
  soldExp: 9
  spotPrice: 2560309153.1824217
  effectivePrice: 2560309153.1824875
)

trials left: 1 - iteration: 16 - block: 10760
Swapping.boundary()
addedBuyingA0: 10416553474756754680
addedSellingA0: 10419228413419061248
diff: -2674938662306568
Swapping.boundary()
addedBuyingA0: 93603137227637036094
addedSellingA0: 93603137227637385931
diff: -349837
subSwap: 1 sold
subSwap: 1 bought
addedBuyingA0: 9064801203528669
addedSellingA0: 9064801248258206
diff: -44729537
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 4be5e36fea8e03f0995a85bd1ca1c71cf1ba2cdacf5bab8eedb48b13, 
   +     +  virtual: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 280470334267595,
   +     +  +  df0af9fabee3f1710ac2bc3095c273cdd74bddde44a603821f37e12f_xzBMctI2: 9007199254740991,
   +     +  +  _: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 32,
   +     +  +  df0af9fabee3f1710ac2bc3095c273cdd74bddde44a603821f37e12f_xzBMctI2: 1,
   +     +  +  _: 51
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 100,
   +     +  +  df0af9fabee3f1710ac2bc3095c273cdd74bddde44a603821f37e12f_xzBMctI2: 100,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 4be5e36fea8e03f0995a85bd1ca1c71cf1ba2cdacf5bab8eedb48b13,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: f938c9623ad4154d1e2444f448194b36c42c546deabc20b84c6b546336d9a9c7),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 174465c818a405480afded8e1cebdb42572dca47e8817978abbd1eae1cceb0b5),
   +     +  anchorPrices: +[
   +     +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 8886188808478257,
   +     +  +  df0af9fabee3f1710ac2bc3095c273cdd74bddde44a603821f37e12f_xzBMctI2: 8918019064099991,
   +     +  +  _: 100
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2775640,
   +  +  323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8_4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z: 1
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(323dce0b24991b8a7dfa92e15e7713f48aee0d3cc882eb86542dcea8, 4pxFseWHtRNGRfxOTZbx94Z0Pg33DR7Z)
  boughtAmount: 1
  soldAmount: 64275194
  boughtSpot: 141031099
  soldSpot: 9064801203528669
  boughtExp: 1423
  soldExp: 2
  spotPrice: 64275193.682839185
  effectivePrice: 64275194
)

trials left: 1 - iteration: 17 - block: 10761
virtual: 1
weight: 67
jumpSize: 1
minAnchorPrice: 33
jumpLog: 0.6931471805599453
anchorLog: 0.02985296314968113
23.21870619960046
maxTicks: 1
maxTicks_: 23
1
virtual: 2
weight: 86
jumpSize: 100
minAnchorPrice: 170
jumpLog: 0.009950330853168092
anchorLog: 0.005865119452398058
1.6965265471447002
maxTicks: 1
maxTicks_: 1
1
virtual: 9007199254740991
weight: 1
jumpSize: 30
minAnchorPrice: 8716644440071926
jumpLog: 0.03278982282299097
anchorLog: 2.2204460492503128e-16
147672233847166.75
maxTicks: 1
maxTicks_: 147672233847166
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 18 - block: 10762
virtual: 9007199254740991
weight: 1
jumpSize: 14
minAnchorPrice: 8406719304424924
jumpLog: 0.06899287148695142
anchorLog: 2.2204460492503128e-16
310716270319855
maxTicks: 3076428473670052
maxTicks_: 310716270319855
3
virtual: 2729221657646010
weight: 1
jumpSize: 58
minAnchorPrice: 2682963663448620
jumpLog: 0.01709443335930004
anchorLog: 4.440892098500625e-16
38493241853526.73
maxTicks: 3076428473670052
maxTicks_: 38493241853526
3
virtual: 2729221657646010
weight: 1
jumpSize: 58
minAnchorPrice: 2682963663448620
jumpLog: 0.01709443335930004
anchorLog: 4.440892098500625e-16
38493241853526.73
virtual: 2729221657646010
weight: 1
jumpSize: 58
minAnchorPrice: 2682963663448620
jumpLog: 0.01709443335930004
anchorLog: 4.440892098500625e-16
38493241853526.73
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 10917
traces.length: 20
Opening: 10
Closing: 6
Swapping: 4
--- DONE ---
Opening: 10
Closing: 6
Swapping: 4
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(39s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(3m3s)[0m

