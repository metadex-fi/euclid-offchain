[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 1
weight: 36
jumpSize: 1
minAnchorPrice: 18
jumpLog: 0.6931471805599453
anchorLog: 0.05406722127027579
12.820099947341156
maxTicks: 2890766311440470
maxTicks_: 12
3
virtual: 649579830861503
weight: 14
jumpSize: 100
minAnchorPrice: 9004076863426774
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 2890766311440470
maxTicks_: 44812306322540
3
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 2890766311440470
maxTicks_: 35
3
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 747
Swapping.boundary()
addedBuyingA0: 14398688052247208656896
addedSellingA0: 14398688052247317708800
diff: -109051904
Swapping.boundary()
addedBuyingA0: 21104246156226843377664
addedSellingA0: 21104249703178864427008
diff: -3546952021049344
Swapping.boundary()
addedBuyingA0: 26890894295837429465088
addedSellingA0: 26890898815340811124736
diff: -4519503381659648
subSwap: 1 bought
addedBuyingA0: 40532396646334464
addedSellingA0: 40532396788940800
diff: -142606336
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: c074c60a60f5f6ebcd4bc74912ca0ad75f76333497dd1af67f8e5380, 
   +     +  virtual: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 1,
   +     +  +  f655373dfd7f79991fdaa1bb7f15481e2dbd18ae71890126f8dd5e46_: 649579830861503,
   +     +  +  _: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 36,
   +     +  +  f655373dfd7f79991fdaa1bb7f15481e2dbd18ae71890126f8dd5e46_: 14,
   +     +  +  _: 100
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 1,
   +     +  +  f655373dfd7f79991fdaa1bb7f15481e2dbd18ae71890126f8dd5e46_: 100,
   +     +  +  _: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: c074c60a60f5f6ebcd4bc74912ca0ad75f76333497dd1af67f8e5380,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 9372f7fe91a0c29e5742d5f165c0d884c9469480b1fac7fa0e805276e56a40d0),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: dadccd34673843580b92361eaf446c12cf73039cafefdebe188862f4fe6981d8),
   +     +  anchorPrices: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 18,
   +     +  +  f655373dfd7f79991fdaa1bb7f15481e2dbd18ae71890126f8dd5e46_: 9004076863426774,
   +     +  +  _: 50
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2452390,
   +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 963588770480156
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41, )
  boughtAmount: 1
  soldAmount: 193273529
  boughtSpot: 209715200
  soldSpot: 40532396646334464
  boughtExp: 22
  soldExp: 51
  spotPrice: 193273528.32
  effectivePrice: 193273529
)

trials left: 1 - iteration: 2 - block: 1747
Swapping.boundary()
addedBuyingA0: 14398688052247208656896
addedSellingA0: 14398688052247317708800
diff: -109051904
Swapping.boundary()
addedBuyingA0: 21104246156226843377664
addedSellingA0: 21104249703178864427008
diff: -3546952021049344
Swapping.boundary()
addedBuyingA0: 26890894295837429465088
addedSellingA0: 26890898815340811124736
diff: -4519503381659648
subSwap: 162311136362467 sold
addedBuyingA0: 21104246156226843377664
addedSellingA0: 21104246156226843377664
diff: 0
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: c074c60a60f5f6ebcd4bc74912ca0ad75f76333497dd1af67f8e5380, 
   +     +  virtual: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 1,
   +     +  +  f655373dfd7f79991fdaa1bb7f15481e2dbd18ae71890126f8dd5e46_: 649579830861503,
   +     +  +  _: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 36,
   +     +  +  f655373dfd7f79991fdaa1bb7f15481e2dbd18ae71890126f8dd5e46_: 14,
   +     +  +  _: 100
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 1,
   +     +  +  f655373dfd7f79991fdaa1bb7f15481e2dbd18ae71890126f8dd5e46_: 100,
   +     +  +  _: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: c074c60a60f5f6ebcd4bc74912ca0ad75f76333497dd1af67f8e5380,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 74ed8060d14f5bf02b2877e4112af113711add67280b3943998b6bda075cc8b5),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: dadccd34673843580b92361eaf446c12cf73039cafefdebe188862f4fe6981d8),
   +     +  anchorPrices: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 18,
   +     +  +  f655373dfd7f79991fdaa1bb7f15481e2dbd18ae71890126f8dd5e46_: 9004076863426774,
   +     +  +  _: 62
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2452390,
   +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 963588770480156
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41, )
  boughtAmount: 520676
  soldAmount: 162311109083136
  boughtSpot: 130023424
  soldSpot: 40532396646334464
  boughtExp: 21
  soldExp: 51
  spotPrice: 311731497.2903226
  effectivePrice: 311731497.2903226
)

trials left: 1 - iteration: 3 - block: 2747

trials left: 1 - iteration: 4 - block: 2748
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 1
maxTicks_: 1
1
virtual: 3002428432432932
weight: 3
jumpSize: 74
minAnchorPrice: 8887188160001478
jumpLog: 0.01342302033214077
anchorLog: 2.2204460492503128e-16
60451909366015.77
maxTicks: 1
maxTicks_: 60451909366015
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 5 - block: 3748
virtual: 3311231178246495
weight: 1
jumpSize: 100
minAnchorPrice: 3278446711135143
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 9007199254740990
maxTicks_: 44812306322540
3
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 4503599627370495
maxTicks_: 1
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 4503599627370495
maxTicks_: 3121657384082680
3
virtual: 3311231178246495
weight: 1
jumpSize: 100
minAnchorPrice: 3278446711135143
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
Opening pool with 4 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 3809
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 818433415380221
weight: 10
jumpSize: 100
minAnchorPrice: 8103301142378425
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 7562958622291915
weight: 1
jumpSize: 100
minAnchorPrice: 7488077843853381
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 7 - block: 3926
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
virtual: 8489173083974475
weight: 1
jumpSize: 1
minAnchorPrice: 4244586541987237
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 4317696108151978
weight: 1
jumpSize: 100
minAnchorPrice: 4274946641734631
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 4926

trials left: 1 - iteration: 9 - block: 5238

trials left: 1 - iteration: 10 - block: 6238

trials left: 1 - iteration: 11 - block: 6239
Swapping.boundary()
addedBuyingA0: 22623730946744103308000
addedSellingA0: 22623733924333293679057
diff: -2977589190371057
subSwap: 1 bought
addedBuyingA0: 9097271247288400
addedSellingA0: 16368668307604418
diff: -7271397060316018
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: c074c60a60f5f6ebcd4bc74912ca0ad75f76333497dd1af67f8e5380, 
   +     +  virtual: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 9007199254740991,
   +     +  +  _: 818433415380221,
   +     +  +  ad4e152cdc74cee2bdc655c7a1e0d7acb3348b02556c23bec350c3e6_: 7562958622291915
   +     +  ], 
   +     +  weights: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 1,
   +     +  +  _: 10,
   +     +  +  ad4e152cdc74cee2bdc655c7a1e0d7acb3348b02556c23bec350c3e6_: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 100,
   +     +  +  _: 100,
   +     +  +  ad4e152cdc74cee2bdc655c7a1e0d7acb3348b02556c23bec350c3e6_: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: c074c60a60f5f6ebcd4bc74912ca0ad75f76333497dd1af67f8e5380,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 033af8eff402dcf540f185af7e5edb2483a9e8680e4532615302ed88995e6421),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 2aac7427fba55c464ae201a2c210ec485c547587eee615f524c7d063064eb00a),
   +     +  anchorPrices: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 8918019064099991,
   +     +  +  _: 8103301142378425,
   +     +  +  ad4e152cdc74cee2bdc655c7a1e0d7acb3348b02556c23bec350c3e6_: 7488077843853381
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2486870,
   +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 1
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41, )
  boughtAmount: 1
  soldAmount: 2
  boughtSpot: 8184334153802209
  soldSpot: 9097271247288400
  boughtExp: 1
  soldExp: 2
  spotPrice: 1.1115468987861483
  effectivePrice: 2
)

trials left: 1 - iteration: 12 - block: 7239

trials left: 1 - iteration: 13 - block: 7240
virtual: 1
weight: 100
jumpSize: 24
minAnchorPrice: 96
jumpLog: 0.0408219945202552
anchorLog: 0.010362787035546658
3.939287218798061
maxTicks: 3119359365910160
maxTicks_: 3
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 3119359365910160
maxTicks_: 3121657384082680
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 14 - block: 8240
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 2115691842237022
weight: 8
jumpSize: 1
minAnchorPrice: 8462767368948088
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 15 - block: 8241

trials left: 1 - iteration: 16 - block: 8242
virtual: 1
weight: 99
jumpSize: 98
minAnchorPrice: 98
jumpLog: 0.010152371464017908
anchorLog: 0.010152371464017908
1
maxTicks: 8050086392542400
maxTicks_: 1
1
virtual: 9007199254740991
weight: 1
jumpSize: 38
minAnchorPrice: 8776245427696350
jumpLog: 0.025975486403260736
anchorLog: 2.2204460492503128e-16
116983190886492.45
maxTicks: 8050086392542400
maxTicks_: 116983190886492
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 17 - block: 8243
Swapping.boundary()
addedBuyingA0: 20976942905559957140000
addedSellingA0: 20976949211502169960592
diff: -6305942212820592
Swapping.boundary()
addedBuyingA0: 1850880005469276915186640
addedSellingA0: 1850880007369501104470400
diff: -1900224189283760
subSwap: 1239367 sold
addedBuyingA0: 20976942905559957140000
addedSellingA0: 20976949211502169960592
diff: -6305942212820592
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: c074c60a60f5f6ebcd4bc74912ca0ad75f76333497dd1af67f8e5380, 
   +     +  virtual: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 9007199254740991,
   +     +  +  _: 2115691842237022
   +     +  ], 
   +     +  weights: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 1,
   +     +  +  _: 8
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 100,
   +     +  +  _: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: c074c60a60f5f6ebcd4bc74912ca0ad75f76333497dd1af67f8e5380,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 248a5dd97a1e617038fcc7efeb17e98fca562cc30717ef629afa11bee620c1dd),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: d57ffdc47b65e3290e42963f50f4afaf2414f8a37357e0bbf8102df50fbd3d3d),
   +     +  anchorPrices: +[
   +     +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 8918019064099991,
   +     +  +  _: 8462767368948088
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2305850,
   +  +  a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41_: 1
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(a53666d5e4adc303f5c9bbb2c0322cd2b60ce29e2d9cae59b8186d41, )
  boughtAmount: 2305850
  soldAmount: 1239367
  boughtSpot: 16925534737896176
  soldSpot: 9097271247288400
  boughtExp: 1
  soldExp: 2
  spotPrice: 0.5374879664463221
  effectivePrice: 0.5374881280222044
)

trials left: 1 - iteration: 18 - block: 9243
virtual: 6860699151850489
weight: 1
jumpSize: 1
minAnchorPrice: 3430349575925244
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 128743738710719
weight: 70
jumpSize: 100
minAnchorPrice: 8922833375990425
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 10243
virtual: 9007199254740991
weight: 1
jumpSize: 49
minAnchorPrice: 8827055269646171
jumpLog: 0.02020270731751947
anchorLog: 2.2204460492503128e-16
90984905147055.89
maxTicks: 1
maxTicks_: 90984905147055
1
virtual: 5352607890566402
weight: 1
jumpSize: 100
minAnchorPrice: 5299611772838021
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos
traces.length: 20
Opening: 10
Swapping: 4
Closing: 6
--- DONE ---
Opening: 10
Swapping: 4
Closing: 6
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(44s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(3m2s)[0m

