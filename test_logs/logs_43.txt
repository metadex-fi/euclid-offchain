[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 10

trials left: 1 - iteration: 0 - block: 0

trials left: 1 - iteration: 1 - block: 1000

trials left: 1 - iteration: 2 - block: 1162

trials left: 1 - iteration: 3 - block: 2162

trials left: 1 - iteration: 4 - block: 3162

trials left: 1 - iteration: 5 - block: 4162

trials left: 1 - iteration: 6 - block: 4376

trials left: 1 - iteration: 7 - block: 5317

trials left: 1 - iteration: 8 - block: 5725

trials left: 1 - iteration: 9 - block: 6549

trials left: 1 - iteration: 10 - block: 6550

trials left: 1 - iteration: 11 - block: 6738

trials left: 1 - iteration: 12 - block: 7625

trials left: 1 - iteration: 13 - block: 8597

trials left: 1 - iteration: 14 - block: 8598

trials left: 1 - iteration: 15 - block: 8599

trials left: 1 - iteration: 16 - block: 9599

trials left: 1 - iteration: 17 - block: 9600

trials left: 1 - iteration: 18 - block: 9601

trials left: 1 - iteration: 19 - block: 10601
traces.length: 0
trials left: 1
accounts: 9

trials left: 1 - iteration: 0 - block: 0

trials left: 1 - iteration: 1 - block: 1

trials left: 1 - iteration: 2 - block: 2

trials left: 1 - iteration: 3 - block: 521

trials left: 1 - iteration: 4 - block: 1521

trials left: 1 - iteration: 5 - block: 2521

trials left: 1 - iteration: 6 - block: 3447

trials left: 1 - iteration: 7 - block: 3448

trials left: 1 - iteration: 8 - block: 3449

trials left: 1 - iteration: 9 - block: 4449

trials left: 1 - iteration: 10 - block: 4729

trials left: 1 - iteration: 11 - block: 5729

trials left: 1 - iteration: 12 - block: 6135

trials left: 1 - iteration: 13 - block: 6136

trials left: 1 - iteration: 14 - block: 6956

trials left: 1 - iteration: 15 - block: 7316

trials left: 1 - iteration: 16 - block: 7937

trials left: 1 - iteration: 17 - block: 8937

trials left: 1 - iteration: 18 - block: 9415

trials left: 1 - iteration: 19 - block: 10415
traces.length: 0
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 893732928633550
weight: 1
jumpSize: 1
minAnchorPrice: 446866464316775
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503107e-15
312165738408268.3
maxTicks: 1
maxTicks_: 312165738408268
1
virtual: 6874024616349539
weight: 1
jumpSize: 1
minAnchorPrice: 3437012308174769
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1000
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 692058153214616
maxTicks_: 1
1
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 692058153214616
maxTicks_: 35
3
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 2 - block: 1001

trials left: 1 - iteration: 3 - block: 1403
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  6874024618944159 > 
        spotBuying 13748049232699076
boughtAssetForSale (old):
        sellingAmm  893732928633551 > 
        spotSelling 893732928633550
subSwap: 634849 sold
boughtAssetForSale (old): 
        buyingAmm  6874024618944159 > 
        spotBuying 13748049232699076
boughtAssetForSale (old):
        sellingAmm  893732928633551 > 
        spotSelling 893732928633550
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 6864f4f3011db87a7276a20d56fa28582abd625cefcf69171892290d, 
   +     +  virtual: +[
   +     +  +  5b55b88e40f3201ed46d2aa64d7ea8a2a41bc5b350fcebd54a13afa6_Z5QHm0E3B0KBmDLgBCo4xp4dNyRdDp8P: 893732928633550,
   +     +  +  _: 6874024616349539
   +     +  ], 
   +     +  weights: +[
   +     +  +  5b55b88e40f3201ed46d2aa64d7ea8a2a41bc5b350fcebd54a13afa6_Z5QHm0E3B0KBmDLgBCo4xp4dNyRdDp8P: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  5b55b88e40f3201ed46d2aa64d7ea8a2a41bc5b350fcebd54a13afa6_Z5QHm0E3B0KBmDLgBCo4xp4dNyRdDp8P: 1,
   +     +  +  _: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 6864f4f3011db87a7276a20d56fa28582abd625cefcf69171892290d,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 38a22218f0975e3e3a2f9306686377cca94a7fef28a4fce07709a6c504cd92b7),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: ba5a700bc2c120e27a9326215e71991d859a242c649ea5145da6778d20ba58fe),
   +     +  anchorPrices: +[
   +     +  +  5b55b88e40f3201ed46d2aa64d7ea8a2a41bc5b350fcebd54a13afa6_Z5QHm0E3B0KBmDLgBCo4xp4dNyRdDp8P: 446866464316775,
   +     +  +  _: 3437012308174769
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2594620,
   +  +  5b55b88e40f3201ed46d2aa64d7ea8a2a41bc5b350fcebd54a13afa6_Z5QHm0E3B0KBmDLgBCo4xp4dNyRdDp8P: 1
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(5b55b88e40f3201ed46d2aa64d7ea8a2a41bc5b350fcebd54a13afa6, Z5QHm0E3B0KBmDLgBCo4xp4dNyRdDp8P)
  boughtAmount: 2441427
  soldAmount: 634849
  boughtSpot: 6874024616349538
  soldSpot: 1787465857267100
  boughtExp: 1
  soldExp: 2
  spotPrice: 0.26003192554994614
  effectivePrice: 0.2600319403365327
)

trials left: 1 - iteration: 4 - block: 1404

trials left: 1 - iteration: 5 - block: 1405
virtual: 1
weight: 99
jumpSize: 98
minAnchorPrice: 98
jumpLog: 0.010152371464017908
anchorLog: 0.010152371464017908
1
maxTicks: 1
maxTicks_: 1
1
virtual: 1
weight: 72
jumpSize: 1
minAnchorPrice: 36
jumpLog: 0.6931471805599453
anchorLog: 0.027398974188114347
25.298289483430075
maxTicks: 1
maxTicks_: 25
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 2405

trials left: 1 - iteration: 7 - block: 3405
virtual: 7259087793789763
weight: 1
jumpSize: 77
minAnchorPrice: 7166022565664253
jumpLog: 0.012903404835907782
anchorLog: 2.2204460492503128e-16
58111769210804.95
maxTicks: 7813411393408519
maxTicks_: 58111769210804
3
virtual: 903960394730778
weight: 13
jumpSize: 1
minAnchorPrice: 5875742565750057
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 2604470464469506
maxTicks_: 3121657384082680
3
virtual: 6023354492315174
weight: 1
jumpSize: 100
minAnchorPrice: 5963717319123934
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 868156821489835
maxTicks_: 44812306322540
3
virtual: 7259087793789763
weight: 1
jumpSize: 77
minAnchorPrice: 7166022565664253
jumpLog: 0.012903404835907782
anchorLog: 2.2204460492503128e-16
58111769210804.95
virtual: 7259087793789763
weight: 1
jumpSize: 77
minAnchorPrice: 7166022565664253
jumpLog: 0.012903404835907782
anchorLog: 2.2204460492503128e-16
58111769210804.95
virtual: 903960394730778
weight: 13
jumpSize: 1
minAnchorPrice: 5875742565750057
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 903960394730778
weight: 13
jumpSize: 1
minAnchorPrice: 5875742565750057
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 903960394730778
weight: 13
jumpSize: 1
minAnchorPrice: 5875742565750057
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 903960394730778
weight: 13
jumpSize: 1
minAnchorPrice: 5875742565750057
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 903960394730778
weight: 13
jumpSize: 1
minAnchorPrice: 5875742565750057
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 903960394730778
weight: 13
jumpSize: 1
minAnchorPrice: 5875742565750057
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
Opening pool with 6 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 4405

trials left: 1 - iteration: 9 - block: 5405
virtual: 1
weight: 86
jumpSize: 85
minAnchorPrice: 85
jumpLog: 0.011696039763191236
anchorLog: 0.011696039763191236
1
maxTicks: 1
maxTicks_: 1
1
virtual: 4283460248959510
weight: 1
jumpSize: 39
minAnchorPrice: 4176373742735522
jumpLog: 0.025317807984289786
anchorLog: 2.2204460492503128e-16
114021270603885.27
maxTicks: 1
maxTicks_: 114021270603885
1
virtual: 9007199254740991
weight: 1
jumpSize: 99
minAnchorPrice: 8917127262193581
jumpLog: 0.010050335853501506
anchorLog: 2.2204460492503128e-16
45262688804777.73
maxTicks: 1
maxTicks_: 45262688804777
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 10 - block: 5406

trials left: 1 - iteration: 11 - block: 5407
virtual: 5768973627889000
weight: 1
jumpSize: 54
minAnchorPrice: 5664083198291018
jumpLog: 0.018349138668196617
anchorLog: 2.2204460492503128e-16
82637174068659.86
maxTicks: 1
maxTicks_: 82637174068659
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 12 - block: 5408

trials left: 1 - iteration: 13 - block: 6408
virtual: 1
weight: 100
jumpSize: 12
minAnchorPrice: 92
jumpLog: 0.08004270767353636
anchorLog: 0.010810916104215676
7.403878348692762
maxTicks: 1
maxTicks_: 7
1
virtual: 4547225224667774
weight: 2
jumpSize: 100
minAnchorPrice: 9004406385480740
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 14 - block: 7408
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 7344430751428143
maxTicks_: 44812306322540
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 3672215375714071
maxTicks_: 3121657384082680
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 15 - block: 8408
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 1
maxTicks_: 1
1
virtual: 1
weight: 85
jumpSize: 1
minAnchorPrice: 42
jumpLog: 0.6931471805599453
anchorLog: 0.023530497410194036
29.45739601151209
maxTicks: 1
maxTicks_: 29
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 16 - block: 8409

trials left: 1 - iteration: 17 - block: 8846
virtual: 8260382002137941
weight: 1
jumpSize: 33
minAnchorPrice: 8017429590310354
jumpLog: 0.02985296314968113
anchorLog: 2.2204460492503128e-16
134445793716809.1
maxTicks: 927481869495958
maxTicks_: 134445793716809
3
virtual: 5798240285909476
weight: 1
jumpSize: 21
minAnchorPrice: 5534683909277227
jumpLog: 0.04652001563489291
anchorLog: 2.2204460492503128e-16
209507525078573.38
maxTicks: 463740934747979
maxTicks_: 209507525078573
3
virtual: 8260382002137941
weight: 1
jumpSize: 33
minAnchorPrice: 8017429590310354
jumpLog: 0.02985296314968113
anchorLog: 2.2204460492503128e-16
134445793716809.1
virtual: 5798240285909476
weight: 1
jumpSize: 21
minAnchorPrice: 5534683909277227
jumpLog: 0.04652001563489291
anchorLog: 2.2204460492503128e-16
209507525078573.38
virtual: 5798240285909476
weight: 1
jumpSize: 21
minAnchorPrice: 5534683909277227
jumpLog: 0.04652001563489291
anchorLog: 2.2204460492503128e-16
209507525078573.38
virtual: 5798240285909476
weight: 1
jumpSize: 21
minAnchorPrice: 5534683909277227
jumpLog: 0.04652001563489291
anchorLog: 2.2204460492503128e-16
209507525078573.38
virtual: 5798240285909476
weight: 1
jumpSize: 21
minAnchorPrice: 5534683909277227
jumpLog: 0.04652001563489291
anchorLog: 2.2204460492503128e-16
209507525078573.38
Opening pool with 6 dirac utxos and 1 param utxos

trials left: 1 - iteration: 18 - block: 8847
virtual: 394197592697998
weight: 45
jumpSize: 1
minAnchorPrice: 8869445835704955
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 2
weight: 87
jumpSize: 100
minAnchorPrice: 172
jumpLog: 0.009950330853168092
anchorLog: 0.005797117684325915
1.7164272652376058
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 8848
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  18014398509481982 > 
        spotBuying 36028797018963960
boughtAssetForSale (old):
        sellingAmm  14469981803648986 > 
        spotSelling 14373404741309455
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  5798240288538576 > 
        spotBuying 6074346966190879
boughtAssetForSale (old):
        sellingAmm  8414962313720600 > 
        spotSelling 8260382002137940
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  5798240288538576 > 
        spotBuying 6074346966190879
boughtAssetForSale (old):
        sellingAmm  8414962313720600 > 
        spotSelling 8384605243453911
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  5798240288538576 > 
        spotBuying 5888852426172846
boughtAssetForSale (old):
        sellingAmm  8414962313720600 > 
        spotSelling 8260382002137940
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  5798240288538576 > 
        spotBuying 5980880609849090
boughtAssetForSale (old):
        sellingAmm  8414962313720600 > 
        spotSelling 8260382002137940
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  5798240288538576 > 
        spotBuying 5888852426172846
boughtAssetForSale (old):
        sellingAmm  8414962313720600 > 
        spotSelling 8384605243453911
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  5798240288538576 > 
        spotBuying 5980880609849090
boughtAssetForSale (old):
        sellingAmm  8414962313720600 > 
        spotSelling 8384605243453911
subSwap: 1 sold
subSwap: 2 bought
boughtAssetForSale (old): 
        buyingAmm  5798240288538576 > 
        spotBuying 6074346966190879
boughtAssetForSale (old):
        sellingAmm  8414962313720600 > 
        spotSelling 8260382002137940
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 6864f4f3011db87a7276a20d56fa28582abd625cefcf69171892290d, 
   +     +  virtual: +[
   +     +  +  524cb3b727bb714aefd4a125c4ba1d3cea2fbccfd8def7934a945e97_Di99GkltNtDgqZ9PzXmzcdVsoVmuacU3: 8260382002137941,
   +     +  +  _: 5798240285909476
   +     +  ], 
   +     +  weights: +[
   +     +  +  524cb3b727bb714aefd4a125c4ba1d3cea2fbccfd8def7934a945e97_Di99GkltNtDgqZ9PzXmzcdVsoVmuacU3: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  524cb3b727bb714aefd4a125c4ba1d3cea2fbccfd8def7934a945e97_Di99GkltNtDgqZ9PzXmzcdVsoVmuacU3: 33,
   +     +  +  _: 21
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 6864f4f3011db87a7276a20d56fa28582abd625cefcf69171892290d,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 877850b92ad47bebf5e470848aa73aa22d548c1ac4b60b47f60bb8093c149a35),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 6591e5b48b919f5996e1c51c96d99c2f84e0ea45c6c2d19d60c17e787bee166d),
   +     +  anchorPrices: +[
   +     +  +  524cb3b727bb714aefd4a125c4ba1d3cea2fbccfd8def7934a945e97_Di99GkltNtDgqZ9PzXmzcdVsoVmuacU3: 8017429590310354,
   +     +  +  _: 5534683909277227
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2629100,
   +  +  524cb3b727bb714aefd4a125c4ba1d3cea2fbccfd8def7934a945e97_Di99GkltNtDgqZ9PzXmzcdVsoVmuacU3: 154580311582659
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(524cb3b727bb714aefd4a125c4ba1d3cea2fbccfd8def7934a945e97, Di99GkltNtDgqZ9PzXmzcdVsoVmuacU3)
  boughtAmount: 2
  soldAmount: 3
  boughtSpot: 5798240285909475
  soldSpot: 8510696608263332
  boughtExp: 1
  soldExp: 2
  spotPrice: 1.467806815275576
  effectivePrice: 1.5
)
traces.length: 20
Opening: 11
Closing: 7
Swapping: 2
--- DONE ---
Opening: 11
Closing: 7
Swapping: 2
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(2m15s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(3m31s)[0m

