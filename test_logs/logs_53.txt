[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 3395655851866277
weight: 1
jumpSize: 100
minAnchorPrice: 3362035496897303
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 512871849695977
maxTicks_: 44812306322540
3
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 256435924847988
maxTicks_: 1
1
virtual: 3395655851866277
weight: 1
jumpSize: 100
minAnchorPrice: 3362035496897303
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1000
virtual: 1942642930823128
weight: 6
jumpSize: 1
minAnchorPrice: 5827928792469384
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1
maxTicks_: 1
1
virtual: 2
weight: 59
jumpSize: 100
minAnchorPrice: 116
jumpLog: 0.009950330853168092
anchorLog: 0.008583743691391435
1.159206426812021
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 2 - block: 1001
virtual: 8055937902870093
weight: 1
jumpSize: 1
minAnchorPrice: 4027968951435046
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 9007199254740991
weight: 1
jumpSize: 97
minAnchorPrice: 8915289058264042
jumpLog: 0.010256500167189061
anchorLog: 2.2204460492503128e-16
46191170331078.09
maxTicks: 1
maxTicks_: 46191170331078
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 3 - block: 1002
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  5223722 > 
        spotBuying 8388608
boughtAssetForSale (old):
        sellingAmm  11655857584938774 > 
        spotSelling 11655857584938768
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  9007199257525251 > 
        spotBuying 9100056979016671
boughtAssetForSale (old):
        sellingAmm  8055937902870094 > 
        spotSelling 8055937902870092
subSwap: 1 bought
boughtAssetForSale (old): 
        buyingAmm  5223722 > 
        spotBuying 8388608
boughtAssetForSale (old):
        sellingAmm  11655857584938774 > 
        spotSelling 11655857584938768
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: bd46d59ba38cc0b48c653c13340787d3dd80ecb841012c1721ff74d4, 
   +     +  virtual: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 1942642930823128,
   +     +  +  _: 1,
   +     +  +  d3e20a9f1ef557318114d75697921a40d541ce2cdbfa2e093503de29_: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 6,
   +     +  +  _: 2,
   +     +  +  d3e20a9f1ef557318114d75697921a40d541ce2cdbfa2e093503de29_: 59
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 1,
   +     +  +  _: 1,
   +     +  +  d3e20a9f1ef557318114d75697921a40d541ce2cdbfa2e093503de29_: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: bd46d59ba38cc0b48c653c13340787d3dd80ecb841012c1721ff74d4,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 6aa2ca903139da939313dbc2770e3aca545346b5787c7870db13735ee4e341b1),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 6738c685dde8e9b939d43c624256d3a88746f498e9ab9f93593380f1b05d37d6),
   +     +  anchorPrices: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 5827928792469384,
   +     +  +  _: 1,
   +     +  +  d3e20a9f1ef557318114d75697921a40d541ce2cdbfa2e093503de29_: 116
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2611860,
   +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 1
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd, AT9MExZRsHp8wBJ2O147O1)
  boughtAmount: 1
  soldAmount: 5557946008
  boughtSpot: 4194304
  soldSpot: 23311715169877536
  boughtExp: 22
  soldExp: 2
  spotPrice: 5557946007.222542
  effectivePrice: 5557946008
)

trials left: 1 - iteration: 4 - block: 1223
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  5292682 > 
        spotBuying 8388608
boughtAssetForSale (old):
        sellingAmm  11655890932614822 > 
        spotSelling 11655857584938768
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  9007199257525251 > 
        spotBuying 9100056979016671
boughtAssetForSale (old):
        sellingAmm  8055937902870094 > 
        spotSelling 8055937902870092
subSwap: 1 bought
boughtAssetForSale (old): 
        buyingAmm  5292682 > 
        spotBuying 8388608
boughtAssetForSale (old):
        sellingAmm  11655890932614822 > 
        spotSelling 11655857584938768
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: bd46d59ba38cc0b48c653c13340787d3dd80ecb841012c1721ff74d4, 
   +     +  virtual: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 1942642930823128,
   +     +  +  _: 1,
   +     +  +  d3e20a9f1ef557318114d75697921a40d541ce2cdbfa2e093503de29_: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 6,
   +     +  +  _: 2,
   +     +  +  d3e20a9f1ef557318114d75697921a40d541ce2cdbfa2e093503de29_: 59
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 1,
   +     +  +  _: 1,
   +     +  +  d3e20a9f1ef557318114d75697921a40d541ce2cdbfa2e093503de29_: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: bd46d59ba38cc0b48c653c13340787d3dd80ecb841012c1721ff74d4,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 6aa2ca903139da939313dbc2770e3aca545346b5787c7870db13735ee4e341b1),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 6738c685dde8e9b939d43c624256d3a88746f498e9ab9f93593380f1b05d37d6),
   +     +  anchorPrices: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 5827928792469384,
   +     +  +  _: 1,
   +     +  +  d3e20a9f1ef557318114d75697921a40d541ce2cdbfa2e093503de29_: 116
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2646340,
   +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 5557946009
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd, AT9MExZRsHp8wBJ2O147O1)
  boughtAmount: 1
  soldAmount: 5557946008
  boughtSpot: 4194304
  soldSpot: 23311715169877536
  boughtExp: 22
  soldExp: 2
  spotPrice: 5557946007.222542
  effectivePrice: 5557946008
)

trials left: 1 - iteration: 5 - block: 2027
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 6439489854103103
maxTicks_: 1
1
virtual: 2
weight: 81
jumpSize: 100
minAnchorPrice: 160
jumpLog: 0.009950330853168092
anchorLog: 0.006230549750636163
1.5970229356008474
maxTicks: 6439489854103103
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 2028

trials left: 1 - iteration: 7 - block: 2694
virtual: 8497309591746339
weight: 1
jumpSize: 35
minAnchorPrice: 8261273214197829
jumpLog: 0.028170876966696224
anchorLog: 2.2204460492503128e-16
126870351009913.22
maxTicks: 1
maxTicks_: 126870351009913
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 2695

trials left: 1 - iteration: 9 - block: 3695
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  200040192 > 
        spotBuying 200252704
boughtAssetForSale (old):
        sellingAmm  643948985410310500 > 
        spotSelling 639846348975444856
subSwap: 3729322919 sold
boughtAssetForSale (old): 
        buyingAmm  200040192 > 
        spotBuying 200252704
boughtAssetForSale (old):
        sellingAmm  643948985410310500 > 
        spotSelling 639846348975444856
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: bd46d59ba38cc0b48c653c13340787d3dd80ecb841012c1721ff74d4, 
   +     +  virtual: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 2,
   +     +  +  _: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 100,
   +     +  +  _: 81
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 100,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: bd46d59ba38cc0b48c653c13340787d3dd80ecb841012c1721ff74d4,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 6cc0324e92e6895b439ae207a78a680409edfe858ebb5d0f20115418dca0b8de),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: c75f04b1e002932a66a00cbfcfb72dbd2c3078f242337f45c2496ad6f868dd29),
   +     +  anchorPrices: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 198,
   +     +  +  _: 160
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2469630,
   +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 6439489854103103
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd, AT9MExZRsHp8wBJ2O147O1)
  boughtAmount: 1
  soldAmount: 3259417963
  boughtSpot: 198270004
  soldSpot: 646244812465199305
  boughtExp: 1410
  soldExp: 3590
  spotPrice: 3259417962.513378
  effectivePrice: 3259417963
)

trials left: 1 - iteration: 10 - block: 3696
virtual: 9007199254740991
weight: 1
jumpSize: 20
minAnchorPrice: 8578285004515229
jumpLog: 0.04879016416943205
anchorLog: 2.2204460492503128e-16
219731365172799.53
maxTicks: 7856474054
maxTicks_: 219731365172799
3
virtual: 1453810164194101
weight: 1
jumpSize: 100
minAnchorPrice: 1439416004152575
jumpLog: 0.009950330853168092
anchorLog: 6.661338147750937e-16
14937435440846.994
maxTicks: 7856474054
maxTicks_: 14937435440846
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 11 - block: 4352

trials left: 1 - iteration: 12 - block: 4400
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  200040192 > 
        spotBuying 200252704
boughtAssetForSale (old):
        sellingAmm  643949311352106800 > 
        spotSelling 639846348975444856
subSwap: 2 bought
boughtAssetForSale (old): 
        buyingAmm  200040192 > 
        spotBuying 200252704
boughtAssetForSale (old):
        sellingAmm  643949311352106800 > 
        spotSelling 639846348975444856
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: bd46d59ba38cc0b48c653c13340787d3dd80ecb841012c1721ff74d4, 
   +     +  virtual: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 2,
   +     +  +  _: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 100,
   +     +  +  _: 81
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 100,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: bd46d59ba38cc0b48c653c13340787d3dd80ecb841012c1721ff74d4,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 6cc0324e92e6895b439ae207a78a680409edfe858ebb5d0f20115418dca0b8de),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: c75f04b1e002932a66a00cbfcfb72dbd2c3078f242337f45c2496ad6f868dd29),
   +     +  anchorPrices: +[
   +     +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 198,
   +     +  +  _: 160
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2469630,
   +  +  488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd_AT9MExZRsHp8wBJ2O147O1: 6439493113521066
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(488380b3a429fa334f0a157ae2ca2d0ee1d9523e0b8cf12c8bece2cd, AT9MExZRsHp8wBJ2O147O1)
  boughtAmount: 2
  soldAmount: 6518835926
  boughtSpot: 198270004
  soldSpot: 646244812465199305
  boughtExp: 1410
  soldExp: 3590
  spotPrice: 3259417962.513378
  effectivePrice: 3259417963
)

trials left: 1 - iteration: 13 - block: 4443

trials left: 1 - iteration: 14 - block: 5443
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 1926056074493575
weight: 2
jumpSize: 100
minAnchorPrice: 3813972424739752
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 15 - block: 5444

trials left: 1 - iteration: 16 - block: 6444

trials left: 1 - iteration: 17 - block: 7444

trials left: 1 - iteration: 18 - block: 8119
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 3412130444964135
maxTicks_: 1
1
virtual: 2091368388202890
weight: 1
jumpSize: 96
minAnchorPrice: 2069807889355437
jumpLog: 0.010362787035546658
anchorLog: 4.440892098500625e-16
23334921915903.87
maxTicks: 3412130444964135
maxTicks_: 23334921915903
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 9119
traces.length: 20
Opening: 8
Swapping: 4
Closing: 8
--- DONE ---
Opening: 8
Swapping: 4
Closing: 8
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(1m13s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(3m43s)[0m

