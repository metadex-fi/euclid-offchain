[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 10

trials left: 1 - iteration: 0 - block: 0
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 6197
maxTicks_: 1
1
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 6197
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1000
virtual: 1
weight: 47
jumpSize: 11
minAnchorPrice: 43
jumpLog: 0.08701137698962969
anchorLog: 0.02298951822469878
3.78482820471414
maxTicks: 9000
maxTicks_: 3
3
virtual: 4568
weight: 1
jumpSize: 100
minAnchorPrice: 4522
jumpLog: 0.009950330853168092
anchorLog: 0.00022111663992803443
45.00037110009708
maxTicks: 9000
maxTicks_: 45
3
virtual: 2
weight: 78
jumpSize: 100
minAnchorPrice: 154
jumpLog: 0.009950330853168092
anchorLog: 0.00647251450561752
1.537320749846472
maxTicks: 3000
maxTicks_: 1
1
virtual: 4568
weight: 1
jumpSize: 100
minAnchorPrice: 4522
jumpLog: 0.009950330853168092
anchorLog: 0.00022111663992803443
45.00037110009708
virtual: 4568
weight: 1
jumpSize: 100
minAnchorPrice: 4522
jumpLog: 0.009950330853168092
anchorLog: 0.00022111663992803443
45.00037110009708
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 2 - block: 2000
swappingsFor()

          buyable: 6197
          d: -56
          maxBuying: 56
          
swappingsFor()

          buyable: 3000
          d: -10
          maxBuying: 10
          

          buyable: 2784260
          d: -17955
          maxBuying: 17955
          

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        buyingAsset: Asset(, )
        sellingAsset: Asset(87c3747f9386eb6d0fa189f4c6f9892cf63d9377e2f91134f4157b95, 7SB1OiCzsaUJ8m2hPW3mE2wZQ4)
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        
not looping

          ---------------------------
          maxBuying:     17955
          maxSelling:    261
          maxBuyingA0:   2752824690
          maxSellingA0:  723197853
          maxSwapA0:     723197853
          spotBuying:    2770873
          spotSelling:   153318
          buyingAmount:  4716
          sellingAmount: 261
          ---------------------------
        
Swapping.boundary()
swappingsFor()

          buyable: 3000
          d: -10
          maxBuying: 10
          

          buyable: 2784260
          d: -8764
          maxBuying: 8764
          

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        buyingAsset: Asset(, )
        sellingAsset: Asset(87c3747f9386eb6d0fa189f4c6f9892cf63d9377e2f91134f4157b95, 7SB1OiCzsaUJ8m2hPW3mE2wZQ4)
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        
not looping

          ---------------------------
          maxBuying:     8764
          maxSelling:    261
          maxBuyingA0:   1343678952
          maxSellingA0:  725596704
          maxSwapA0:     725596704
          spotBuying:    2780064
          spotSelling:   153318
          buyingAmount:  4732
          sellingAmount: 261
          ---------------------------
        
Swapping.boundary()
swappingsFor()

          buyable: 3000
          d: -10
          maxBuying: 10
          

          buyable: 2784260
          d: -27189
          maxBuying: 27189
          

        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        buyingAsset: Asset(, )
        sellingAsset: Asset(87c3747f9386eb6d0fa189f4c6f9892cf63d9377e2f91134f4157b95, 7SB1OiCzsaUJ8m2hPW3mE2wZQ4)
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        
not looping

          ---------------------------
          maxBuying:     27189
          maxSelling:    261
          maxBuyingA0:   4168563102
          maxSellingA0:  720787779
          maxSwapA0:     720787779
          spotBuying:    2761639
          spotSelling:   153318
          buyingAmount:  4701
          sellingAmount: 261
          ---------------------------
        
Swapping.boundary()
subSwap: 261 sold
valueEquation: 
        addedBuyingA0  723201006 > 
        addedSellingA0 723197853
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: e7d976cb028bad67a485b94ca0306e9615da0690a88cb6d78ee02a2f, 
   +     +  virtual: +[
   +     +  +  87c3747f9386eb6d0fa189f4c6f9892cf63d9377e2f91134f4157b95_7SB1OiCzsaUJ8m2hPW3mE2wZQ4: 1,
   +     +  +  _: 4568,
   +     +  +  2d5decb982f3332753f4ce5cb2a87c60ab258dc46bbe8dda44ac446c_smCUSOo8DbqGZ26Q9it485qkLGlpq3aU: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  87c3747f9386eb6d0fa189f4c6f9892cf63d9377e2f91134f4157b95_7SB1OiCzsaUJ8m2hPW3mE2wZQ4: 47,
   +     +  +  _: 1,
   +     +  +  2d5decb982f3332753f4ce5cb2a87c60ab258dc46bbe8dda44ac446c_smCUSOo8DbqGZ26Q9it485qkLGlpq3aU: 78
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  87c3747f9386eb6d0fa189f4c6f9892cf63d9377e2f91134f4157b95_7SB1OiCzsaUJ8m2hPW3mE2wZQ4: 11,
   +     +  +  _: 100,
   +     +  +  2d5decb982f3332753f4ce5cb2a87c60ab258dc46bbe8dda44ac446c_smCUSOo8DbqGZ26Q9it485qkLGlpq3aU: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: e7d976cb028bad67a485b94ca0306e9615da0690a88cb6d78ee02a2f,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 769a701a7900af3ac724678f28163b0803ec839c172c77a5e85def638c74f974),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: fe62ccb213fad33bd1910a38b4747fdde2fc65e5a079b02fe96dffdeb0fa4f53),
   +     +  anchorPrices: +[
   +     +  +  87c3747f9386eb6d0fa189f4c6f9892cf63d9377e2f91134f4157b95_7SB1OiCzsaUJ8m2hPW3mE2wZQ4: 43,
   +     +  +  _: 4522,
   +     +  +  2d5decb982f3332753f4ce5cb2a87c60ab258dc46bbe8dda44ac446c_smCUSOo8DbqGZ26Q9it485qkLGlpq3aU: 154
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2784260,
   +  +  87c3747f9386eb6d0fa189f4c6f9892cf63d9377e2f91134f4157b95_7SB1OiCzsaUJ8m2hPW3mE2wZQ4: 3000
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(87c3747f9386eb6d0fa189f4c6f9892cf63d9377e2f91134f4157b95, 7SB1OiCzsaUJ8m2hPW3mE2wZQ4)
  boughtAmount: 4716
  soldAmount:   261
  boughtSpot:   2770873
  soldSpot:     153318
  (boughtA0:    723047688)
  (soldA0:      723197853)
  boughtExp:    645
  soldExp:      94
  spotPrice:    0.05533201990852702
  eff.Price:    0.05534351145038168
  maxBuying:    2784260
  (maxBuyingA0: 426877174680)
)

trials left: 1 - iteration: 3 - block: 2001

trials left: 1 - iteration: 4 - block: 2002
swappingsFor()

          buyable: 6197
          d: -56
          maxBuying: 56
          
virtual: 3137
weight: 1
jumpSize: 30
minAnchorPrice: 3035
jumpLog: 0.03278982282299097
anchorLog: 0.0003294350219218139
99.53350627904129
maxTicks: 1
maxTicks_: 99
1
virtual: 2
weight: 75
jumpSize: 100
minAnchorPrice: 148
jumpLog: 0.009950330853168092
anchorLog: 0.0067340321813441194
1.477618547878991
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 5 - block: 2003
swappingsFor()

          buyable: 6197
          d: -56
          maxBuying: 56
          
swappingsFor()

          buyable: 1
          d: -2
          maxBuying: 1
          
virtual: 2
weight: 57
jumpSize: 100
minAnchorPrice: 112
jumpLog: 0.009950330853168092
anchorLog: 0.008888947417245994
1.1194048503271425
maxTicks: 3132
maxTicks_: 1
1
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 3132
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 2004
swappingsFor()

          buyable: 6197
          d: -56
          maxBuying: 56
          
swappingsFor()

          buyable: 1
          d: -2
          maxBuying: 1
          
swappingsFor()

          buyable: 3132
          d: -4
          maxBuying: 4
          
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 327
maxTicks_: 3119
3
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 109
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 7 - block: 2005
virtual: 9000
weight: 1
jumpSize: 63
minAnchorPrice: 8859
jumpLog: 0.015748356968139112
anchorLog: 0.00011287318709418344
139.52256841120644
maxTicks: 1
maxTicks_: 139
1
virtual: 1
weight: 10
jumpSize: 9
minAnchorPrice: 9
jumpLog: 0.10536051565782635
anchorLog: 0.10536051565782635
1
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 3005
virtual: 1
weight: 64
jumpSize: 1
minAnchorPrice: 32
jumpLog: 0.6931471805599453
anchorLog: 0.030771658666753687
22.525505955544585
maxTicks: 9261
maxTicks_: 22
3
virtual: 2
weight: 84
jumpSize: 100
minAnchorPrice: 166
jumpLog: 0.009950330853168092
anchorLog: 0.006006024060211949
1.6567251068949183
maxTicks: 9261
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 9 - block: 4005
traces.length: 10
Opening: 7
Swapping: 1
Closing: 2
--- DONE ---
Opening: 7
Swapping: 1
Closing: 2
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(1s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(54s)[0m

