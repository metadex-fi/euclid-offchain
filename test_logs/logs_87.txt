[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 4777024263969040
maxTicks_: 1
1
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 4777024263969040
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1000
Swapping.boundary()
addedBuyingA0: 7237861061936690495488
addedSellingA0: 7237866044376072847360
diff: -4982439382351872
subSwap: 1 sold
subSwap: 70922 bought
addedBuyingA0: 1277617171089481269248
addedSellingA0: 1277617171089481269248
diff: 0
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 88c2ca5ab8d845d6fcc3b0987d4c6cd8c16d820715f0b66a8e163804, 
   +     +  virtual: +[
   +     +  +  abd9703a3732e6ea8f882673ba00e4ea52977b0a0bb7c07795cb4f4b_FH2IDZ8XiCbuDB5ajn6yzKwn2AyLlDlS: 1,
   +     +  +  _: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  abd9703a3732e6ea8f882673ba00e4ea52977b0a0bb7c07795cb4f4b_FH2IDZ8XiCbuDB5ajn6yzKwn2AyLlDlS: 2,
   +     +  +  _: 2
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  abd9703a3732e6ea8f882673ba00e4ea52977b0a0bb7c07795cb4f4b_FH2IDZ8XiCbuDB5ajn6yzKwn2AyLlDlS: 1,
   +     +  +  _: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 88c2ca5ab8d845d6fcc3b0987d4c6cd8c16d820715f0b66a8e163804,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3bd174b0e4ea6085f235fc64891abd47e7f5e5c36a0c93dc36cf12b837f79f3a),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: ffee2fe42c0dfa87f774a9d2db0e9c34eebf7de42be1c8663c08e0225408265d),
   +     +  anchorPrices: +[
   +     +  +  abd9703a3732e6ea8f882673ba00e4ea52977b0a0bb7c07795cb4f4b_FH2IDZ8XiCbuDB5ajn6yzKwn2AyLlDlS: 1,
   +     +  +  _: 1
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2555830,
   +  +  abd9703a3732e6ea8f882673ba00e4ea52977b0a0bb7c07795cb4f4b_FH2IDZ8XiCbuDB5ajn6yzKwn2AyLlDlS: 4777024263969040
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(abd9703a3732e6ea8f882673ba00e4ea52977b0a0bb7c07795cb4f4b, FH2IDZ8XiCbuDB5ajn6yzKwn2AyLlDlS)
  boughtAmount: 70922
  soldAmount: 304607670566912
  boughtSpot: 4194304
  soldSpot: 18014398509481984
  boughtExp: 22
  soldExp: 54
  spotPrice: 4294967296
  effectivePrice: 4294967296
)

trials left: 1 - iteration: 2 - block: 1001
Swapping.boundary()
addedBuyingA0: 5960243890847209226240
addedSellingA0: 5960248873286591578112
diff: -4982439382351872
subSwap: 1421034067460678 sold
addedBuyingA0: 5960243890847209226240
addedSellingA0: 5960243890847209226240
diff: 0
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 88c2ca5ab8d845d6fcc3b0987d4c6cd8c16d820715f0b66a8e163804, 
   +     +  virtual: +[
   +     +  +  abd9703a3732e6ea8f882673ba00e4ea52977b0a0bb7c07795cb4f4b_FH2IDZ8XiCbuDB5ajn6yzKwn2AyLlDlS: 1,
   +     +  +  _: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  abd9703a3732e6ea8f882673ba00e4ea52977b0a0bb7c07795cb4f4b_FH2IDZ8XiCbuDB5ajn6yzKwn2AyLlDlS: 2,
   +     +  +  _: 2
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  abd9703a3732e6ea8f882673ba00e4ea52977b0a0bb7c07795cb4f4b_FH2IDZ8XiCbuDB5ajn6yzKwn2AyLlDlS: 1,
   +     +  +  _: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 88c2ca5ab8d845d6fcc3b0987d4c6cd8c16d820715f0b66a8e163804,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3bd174b0e4ea6085f235fc64891abd47e7f5e5c36a0c93dc36cf12b837f79f3a),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: ffee2fe42c0dfa87f774a9d2db0e9c34eebf7de42be1c8663c08e0225408265d),
   +     +  anchorPrices: +[
   +     +  +  abd9703a3732e6ea8f882673ba00e4ea52977b0a0bb7c07795cb4f4b_FH2IDZ8XiCbuDB5ajn6yzKwn2AyLlDlS: 1,
   +     +  +  _: 1
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2555830,
   +  +  abd9703a3732e6ea8f882673ba00e4ea52977b0a0bb7c07795cb4f4b_FH2IDZ8XiCbuDB5ajn6yzKwn2AyLlDlS: 5081631934535952
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(abd9703a3732e6ea8f882673ba00e4ea52977b0a0bb7c07795cb4f4b, FH2IDZ8XiCbuDB5ajn6yzKwn2AyLlDlS)
  boughtAmount: 330860
  soldAmount: 1421032879554560
  boughtSpot: 4194304
  soldSpot: 18014398509481984
  boughtExp: 22
  soldExp: 54
  spotPrice: 4294967296
  effectivePrice: 4294967296
)

trials left: 1 - iteration: 3 - block: 2001
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 2820675552342374
weight: 3
jumpSize: 83
minAnchorPrice: 8361288244443465
jumpLog: 0.01197619104671562
anchorLog: 2.2204460492503128e-16
53935969535306.34
maxTicks: 1
maxTicks_: 53935969535306
1
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 4 - block: 3001
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1177738275701222
maxTicks_: 1
1
virtual: 6286012268407410
weight: 1
jumpSize: 1
minAnchorPrice: 3143006134203705
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1177738275701222
maxTicks_: 3121657384082680
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 5 - block: 3002

trials left: 1 - iteration: 6 - block: 4002
virtual: 9007199254740991
weight: 1
jumpSize: 68
minAnchorPrice: 8876660135107063
jumpLog: 0.014598799421152631
anchorLog: 2.2204460492503128e-16
65747147633159.61
maxTicks: 1
maxTicks_: 65747147633159
1
virtual: 1521680501577396
weight: 11
jumpSize: 1
minAnchorPrice: 8369242758675678
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 7 - block: 4003

trials left: 1 - iteration: 8 - block: 5003

trials left: 1 - iteration: 9 - block: 6003

trials left: 1 - iteration: 10 - block: 7003
virtual: 3263878762326052
weight: 1
jumpSize: 14
minAnchorPrice: 3046286844837648
jumpLog: 0.06899287148695142
anchorLog: 2.2204460492503128e-16
310716270319855
maxTicks: 4228509362553532
maxTicks_: 310716270319855
3
virtual: 9007199254740991
weight: 1
jumpSize: 16
minAnchorPrice: 8477364004462109
jumpLog: 0.06062462181643484
anchorLog: 2.2204460492503128e-16
273029024221973.22
maxTicks: 2114254681276766
maxTicks_: 273029024221973
3
virtual: 9007199254740991
weight: 1
jumpSize: 49
minAnchorPrice: 8827055269646171
jumpLog: 0.02020270731751947
anchorLog: 2.2204460492503128e-16
90984905147055.89
maxTicks: 2114254681276766
maxTicks_: 90984905147055
3
virtual: 3263878762326052
weight: 1
jumpSize: 14
minAnchorPrice: 3046286844837648
jumpLog: 0.06899287148695142
anchorLog: 2.2204460492503128e-16
310716270319855
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 11 - block: 7378

trials left: 1 - iteration: 12 - block: 7379
virtual: 1304622768442970
weight: 7
jumpSize: 11
minAnchorPrice: 8371329430842390
jumpLog: 0.08701137698962969
anchorLog: 2.2204460492503128e-16
391864404987490.06
maxTicks: 1
maxTicks_: 391864404987490
1
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
virtual: 1
weight: 6
jumpSize: 1
minAnchorPrice: 3
jumpLog: 0.6931471805599453
anchorLog: 0.28768207245178085
2.4094208396532095
maxTicks: 1
maxTicks_: 2
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 13 - block: 7380
Swapping.boundary()
addedBuyingA0: 28303118207223380
addedSellingA0: 28303118207223400
diff: -20
Swapping.boundary()
addedBuyingA0: 4311962844866523980506770391740
addedSellingA0: 4311962844866535775849660022784
diff: -11795342889631044
Swapping.boundary()
addedBuyingA0: 7117008522422800
addedSellingA0: 25944525023288098
diff: -18827516500865298
Swapping.boundary()
addedBuyingA0: 27021597764222800
addedSellingA0: 27021597764222976
diff: -176
Swapping.boundary()
addedBuyingA0: 480782353943639496087287365632
addedSellingA0: 480782353943663544809767697538
diff: -24048722480331906
subSwap: 4794466163870 sold
addedBuyingA0: 124390147361812130652141649920
addedSellingA0: 124390147361833309631888619260
diff: -21178979746969340
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 88c2ca5ab8d845d6fcc3b0987d4c6cd8c16d820715f0b66a8e163804, 
   +     +  virtual: +[
   +     +  +  0b71f9c73049ff560f974234fea069cc0aa072cc90fe24aca50b2cf1_: 1304622768442970,
   +     +  +  2d2635a2f0c74d753d4e4b6caa5f4ea030dedac2fe536fb310a97b7d_: 1,
   +     +  +  605f91ed57c2c582bd16fe9d5888b5506e1ebdc7d9ff45f5ba3252a6_: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  0b71f9c73049ff560f974234fea069cc0aa072cc90fe24aca50b2cf1_: 7,
   +     +  +  2d2635a2f0c74d753d4e4b6caa5f4ea030dedac2fe536fb310a97b7d_: 100,
   +     +  +  605f91ed57c2c582bd16fe9d5888b5506e1ebdc7d9ff45f5ba3252a6_: 6
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  0b71f9c73049ff560f974234fea069cc0aa072cc90fe24aca50b2cf1_: 11,
   +     +  +  2d2635a2f0c74d753d4e4b6caa5f4ea030dedac2fe536fb310a97b7d_: 1,
   +     +  +  605f91ed57c2c582bd16fe9d5888b5506e1ebdc7d9ff45f5ba3252a6_: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 88c2ca5ab8d845d6fcc3b0987d4c6cd8c16d820715f0b66a8e163804,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3bd174b0e4ea6085f235fc64891abd47e7f5e5c36a0c93dc36cf12b837f79f3a),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: ffee2fe42c0dfa87f774a9d2db0e9c34eebf7de42be1c8663c08e0225408265d),
   +     +  anchorPrices: +[
   +     +  +  0b71f9c73049ff560f974234fea069cc0aa072cc90fe24aca50b2cf1_: 8371329430842390,
   +     +  +  2d2635a2f0c74d753d4e4b6caa5f4ea030dedac2fe536fb310a97b7d_: 50,
   +     +  +  605f91ed57c2c582bd16fe9d5888b5506e1ebdc7d9ff45f5ba3252a6_: 3
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2900630,
   +  +  0b71f9c73049ff560f974234fea069cc0aa072cc90fe24aca50b2cf1_: 2419530470475673,
   +  +  2d2635a2f0c74d753d4e4b6caa5f4ea030dedac2fe536fb310a97b7d_: 1,
   +  +  605f91ed57c2c582bd16fe9d5888b5506e1ebdc7d9ff45f5ba3252a6_: 4084018465263888
   +  ]
     )
  boughtAsset: Asset(0b71f9c73049ff560f974234fea069cc0aa072cc90fe24aca50b2cf1, )
  soldAsset: Asset(605f91ed57c2c582bd16fe9d5888b5506e1ebdc7d9ff45f5ba3252a6, )
  boughtAmount: 4603360187920
  soldAmount: 4794466163870
  boughtSpot: 25944525023288098
  soldSpot: 27021597764222976
  boughtExp: 13
  soldExp: 53
  spotPrice: 1.0415144520845183
  effectivePrice: 1.0415144520846955
)

trials left: 1 - iteration: 14 - block: 7438

trials left: 1 - iteration: 15 - block: 7807
virtual: 9007199254740991
weight: 1
jumpSize: 45
minAnchorPrice: 8811390575290099
jumpLog: 0.021978906718775167
anchorLog: 2.2204460492503128e-16
98984196108686.75
maxTicks: 6502666001996630
maxTicks_: 98984196108686
3
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 3251333000998315
maxTicks_: 1
1
virtual: 1
weight: 92
jumpSize: 91
minAnchorPrice: 91
jumpLog: 0.01092907053219023
anchorLog: 0.01092907053219023
1
maxTicks: 3251333000998315
maxTicks_: 1
1
virtual: 9007199254740991
weight: 1
jumpSize: 45
minAnchorPrice: 8811390575290099
jumpLog: 0.021978906718775167
anchorLog: 2.2204460492503128e-16
98984196108686.75
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 16 - block: 8807
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 3901514841014458
weight: 1
jumpSize: 1
minAnchorPrice: 1950757420507229
jumpLog: 0.6931471805599453
anchorLog: 4.440892098500625e-16
1560828692041340
maxTicks: 1
maxTicks_: 1560828692041340
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 17 - block: 9807

trials left: 1 - iteration: 18 - block: 10650
virtual: 1
weight: 97
jumpSize: 96
minAnchorPrice: 96
jumpLog: 0.010362787035546658
anchorLog: 0.010362787035546658
1
maxTicks: 1
maxTicks_: 1
1
virtual: 5866414666754572
weight: 1
jumpSize: 100
minAnchorPrice: 5808331353222348
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 11481
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 754829275270195
maxTicks_: 35
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 251609758423398
maxTicks_: 44812306322540
3
virtual: 1
weight: 100
jumpSize: 15
minAnchorPrice: 93
jumpLog: 0.06453852113757116
anchorLog: 0.01069528911674795
6.034294204960678
maxTicks: 251609758423398
maxTicks_: 6
3
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
virtual: 1
weight: 100
jumpSize: 15
minAnchorPrice: 93
jumpLog: 0.06453852113757116
anchorLog: 0.01069528911674795
6.034294204960678
virtual: 1
weight: 100
jumpSize: 15
minAnchorPrice: 93
jumpLog: 0.06453852113757116
anchorLog: 0.01069528911674795
6.034294204960678
virtual: 1
weight: 100
jumpSize: 15
minAnchorPrice: 93
jumpLog: 0.06453852113757116
anchorLog: 0.01069528911674795
6.034294204960678
virtual: 1
weight: 100
jumpSize: 15
minAnchorPrice: 93
jumpLog: 0.06453852113757116
anchorLog: 0.01069528911674795
6.034294204960678
virtual: 1
weight: 100
jumpSize: 15
minAnchorPrice: 93
jumpLog: 0.06453852113757116
anchorLog: 0.01069528911674795
6.034294204960678
virtual: 1
weight: 100
jumpSize: 15
minAnchorPrice: 93
jumpLog: 0.06453852113757116
anchorLog: 0.01069528911674795
6.034294204960678
Opening pool with 9 dirac utxos and 1 param utxos
traces.length: 20
Opening: 10
Swapping: 3
Closing: 7
--- DONE ---
Opening: 10
Swapping: 3
Closing: 7
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(40s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(3m3s)[0m

