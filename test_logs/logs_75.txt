[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 5

trials left: 1 - iteration: 0 - block: 0

trials left: 1 - iteration: 1 - block: 1000

trials left: 1 - iteration: 2 - block: 1001

trials left: 1 - iteration: 3 - block: 1002

trials left: 1 - iteration: 4 - block: 1577

trials left: 1 - iteration: 5 - block: 2577

trials left: 1 - iteration: 6 - block: 3577

trials left: 1 - iteration: 7 - block: 3578

trials left: 1 - iteration: 8 - block: 4578

trials left: 1 - iteration: 9 - block: 5298

trials left: 1 - iteration: 10 - block: 6298

trials left: 1 - iteration: 11 - block: 6299

trials left: 1 - iteration: 12 - block: 6300

trials left: 1 - iteration: 13 - block: 7300

trials left: 1 - iteration: 14 - block: 8300

trials left: 1 - iteration: 15 - block: 8301

trials left: 1 - iteration: 16 - block: 8302

trials left: 1 - iteration: 17 - block: 8571

trials left: 1 - iteration: 18 - block: 8821

trials left: 1 - iteration: 19 - block: 8822
traces.length: 0
trials left: 1
accounts: 10

trials left: 1 - iteration: 0 - block: 0
virtual: 1
weight: 60
jumpSize: 59
minAnchorPrice: 59
jumpLog: 0.01680711831638119
anchorLog: 0.01680711831638119
1
maxTicks: 9007199254740991
maxTicks_: 1
1
virtual: 6514194108513878
weight: 1
jumpSize: 100
minAnchorPrice: 6449697137142453
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 9007199254740991
maxTicks_: 44812306322540
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 9007199254740991
maxTicks_: 44812306322540
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1
virtual: 9007199254740991
weight: 1
jumpSize: 49
minAnchorPrice: 8827055269646171
jumpLog: 0.02020270731751947
anchorLog: 2.2204460492503128e-16
90984905147055.89
maxTicks: 1937162001234568
maxTicks_: 90984905147055
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 645720667078189
maxTicks_: 3121657384082680
3
virtual: 4835871648068512
weight: 1
jumpSize: 41
minAnchorPrice: 4720731846924023
jumpLog: 0.024097551579060524
anchorLog: 2.2204460492503128e-16
108525724311998.3
maxTicks: 215240222359396
maxTicks_: 108525724311998
3
virtual: 9007199254740991
weight: 1
jumpSize: 49
minAnchorPrice: 8827055269646171
jumpLog: 0.02020270731751947
anchorLog: 2.2204460492503128e-16
90984905147055.89
virtual: 9007199254740991
weight: 1
jumpSize: 49
minAnchorPrice: 8827055269646171
jumpLog: 0.02020270731751947
anchorLog: 2.2204460492503128e-16
90984905147055.89
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
Opening pool with 9 dirac utxos and 1 param utxos

trials left: 1 - iteration: 2 - block: 319
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 9007199254740991
maxTicks_: 3121657384082680
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 9007199254740991
maxTicks_: 3121657384082680
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 3 - block: 1319
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 4 - block: 1707

trials left: 1 - iteration: 5 - block: 1708
virtual: 8453973253887873
weight: 1
jumpSize: 100
minAnchorPrice: 8370270548403834
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 3904076328996684
maxTicks_: 44812306322540
3
virtual: 3684151142559568
weight: 2
jumpSize: 25
minAnchorPrice: 7084906043383784
jumpLog: 0.03922071315328133
anchorLog: 2.2204460492503128e-16
176634389142322.94
maxTicks: 1301358776332228
maxTicks_: 176634389142322
3
virtual: 8453973253887873
weight: 1
jumpSize: 100
minAnchorPrice: 8370270548403834
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 8453973253887873
weight: 1
jumpSize: 100
minAnchorPrice: 8370270548403834
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 3684151142559568
weight: 2
jumpSize: 25
minAnchorPrice: 7084906043383784
jumpLog: 0.03922071315328133
anchorLog: 2.2204460492503128e-16
176634389142322.94
virtual: 3684151142559568
weight: 2
jumpSize: 25
minAnchorPrice: 7084906043383784
jumpLog: 0.03922071315328133
anchorLog: 2.2204460492503128e-16
176634389142322.94
virtual: 3684151142559568
weight: 2
jumpSize: 25
minAnchorPrice: 7084906043383784
jumpLog: 0.03922071315328133
anchorLog: 2.2204460492503128e-16
176634389142322.94
virtual: 3684151142559568
weight: 2
jumpSize: 25
minAnchorPrice: 7084906043383784
jumpLog: 0.03922071315328133
anchorLog: 2.2204460492503128e-16
176634389142322.94
virtual: 3684151142559568
weight: 2
jumpSize: 25
minAnchorPrice: 7084906043383784
jumpLog: 0.03922071315328133
anchorLog: 2.2204460492503128e-16
176634389142322.94
virtual: 3684151142559568
weight: 2
jumpSize: 25
minAnchorPrice: 7084906043383784
jumpLog: 0.03922071315328133
anchorLog: 2.2204460492503128e-16
176634389142322.94
Opening pool with 9 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 1709
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1
maxTicks_: 1
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 7 - block: 2709

trials left: 1 - iteration: 8 - block: 2842
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  9007199257370091 > 
        spotBuying 18014398509481980
boughtAssetForSale (old):
        sellingAmm  18014398509481982 > 
        spotSelling 18014398509481980
subSwap: 10516400 sold
boughtAssetForSale (old): 
        buyingAmm  9007199257370091 > 
        spotBuying 18014398509481980
boughtAssetForSale (old):
        sellingAmm  18014398509481982 > 
        spotSelling 18014398509481980
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: d0b320f667340f14dd9f599d9c080e191f460c6e4bce286e03af9384, 
   +     +  virtual: +[
   +     +  +  39c7a8ce3b761b429b95e91bcf72d96032758e168e65b583b789f6eb_sPHIdMIAqMVsbDBwo11pbglQzMuIsrai: 9007199254740991,
   +     +  +  _: 9007199254740991
   +     +  ], 
   +     +  weights: +[
   +     +  +  39c7a8ce3b761b429b95e91bcf72d96032758e168e65b583b789f6eb_sPHIdMIAqMVsbDBwo11pbglQzMuIsrai: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  39c7a8ce3b761b429b95e91bcf72d96032758e168e65b583b789f6eb_sPHIdMIAqMVsbDBwo11pbglQzMuIsrai: 1,
   +     +  +  _: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: d0b320f667340f14dd9f599d9c080e191f460c6e4bce286e03af9384,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: b20a28cae85189e46c52974bbd5b1aa34bca331380483afbbf56abecffba4122),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 43aa2d7baf5c5fd995a9fde28ea540e2915d98220e3e116f0e3abc99f6795fd0),
   +     +  anchorPrices: +[
   +     +  +  39c7a8ce3b761b429b95e91bcf72d96032758e168e65b583b789f6eb_sPHIdMIAqMVsbDBwo11pbglQzMuIsrai: 4503599627370495,
   +     +  +  _: 4503599627370495
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2629100,
   +  +  39c7a8ce3b761b429b95e91bcf72d96032758e168e65b583b789f6eb_sPHIdMIAqMVsbDBwo11pbglQzMuIsrai: 9007199254740991
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(39c7a8ce3b761b429b95e91bcf72d96032758e168e65b583b789f6eb, sPHIdMIAqMVsbDBwo11pbglQzMuIsrai)
  boughtAmount: 2629100
  soldAmount: 10516400
  boughtSpot: 9007199254740990
  soldSpot: 36028797018963960
  boughtExp: 1
  soldExp: 3
  spotPrice: 4
  effectivePrice: 4
)

trials left: 1 - iteration: 9 - block: 3842
virtual: 9007199254740991
weight: 1
jumpSize: 44
minAnchorPrice: 8807039271302302
jumpLog: 0.022472855852058576
anchorLog: 2.2204460492503128e-16
101208745241281.89
maxTicks: 1
maxTicks_: 101208745241281
1
virtual: 2922804548740708
weight: 5
jumpSize: 1
minAnchorPrice: 7307011371851770
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 10 - block: 3843
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 139750554676786
maxTicks_: 3121657384082680
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 46583518225595
maxTicks_: 44812306322540
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
Opening pool with 6 dirac utxos and 1 param utxos

trials left: 1 - iteration: 11 - block: 4459

trials left: 1 - iteration: 12 - block: 5031

trials left: 1 - iteration: 13 - block: 6031
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  9007199257370091 > 
        spotBuying 18014398509481980
boughtAssetForSale (old):
        sellingAmm  18014398519998382 > 
        spotSelling 18014398509481980
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  9007199257370091 > 
        spotBuying 9097271247288400
boughtAssetForSale (old):
        sellingAmm  9030491013853788 > 
        spotSelling 9007199254740990
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  9007199257370091 > 
        spotBuying 9097271247288400
boughtAssetForSale (old):
        sellingAmm  9030491013853788 > 
        spotSelling 5674179970822794
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  9007199257370091 > 
        spotBuying 9097271247288400
boughtAssetForSale (old):
        sellingAmm  9030491013853788 > 
        spotSelling 7149018786131515
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  9007199257370091 > 
        spotBuying 9052123220479972
boughtAssetForSale (old):
        sellingAmm  9030491013853788 > 
        spotSelling 9007199254740990
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  9007199257370091 > 
        spotBuying 9052123220479972
boughtAssetForSale (old):
        sellingAmm  9030491013853788 > 
        spotSelling 5674179970822794
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  9007199257370091 > 
        spotBuying 9052123220479972
boughtAssetForSale (old):
        sellingAmm  9030491013853788 > 
        spotSelling 7149018786131515
subSwap: 5284426 sold
boughtAssetForSale (old): 
        buyingAmm  9007199257370091 > 
        spotBuying 9052123220479972
boughtAssetForSale (old):
        sellingAmm  9030491013853788 > 
        spotSelling 9007199254740990
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 59bffb8e5ce6b37c9c8747ecb5160b745f59561c34d25b8effe2eb50, 
   +     +  virtual: +[
   +     +  +  39c7a8ce3b761b429b95e91bcf72d96032758e168e65b583b789f6eb_sPHIdMIAqMVsbDBwo11pbglQzMuIsrai: 9007199254740991,
   +     +  +  _: 9007199254740991
   +     +  ], 
   +     +  weights: +[
   +     +  +  39c7a8ce3b761b429b95e91bcf72d96032758e168e65b583b789f6eb_sPHIdMIAqMVsbDBwo11pbglQzMuIsrai: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  39c7a8ce3b761b429b95e91bcf72d96032758e168e65b583b789f6eb_sPHIdMIAqMVsbDBwo11pbglQzMuIsrai: 1,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 59bffb8e5ce6b37c9c8747ecb5160b745f59561c34d25b8effe2eb50,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: a8ce7f5dff5a55f7571298d8c6d8abb05897d649695fd6c8c279a388118d1ecb),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: dad3d74480f6d668fbc25d34c0621e83b36c6782f244fcfa853ccb223bf375f4),
   +     +  anchorPrices: +[
   +     +  +  39c7a8ce3b761b429b95e91bcf72d96032758e168e65b583b789f6eb_sPHIdMIAqMVsbDBwo11pbglQzMuIsrai: 4503599627370495,
   +     +  +  _: 8962498238098983
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2629100,
   +  +  39c7a8ce3b761b429b95e91bcf72d96032758e168e65b583b789f6eb_sPHIdMIAqMVsbDBwo11pbglQzMuIsrai: 23291759112797
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(39c7a8ce3b761b429b95e91bcf72d96032758e168e65b583b789f6eb, sPHIdMIAqMVsbDBwo11pbglQzMuIsrai)
  boughtAmount: 2629100
  soldAmount: 5284426
  boughtSpot: 8962498238098983
  soldSpot: 18014398509481980
  boughtExp: 0
  soldExp: 2
  spotPrice: 2.009975124224178
  effectivePrice: 2.0099752767106613
)

trials left: 1 - iteration: 14 - block: 7031

trials left: 1 - iteration: 15 - block: 7241
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1
maxTicks_: 1
1
virtual: 2
weight: 62
jumpSize: 100
minAnchorPrice: 122
jumpLog: 0.009950330853168092
anchorLog: 0.008163310639160835
1.2189087605504814
maxTicks: 1
maxTicks_: 1
1
virtual: 1438976359473695
weight: 6
jumpSize: 100
minAnchorPrice: 8548374412715019
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 16 - block: 8241

trials left: 1 - iteration: 17 - block: 9241

trials left: 1 - iteration: 18 - block: 9959
virtual: 1
weight: 87
jumpSize: 15
minAnchorPrice: 81
jumpLog: 0.06453852113757116
anchorLog: 0.012270092591814401
5.2598234817417735
maxTicks: 8549494876838133
maxTicks_: 5
3
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 8549494876838133
maxTicks_: 1
1
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 8549494876838133
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 9960
virtual: 1860617712927790
weight: 5
jumpSize: 10
minAnchorPrice: 8457353240580863
jumpLog: 0.09531017980432493
anchorLog: 2.2204460492503128e-16
429238890251372.8
maxTicks: 1
maxTicks_: 429238890251372
1
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos
traces.length: 20
Opening: 11
Closing: 7
Swapping: 2
--- DONE ---
Opening: 11
Closing: 7
Swapping: 2
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(1m49s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(4m15s)[0m

