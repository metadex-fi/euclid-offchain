[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 2

trials left: 1 - iteration: 0 - block: 0
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 1
maxTicks_: 3119
1
virtual: 1381
weight: 6
jumpSize: 100
minAnchorPrice: 8203
jumpLog: 0.009950330853168092
anchorLog: 0.00012189918952138432
81.62753905285435
maxTicks: 1
maxTicks_: 81
1
virtual: 9000
weight: 1
jumpSize: 54
minAnchorPrice: 8836
jumpLog: 0.018349138668196617
anchorLog: 0.00011316697799663418
162.1421636684719
maxTicks: 1
maxTicks_: 162
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1000
virtual: 797
weight: 8
jumpSize: 17
minAnchorPrice: 6021
jumpLog: 0.05715841383994862
anchorLog: 0.00016607157723131554
344.17938814620027
maxTicks: 1
maxTicks_: 344
1
virtual: 1
weight: 100
jumpSize: 87
minAnchorPrice: 98
jumpLog: 0.01142869582362285
anchorLog: 0.010152371464017908
1.1257168696130258
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 2 - block: 1339

trials left: 1 - iteration: 3 - block: 2339
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 7439
maxTicks_: 3119
3
virtual: 9000
weight: 1
jumpSize: 43
minAnchorPrice: 8795
jumpLog: 0.02298951822469878
anchorLog: 0.00011369450299328453
202.20430732747633
maxTicks: 2479
maxTicks_: 202
3
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 4 - block: 3339
virtual: 1
weight: 100
jumpSize: 61
minAnchorPrice: 98
jumpLog: 0.016260520871780326
anchorLog: 0.010152371464017908
1.6016475489900026
maxTicks: 1
maxTicks_: 1
1
virtual: 5711
weight: 2
jumpSize: 1
minAnchorPrice: 5711
jumpLog: 0.6931471805599453
anchorLog: 0.00017508535455745973
3958.9101116533843
maxTicks: 1
maxTicks_: 3958
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 5 - block: 3340

trials left: 1 - iteration: 6 - block: 4340

trials left: 1 - iteration: 7 - block: 4805
virtual: 9000
weight: 1
jumpSize: 9
minAnchorPrice: 8100
jumpLog: 0.10536051565782635
anchorLog: 0.000123449169961031
853.4728560028822
maxTicks: 1293
maxTicks_: 853
3
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 646
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 9
minAnchorPrice: 8100
jumpLog: 0.10536051565782635
anchorLog: 0.000123449169961031
853.4728560028822
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 5353
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 363
maxTicks_: 3119
3
virtual: 2
weight: 94
jumpSize: 100
minAnchorPrice: 186
jumpLog: 0.009950330853168092
anchorLog: 0.005361943141385373
1.855732258025625
maxTicks: 121
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 9 - block: 6353

trials left: 1 - iteration: 10 - block: 7353

trials left: 1 - iteration: 11 - block: 8092

trials left: 1 - iteration: 12 - block: 8093
virtual: 1894
weight: 1
jumpSize: 62
minAnchorPrice: 1863
jumpLog: 0.01600034134644112
anchorLog: 0.0005366246439480395
29.81663538357811
maxTicks: 1
maxTicks_: 29
1
virtual: 9000
weight: 1
jumpSize: 28
minAnchorPrice: 8689
jumpLog: 0.03509131981127019
anchorLog: 0.00011508142023171827
304.92602316354163
maxTicks: 1
maxTicks_: 304
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 13 - block: 8094
virtual: 6549
weight: 1
jumpSize: 1
minAnchorPrice: 3274
jumpLog: 0.6931471805599453
anchorLog: 0.0003053901382720288
2269.7104251039
maxTicks: 1293
maxTicks_: 2269
3
virtual: 2
weight: 63
jumpSize: 100
minAnchorPrice: 124
jumpLog: 0.009950330853168092
anchorLog: 0.008032171697264253
1.2388095309961018
maxTicks: 1293
maxTicks_: 1
1
virtual: 1
weight: 100
jumpSize: 58
minAnchorPrice: 98
jumpLog: 0.01709443335930004
anchorLog: 0.010152371464017908
1.6837872234961286
maxTicks: 1293
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 14 - block: 9094
Swapping.boundary()
valueEquation: 
        addedBuyingA0  66762714 > 
        addedSellingA0 66760932
valueEquation: 
        addedBuyingA0  66760791 > 
        addedSellingA0 64376613
Swapping.boundary()
boughtAssetForSale (new): 
        buyingAmm  254435400 > 
        spotBuying 254435494
valueEquation: 
        addedBuyingA0  488952256 > 
        addedSellingA0 254435494
valueEquation: 
        addedBuyingA0  26225874 > 
        addedSellingA0 23843190
valueEquation: 
        addedBuyingA0  26227797 > 
        addedSellingA0 26227509
subSwap: 11 sold
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: fb8a58f5c78da6d3df09698722f2e45588b2b979ee78b4b5556177c1, 
   +     +  virtual: +[
   +     +  +  c80e963f0f5e0ca537acdf43ebe7cfa7bc974cff9cf46075c415d404_Jg51a2nlr28scU17l4ZC: 1894,
   +     +  +  _: 9000
   +     +  ], 
   +     +  weights: +[
   +     +  +  c80e963f0f5e0ca537acdf43ebe7cfa7bc974cff9cf46075c415d404_Jg51a2nlr28scU17l4ZC: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  c80e963f0f5e0ca537acdf43ebe7cfa7bc974cff9cf46075c415d404_Jg51a2nlr28scU17l4ZC: 62,
   +     +  +  _: 28
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: fb8a58f5c78da6d3df09698722f2e45588b2b979ee78b4b5556177c1,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: af20b722f7c8be7045de6aa741b3eb16016ef761e2c23536f9c6301c2a148027),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 92a7577ea980ce0e6fbf625c63797ef34515ffef05f9d864779fdf4c60c870cf),
   +     +  anchorPrices: +[
   +     +  +  c80e963f0f5e0ca537acdf43ebe7cfa7bc974cff9cf46075c415d404_Jg51a2nlr28scU17l4ZC: 1863,
   +     +  +  _: 8689
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2426530,
   +  +  c80e963f0f5e0ca537acdf43ebe7cfa7bc974cff9cf46075c415d404_Jg51a2nlr28scU17l4ZC: 1
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(c80e963f0f5e0ca537acdf43ebe7cfa7bc974cff9cf46075c415d404, Jg51a2nlr28scU17l4ZC)
  boughtAmount: 13638
  soldAmount:   11
  boughtSpot:   2384319
  soldSpot:     1923
  (boughtA0:    26225874)
  (soldA0:      26227509)
  boughtExp:    160
  soldExp:      2
  spotPrice:    0.0008065195974196406
  eff.Price:    0.0008065698782812729
  maxBuying:    2426530
  (maxBuyingA0: 4666217190)
)

trials left: 1 - iteration: 15 - block: 9814

trials left: 1 - iteration: 16 - block: 9815
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
virtual: 7848
weight: 1
jumpSize: 84
minAnchorPrice: 7755
jumpLog: 0.011834457647002798
anchorLog: 0.0001289407519032372
91.7821361541609
maxTicks: 1
maxTicks_: 91
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 17 - block: 10815
Swapping.boundary()
valueEquation: 
        addedBuyingA0  40534917 > 
        addedSellingA0 40533423
valueEquation: 
        addedBuyingA0  40532994 > 
        addedSellingA0 38149104
subSwap: 21078 bought
valueEquation: 
        addedBuyingA0  40532994 > 
        addedSellingA0 38149104
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: fb8a58f5c78da6d3df09698722f2e45588b2b979ee78b4b5556177c1, 
   +     +  virtual: +[
   +     +  +  c80e963f0f5e0ca537acdf43ebe7cfa7bc974cff9cf46075c415d404_Jg51a2nlr28scU17l4ZC: 1894,
   +     +  +  _: 9000
   +     +  ], 
   +     +  weights: +[
   +     +  +  c80e963f0f5e0ca537acdf43ebe7cfa7bc974cff9cf46075c415d404_Jg51a2nlr28scU17l4ZC: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  c80e963f0f5e0ca537acdf43ebe7cfa7bc974cff9cf46075c415d404_Jg51a2nlr28scU17l4ZC: 62,
   +     +  +  _: 28
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: fb8a58f5c78da6d3df09698722f2e45588b2b979ee78b4b5556177c1,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: af20b722f7c8be7045de6aa741b3eb16016ef761e2c23536f9c6301c2a148027),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 92a7577ea980ce0e6fbf625c63797ef34515ffef05f9d864779fdf4c60c870cf),
   +     +  anchorPrices: +[
   +     +  +  c80e963f0f5e0ca537acdf43ebe7cfa7bc974cff9cf46075c415d404_Jg51a2nlr28scU17l4ZC: 1863,
   +     +  +  _: 8689
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2426530,
   +  +  c80e963f0f5e0ca537acdf43ebe7cfa7bc974cff9cf46075c415d404_Jg51a2nlr28scU17l4ZC: 12
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(c80e963f0f5e0ca537acdf43ebe7cfa7bc974cff9cf46075c415d404, Jg51a2nlr28scU17l4ZC)
  boughtAmount: 21078
  soldAmount:   17
  boughtSpot:   2384319
  soldSpot:     1923
  (boughtA0:    40532994)
  (soldA0:      40533423)
  boughtExp:    160
  soldExp:      2
  spotPrice:    0.0008065195974196406
  eff.Price:    0.0008065281335990132
  maxBuying:    21078
  (maxBuyingA0: 40532994)
)

trials left: 1 - iteration: 18 - block: 11815
virtual: 1
weight: 100
jumpSize: 99
minAnchorPrice: 99
jumpLog: 0.010050335853501506
anchorLog: 0.010050335853501506
1
maxTicks: 227
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 227
maxTicks_: 88
3
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 12045
traces.length: 20
Opening: 10
Closing: 8
Swapping: 2
--- DONE ---
Opening: 10
Closing: 8
Swapping: 2
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(3s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(32s)[0m

