[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 10

trials left: 1 - iteration: 0 - block: 0

trials left: 1 - iteration: 1 - block: 1000

trials left: 1 - iteration: 2 - block: 1603

trials left: 1 - iteration: 3 - block: 1604

trials left: 1 - iteration: 4 - block: 2155

trials left: 1 - iteration: 5 - block: 3155

trials left: 1 - iteration: 6 - block: 3156

trials left: 1 - iteration: 7 - block: 4156

trials left: 1 - iteration: 8 - block: 5156

trials left: 1 - iteration: 9 - block: 5157

trials left: 1 - iteration: 10 - block: 5158

trials left: 1 - iteration: 11 - block: 5159

trials left: 1 - iteration: 12 - block: 6056

trials left: 1 - iteration: 13 - block: 6057

trials left: 1 - iteration: 14 - block: 6058

trials left: 1 - iteration: 15 - block: 6084

trials left: 1 - iteration: 16 - block: 6510

trials left: 1 - iteration: 17 - block: 6832

trials left: 1 - iteration: 18 - block: 6833

trials left: 1 - iteration: 19 - block: 6834
traces.length: 0
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
virtual: 8325
weight: 1
jumpSize: 1
minAnchorPrice: 4162
jumpLog: 0.6931471805599453
anchorLog: 0.00024024024139577326
2885.22512520311
maxTicks: 1
maxTicks_: 2885
1
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 1
maxTicks_: 3119
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 483
virtual: 1
weight: 75
jumpSize: 1
minAnchorPrice: 37
jumpLog: 0.6931471805599453
anchorLog: 0.026668247082161273
25.991478870900373
maxTicks: 14
maxTicks_: 25
3
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 14
maxTicks_: 3119
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 2 - block: 500

          maxBuying: 121
          maxSelling: 25
          maxBuyingA0: 2178000
          maxSellingA0: 236800
          maxSwapA0: 236800
          spotBuying: 9472
          spotSelling: 18000
          buyingAmount: 13
          sellingAmount: 25
        
Swapping.boundary()
valueEquation: 
        addedBuyingA0  252000 > 
        addedSellingA0 236800
valueEquation: 
        addedBuyingA0  234000 > 
        addedSellingA0 227328
subSwap: 10 sold
valueEquation: 
        addedBuyingA0  108000 > 
        addedSellingA0 94720
valueEquation: 
        addedBuyingA0  90000 > 
        addedSellingA0 85248
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 6658d7cd20c6e7e3468e4fd7487ea27762388f3f64f70aa2cd2da8dd, 
   +     +  virtual: +[
   +     +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 1,
   +     +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 9000
   +     +  ], 
   +     +  weights: +[
   +     +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 75,
   +     +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 1,
   +     +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 6658d7cd20c6e7e3468e4fd7487ea27762388f3f64f70aa2cd2da8dd,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 7ff3a613d29110f5457117a32e9cd4ef9cb9eaa3efabe269a461d894db042167),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 268729e7e44a29817fd80a158a47e629883b4ee1fbfd3091933a399453beef4c),
   +     +  anchorPrices: +[
   +     +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 37,
   +     +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 4500
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3094580,
   +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 247,
   +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 14
   +  ]
     )
  boughtAsset:  Asset(73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268, DSPr8elURghcnRAO7rEnd4kGobadmQYv)
  soldAsset:    Asset(87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16, ko4kDABqJXqoipqTT3beLiaMPmMqHLfX)
  boughtAmount: 5
  soldAmount:   10
  boughtSpot:   9472
  soldSpot:     18000
  (boughtA0:    90000)
  (soldA0:      94720)
  boughtExp:    8
  soldExp:      2
  spotPrice:    1.900337837837838
  eff.Price:    2
  maxBuying:    247
  (maxBuyingA0: 4446000)
)

trials left: 1 - iteration: 3 - block: 1463

          maxBuying: 120
          maxSelling: 5
          maxBuyingA0: 2160000
          maxSellingA0: 89400
          maxSwapA0: 89400
          spotBuying: 17880
          spotSelling: 18000
          buyingAmount: 4
          sellingAmount: 5
        
Swapping.boundary()
valueEquation: 
        addedBuyingA0  90000 > 
        addedSellingA0 89400
valueEquation: 
        addedBuyingA0  72000 > 
        addedSellingA0 71520

          maxBuying: 1
          maxSelling: 5
          maxBuyingA0: 18000
          maxSellingA0: 41620
          maxSwapA0: 18000
          spotBuying: 8324
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 3
        
Swapping.boundary()
valueEquation: 
        addedBuyingA0  18000 > 
        addedSellingA0 16648

          maxBuying: 24
          maxSelling: 5
          maxBuyingA0: 454656
          maxSellingA0: 45000
          maxSwapA0: 45000
          spotBuying: 9000
          spotSelling: 18944
          buyingAmount: 2
          sellingAmount: 5
        
Swapping.boundary()
valueEquation: 
        addedBuyingA0  56832 > 
        addedSellingA0 45000
valueEquation: 
        addedBuyingA0  37888 > 
        addedSellingA0 36000

          maxBuying: 116
          maxSelling: 15
          maxBuyingA0: 2088000
          maxSellingA0: 142080
          maxSwapA0: 142080
          spotBuying: 9472
          spotSelling: 18000
          buyingAmount: 7
          sellingAmount: 14
        
Swapping.boundary()
valueEquation: 
        addedBuyingA0  144000 > 
        addedSellingA0 132608
valueEquation: 
        addedBuyingA0  126000 > 
        addedSellingA0 123136
subSwap: 5 sold
valueEquation: 
        addedBuyingA0  56832 > 
        addedSellingA0 45000
valueEquation: 
        addedBuyingA0  37888 > 
        addedSellingA0 36000
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 6658d7cd20c6e7e3468e4fd7487ea27762388f3f64f70aa2cd2da8dd, 
   +     +  virtual: +[
   +     +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 1,
   +     +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 9000
   +     +  ], 
   +     +  weights: +[
   +     +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 75,
   +     +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 1,
   +     +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 6658d7cd20c6e7e3468e4fd7487ea27762388f3f64f70aa2cd2da8dd,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 7ff3a613d29110f5457117a32e9cd4ef9cb9eaa3efabe269a461d894db042167),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 268729e7e44a29817fd80a158a47e629883b4ee1fbfd3091933a399453beef4c),
   +     +  anchorPrices: +[
   +     +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 37,
   +     +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 4500
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3098890,
   +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 242,
   +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 24
   +  ]
     )
  boughtAsset:  Asset(87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16, ko4kDABqJXqoipqTT3beLiaMPmMqHLfX)
  soldAsset:    Asset(73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268, DSPr8elURghcnRAO7rEnd4kGobadmQYv)
  boughtAmount: 2
  soldAmount:   5
  boughtSpot:   9000
  soldSpot:     18944
  (boughtA0:    37888)
  (soldA0:      45000)
  boughtExp:    1
  soldExp:      9
  spotPrice:    2.104888888888889
  eff.Price:    2.5
  maxBuying:    24
  (maxBuyingA0: 454656)
)

trials left: 1 - iteration: 4 - block: 2463
virtual: 4966
weight: 1
jumpSize: 100
minAnchorPrice: 4916
jumpLog: 0.009950330853168092
anchorLog: 0.00020339672601391723
48.920801470950174
maxTicks: 17
maxTicks_: 48
3
virtual: 1
weight: 100
jumpSize: 30
minAnchorPrice: 96
jumpLog: 0.03278982282299097
anchorLog: 0.010362787035546658
3.164189586306715
maxTicks: 8
maxTicks_: 3
3
virtual: 4966
weight: 1
jumpSize: 100
minAnchorPrice: 4916
jumpLog: 0.009950330853168092
anchorLog: 0.00020339672601391723
48.920801470950174
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 5 - block: 2752
virtual: 2817
weight: 6
jumpSize: 1
minAnchorPrice: 8451
jumpLog: 0.6931471805599453
anchorLog: 0.00011832219146505764
5858.133389666318
maxTicks: 1
maxTicks_: 5858
1
virtual: 7489
weight: 1
jumpSize: 1
minAnchorPrice: 3744
jumpLog: 0.6931471805599453
anchorLog: 0.0002670583538372971
2595.4896021797504
maxTicks: 1
maxTicks_: 2595
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 3606

trials left: 1 - iteration: 7 - block: 3617
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 1
maxTicks_: 1
1
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 4617

trials left: 1 - iteration: 9 - block: 4618
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
virtual: 1
weight: 97
jumpSize: 1
minAnchorPrice: 48
jumpLog: 0.6931471805599453
anchorLog: 0.02061928720273561
33.61644724886435
maxTicks: 1
maxTicks_: 33
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 10 - block: 4619
virtual: 2
weight: 63
jumpSize: 100
minAnchorPrice: 124
jumpLog: 0.009950330853168092
anchorLog: 0.008032171697264253
1.2388095309961018
maxTicks: 1
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 11 - block: 4620

trials left: 1 - iteration: 12 - block: 4621

trials left: 1 - iteration: 13 - block: 4622

trials left: 1 - iteration: 14 - block: 5622
virtual: 1
weight: 100
jumpSize: 58
minAnchorPrice: 98
jumpLog: 0.01709443335930004
anchorLog: 0.010152371464017908
1.6837872234961286
maxTicks: 1
maxTicks_: 1
1
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1
maxTicks_: 1
1
virtual: 1
weight: 97
jumpSize: 96
minAnchorPrice: 96
jumpLog: 0.010362787035546658
anchorLog: 0.010362787035546658
1
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 15 - block: 6322

          maxBuying: 22
          maxSelling: 4
          maxBuyingA0: 416768
          maxSellingA0: 36000
          maxSwapA0: 36000
          spotBuying: 9000
          spotSelling: 18944
          buyingAmount: 1
          sellingAmount: 3
        
Swapping.boundary()
valueEquation: 
        addedBuyingA0  37888 > 
        addedSellingA0 27000
valueEquation: 
        addedBuyingA0  18944 > 
        addedSellingA0 18000
subSwap: 3 sold
valueEquation: 
        addedBuyingA0  37888 > 
        addedSellingA0 27000
valueEquation: 
        addedBuyingA0  18944 > 
        addedSellingA0 18000
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 6658d7cd20c6e7e3468e4fd7487ea27762388f3f64f70aa2cd2da8dd, 
   +     +  virtual: +[
   +     +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 1,
   +     +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 9000
   +     +  ], 
   +     +  weights: +[
   +     +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 75,
   +     +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 1,
   +     +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 6658d7cd20c6e7e3468e4fd7487ea27762388f3f64f70aa2cd2da8dd,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 7ff3a613d29110f5457117a32e9cd4ef9cb9eaa3efabe269a461d894db042167),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 268729e7e44a29817fd80a158a47e629883b4ee1fbfd3091933a399453beef4c),
   +     +  anchorPrices: +[
   +     +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 37,
   +     +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 4500
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3098890,
   +  +  73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268_DSPr8elURghcnRAO7rEnd4kGobadmQYv: 247,
   +  +  87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16_ko4kDABqJXqoipqTT3beLiaMPmMqHLfX: 22
   +  ]
     )
  boughtAsset:  Asset(87789aaa2b73b4d968a0a468ad2baddeee198fbd9d10e9919d282b16, ko4kDABqJXqoipqTT3beLiaMPmMqHLfX)
  soldAsset:    Asset(73fc710efdaad3889a9e1a9c8357c718c326fa3cffc43f2d57fc5268, DSPr8elURghcnRAO7rEnd4kGobadmQYv)
  boughtAmount: 1
  soldAmount:   3
  boughtSpot:   9000
  soldSpot:     18944
  (boughtA0:    18944)
  (soldA0:      27000)
  boughtExp:    1
  soldExp:      9
  spotPrice:    2.104888888888889
  eff.Price:    3
  maxBuying:    22
  (maxBuyingA0: 416768)
)

trials left: 1 - iteration: 16 - block: 7261

trials left: 1 - iteration: 17 - block: 8261
virtual: 1
weight: 80
jumpSize: 74
minAnchorPrice: 78
jumpLog: 0.01342302033214077
anchorLog: 0.012739025777429712
1.0536928464280935
maxTicks: 1
maxTicks_: 1
1
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 18 - block: 8678

trials left: 1 - iteration: 19 - block: 9678
traces.length: 20
Opening: 9
Swapping: 3
Closing: 8
--- DONE ---
Opening: 9
Swapping: 3
Closing: 8
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(4s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(26s)[0m

