[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0

trials left: 1 - iteration: 1 - block: 1

trials left: 1 - iteration: 2 - block: 2

trials left: 1 - iteration: 3 - block: 652

trials left: 1 - iteration: 4 - block: 653

trials left: 1 - iteration: 5 - block: 1653

trials left: 1 - iteration: 6 - block: 2653

trials left: 1 - iteration: 7 - block: 3088

trials left: 1 - iteration: 8 - block: 4088

trials left: 1 - iteration: 9 - block: 5088

trials left: 1 - iteration: 10 - block: 5089

trials left: 1 - iteration: 11 - block: 5101

trials left: 1 - iteration: 12 - block: 5102

trials left: 1 - iteration: 13 - block: 5443

trials left: 1 - iteration: 14 - block: 6443

trials left: 1 - iteration: 15 - block: 6495

trials left: 1 - iteration: 16 - block: 6496

trials left: 1 - iteration: 17 - block: 7006

trials left: 1 - iteration: 18 - block: 7007

trials left: 1 - iteration: 19 - block: 8007
traces.length: 0
trials left: 1
accounts: 7

trials left: 1 - iteration: 0 - block: 0
virtual: 1
weight: 41
jumpSize: 40
minAnchorPrice: 40
jumpLog: 0.024692612590371414
anchorLog: 0.024692612590371414
1
maxTicks: 1
maxTicks_: 1
1
virtual: 5579
weight: 1
jumpSize: 100
minAnchorPrice: 5523
jumpLog: 0.009950330853168092
anchorLog: 0.00018104462799525988
54.96065231733146
maxTicks: 1
maxTicks_: 54
1
virtual: 6584
weight: 1
jumpSize: 1
minAnchorPrice: 3292
jumpLog: 0.6931471805599453
anchorLog: 0.0003037205794037643
2282.18707445069
maxTicks: 1
maxTicks_: 2282
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1000
virtual: 1
weight: 63
jumpSize: 62
minAnchorPrice: 62
jumpLog: 0.01600034134644112
anchorLog: 0.01600034134644112
1
maxTicks: 1
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
virtual: 8465
weight: 1
jumpSize: 59
minAnchorPrice: 8323
jumpLog: 0.01680711831638119
anchorLog: 0.00012014176742993737
139.8940491380946
maxTicks: 1
maxTicks_: 139
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 2 - block: 1167
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 1
maxTicks_: 3119
1
virtual: 8425
weight: 1
jumpSize: 100
minAnchorPrice: 8341
jumpLog: 0.009950330853168092
anchorLog: 0.00011988251527879747
83.00068471225943
maxTicks: 1
maxTicks_: 83
1
virtual: 7151
weight: 1
jumpSize: 100
minAnchorPrice: 7080
jumpLog: 0.009950330853168092
anchorLog: 0.00014123296400851338
70.45331748874361
maxTicks: 1
maxTicks_: 70
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 3 - block: 1168

trials left: 1 - iteration: 4 - block: 1495

trials left: 1 - iteration: 5 - block: 2187
Swapping.boundary()
boughtAssetForSale (new): 
        buyingAmm  17417 > 
        spotBuying 17418
valueEquation: 
        addedBuyingA0  252000 > 
        addedSellingA0 243852
valueEquation: 
        addedBuyingA0  36000 > 
        addedSellingA0 35750
Swapping.boundary()
Swapping.boundary()
valueEquation: 
        addedBuyingA0  635536 > 
        addedSellingA0 630000
valueEquation: 
        addedBuyingA0  628314 > 
        addedSellingA0 621000
Swapping.boundary()
valueEquation: 
        addedBuyingA0  50554 > 
        addedSellingA0 34836
boughtAssetForSale (new): 
        buyingAmm  17417 > 
        spotBuying 17418
subSwap: 6 bought
valueEquation: 
        addedBuyingA0  43332 > 
        addedSellingA0 34836
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 23eca2c84e712ab5817739811bd14ef3f18cba8ce9a5963f574c982b, 
   +     +  virtual: +[
   +     +  +  ad522d0e234ded21822588af54993fe8886ca8ebc857afd9ecc7448e_: 9000,
   +     +  +  d647c130ac3273dd6f02b25fc93a9e8f897ba5bb794b649524b798c2_Bg6Ez8bloUycV52xeTsC1S3zRC9CfXCm: 8425,
   +     +  +  68597ceb360967d741232700a4e6cad069f34df84ce72d2b742d622e_hU: 7151
   +     +  ], 
   +     +  weights: +[
   +     +  +  ad522d0e234ded21822588af54993fe8886ca8ebc857afd9ecc7448e_: 1,
   +     +  +  d647c130ac3273dd6f02b25fc93a9e8f897ba5bb794b649524b798c2_Bg6Ez8bloUycV52xeTsC1S3zRC9CfXCm: 1,
   +     +  +  68597ceb360967d741232700a4e6cad069f34df84ce72d2b742d622e_hU: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  ad522d0e234ded21822588af54993fe8886ca8ebc857afd9ecc7448e_: 1,
   +     +  +  d647c130ac3273dd6f02b25fc93a9e8f897ba5bb794b649524b798c2_Bg6Ez8bloUycV52xeTsC1S3zRC9CfXCm: 100,
   +     +  +  68597ceb360967d741232700a4e6cad069f34df84ce72d2b742d622e_hU: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 23eca2c84e712ab5817739811bd14ef3f18cba8ce9a5963f574c982b,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 873e0561ab8f8bcbea7f9cbe4e366b84e3819931b26e29599809729de9ed8d76),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: de60a4f4e0f9aabe06621f2983137ab9f150c8c9acaf9f13e1eae9ccf33ffe96),
   +     +  anchorPrices: +[
   +     +  +  ad522d0e234ded21822588af54993fe8886ca8ebc857afd9ecc7448e_: 4500,
   +     +  +  d647c130ac3273dd6f02b25fc93a9e8f897ba5bb794b649524b798c2_Bg6Ez8bloUycV52xeTsC1S3zRC9CfXCm: 8341,
   +     +  +  68597ceb360967d741232700a4e6cad069f34df84ce72d2b742d622e_hU: 7080
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3137680,
   +  +  68597ceb360967d741232700a4e6cad069f34df84ce72d2b742d622e_hU: 1,
   +  +  ad522d0e234ded21822588af54993fe8886ca8ebc857afd9ecc7448e_: 9000,
   +  +  d647c130ac3273dd6f02b25fc93a9e8f897ba5bb794b649524b798c2_Bg6Ez8bloUycV52xeTsC1S3zRC9CfXCm: 9000
   +  ]
     )
  boughtAsset:  Asset(d647c130ac3273dd6f02b25fc93a9e8f897ba5bb794b649524b798c2, Bg6Ez8bloUycV52xeTsC1S3zRC9CfXCm)
  soldAsset:    Asset(68597ceb360967d741232700a4e6cad069f34df84ce72d2b742d622e, hU)
  boughtAmount: 6
  soldAmount:   3
  boughtSpot:   17418
  soldSpot:     7222
  (boughtA0:    43332)
  (soldA0:      52254)
  boughtExp:    74
  soldExp:      2
  spotPrice:    0.41462854518314385
  eff.Price:    0.5
  maxBuying:    6
  (maxBuyingA0: 43332)
)

trials left: 1 - iteration: 6 - block: 2722
virtual: 9000
weight: 1
jumpSize: 93
minAnchorPrice: 8904
jumpLog: 0.01069528911674795
anchorLog: 0.00011230276838119965
95.23620184004675
maxTicks: 1
maxTicks_: 95
1
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 7 - block: 2723
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 2976
maxTicks_: 88
3
virtual: 1
weight: 100
jumpSize: 99
minAnchorPrice: 99
jumpLog: 0.010050335853501506
anchorLog: 0.010050335853501506
1
maxTicks: 992
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 3027
virtual: 7889
weight: 1
jumpSize: 97
minAnchorPrice: 7808
jumpLog: 0.010256500167189061
anchorLog: 0.0001280655697466921
80.08788144601203
maxTicks: 1
maxTicks_: 80
1
virtual: 1
weight: 7
jumpSize: 1
minAnchorPrice: 3
jumpLog: 0.6931471805599453
anchorLog: 0.28768207245178085
2.4094208396532095
maxTicks: 1
maxTicks_: 2
1
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 9 - block: 3028

trials left: 1 - iteration: 10 - block: 3153
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 8202
maxTicks_: 1
1
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 8202
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 11 - block: 3154
virtual: 2
weight: 90
jumpSize: 100
minAnchorPrice: 178
jumpLog: 0.009950330853168092
anchorLog: 0.0056022555486697516
1.7761294119349456
maxTicks: 1
maxTicks_: 1
1
virtual: 2015
weight: 8
jumpSize: 1
minAnchorPrice: 8060
jumpLog: 0.6931471805599453
anchorLog: 0.00012406178292694804
5587.112841737047
maxTicks: 1
maxTicks_: 5587
1
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 12 - block: 3155
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
virtual: 7210
weight: 2
jumpSize: 1
minAnchorPrice: 7210
jumpLog: 0.6931471805599453
anchorLog: 0.00013868663776467528
4997.937737419834
maxTicks: 1
maxTicks_: 4997
1
virtual: 7692
weight: 1
jumpSize: 24
minAnchorPrice: 7384
jumpLog: 0.0408219945202552
anchorLog: 0.00013541878279207682
301.4500180741814
maxTicks: 1
maxTicks_: 301
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 13 - block: 4155
virtual: 1
weight: 88
jumpSize: 1
minAnchorPrice: 44
jumpLog: 0.6931471805599453
anchorLog: 0.022472855852058576
30.84375146278754
maxTicks: 9000
maxTicks_: 30
3
virtual: 4796
weight: 1
jumpSize: 100
minAnchorPrice: 4748
jumpLog: 0.009950330853168092
anchorLog: 0.00021059281956315606
47.249145881652545
maxTicks: 3000
maxTicks_: 47
3
virtual: 1
weight: 88
jumpSize: 1
minAnchorPrice: 44
jumpLog: 0.6931471805599453
anchorLog: 0.022472855852058576
30.84375146278754
virtual: 1
weight: 88
jumpSize: 1
minAnchorPrice: 44
jumpLog: 0.6931471805599453
anchorLog: 0.022472855852058576
30.84375146278754
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 14 - block: 4156

trials left: 1 - iteration: 15 - block: 4157
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 2676
maxTicks_: 1
1
virtual: 7767
weight: 1
jumpSize: 100
minAnchorPrice: 7690
jumpLog: 0.009950330853168092
anchorLog: 0.0001300305573642477
76.52301931841113
maxTicks: 2676
maxTicks_: 76
3
virtual: 7767
weight: 1
jumpSize: 100
minAnchorPrice: 7690
jumpLog: 0.009950330853168092
anchorLog: 0.0001300305573642477
76.52301931841113
virtual: 7767
weight: 1
jumpSize: 100
minAnchorPrice: 7690
jumpLog: 0.009950330853168092
anchorLog: 0.0001300305573642477
76.52301931841113
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 16 - block: 5157
Swapping.boundary()
Swapping.boundary()
boughtAssetForSale (new): 
        buyingAmm  305402300 > 
        spotBuying 305402400
subSwap: 1 bought
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 23eca2c84e712ab5817739811bd14ef3f18cba8ce9a5963f574c982b, 
   +     +  virtual: +[
   +     +  +  2d0a157dd88224c772d4dd3a9a9457eb6db204dd99f0fcb1bfcdf541_GE0tv5koVh2I0P6lDjSw1PoKyyaL: 7889,
   +     +  +  33fe57b54a55612d56600d7b54bb8c2876b8f221c4ab7d56a0ff24b2_xc2t0Js6tw1t6dfTvR88jL4fUmBL2Zwd: 1,
   +     +  +  _: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  2d0a157dd88224c772d4dd3a9a9457eb6db204dd99f0fcb1bfcdf541_GE0tv5koVh2I0P6lDjSw1PoKyyaL: 1,
   +     +  +  33fe57b54a55612d56600d7b54bb8c2876b8f221c4ab7d56a0ff24b2_xc2t0Js6tw1t6dfTvR88jL4fUmBL2Zwd: 7,
   +     +  +  _: 100
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  2d0a157dd88224c772d4dd3a9a9457eb6db204dd99f0fcb1bfcdf541_GE0tv5koVh2I0P6lDjSw1PoKyyaL: 97,
   +     +  +  33fe57b54a55612d56600d7b54bb8c2876b8f221c4ab7d56a0ff24b2_xc2t0Js6tw1t6dfTvR88jL4fUmBL2Zwd: 1,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 23eca2c84e712ab5817739811bd14ef3f18cba8ce9a5963f574c982b,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: f6146c22c12c1662ce1374f6351c0260c1fe55548e40a3e67cb86400cb02cfb2),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: f76f8d199b014885de1888964d6f898614d09ad97b860f7af183b891f778b95f),
   +     +  anchorPrices: +[
   +     +  +  2d0a157dd88224c772d4dd3a9a9457eb6db204dd99f0fcb1bfcdf541_GE0tv5koVh2I0P6lDjSw1PoKyyaL: 7808,
   +     +  +  33fe57b54a55612d56600d7b54bb8c2876b8f221c4ab7d56a0ff24b2_xc2t0Js6tw1t6dfTvR88jL4fUmBL2Zwd: 3,
   +     +  +  _: 198
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3073030,
   +  +  2d0a157dd88224c772d4dd3a9a9457eb6db204dd99f0fcb1bfcdf541_GE0tv5koVh2I0P6lDjSw1PoKyyaL: 1,
   +  +  33fe57b54a55612d56600d7b54bb8c2876b8f221c4ab7d56a0ff24b2_xc2t0Js6tw1t6dfTvR88jL4fUmBL2Zwd: 1
   +  ]
     )
  boughtAsset:  Asset(2d0a157dd88224c772d4dd3a9a9457eb6db204dd99f0fcb1bfcdf541, GE0tv5koVh2I0P6lDjSw1PoKyyaL)
  soldAsset:    Asset(33fe57b54a55612d56600d7b54bb8c2876b8f221c4ab7d56a0ff24b2, xc2t0Js6tw1t6dfTvR88jL4fUmBL2Zwd)
  boughtAmount: 1
  soldAmount:   1
  boughtSpot:   7888
  soldSpot:     24
  (boughtA0:    24)
  (soldA0:      7888)
  boughtExp:    1
  soldExp:      3
  spotPrice:    0.0030425963488843813
  eff.Price:    1
  maxBuying:    1
  (maxBuyingA0: 24)
)

trials left: 1 - iteration: 17 - block: 5959
virtual: 1
weight: 89
jumpSize: 88
minAnchorPrice: 88
jumpLog: 0.011299555253933466
anchorLog: 0.011299555253933466
1
maxTicks: 1
maxTicks_: 1
1
virtual: 1
weight: 70
jumpSize: 1
minAnchorPrice: 35
jumpLog: 0.6931471805599453
anchorLog: 0.028170876966696224
24.605097717738357
maxTicks: 1
maxTicks_: 24
1
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 18 - block: 6959
virtual: 1
weight: 9
jumpSize: 1
minAnchorPrice: 4
jumpLog: 0.6931471805599453
anchorLog: 0.22314355131420976
3.10628371950539
maxTicks: 1
maxTicks_: 3
1
virtual: 8635
weight: 1
jumpSize: 35
minAnchorPrice: 8395
jumpLog: 0.028170876966696224
anchorLog: 0.00011911142888243618
236.5085972942284
maxTicks: 1
maxTicks_: 236
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 7959
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 61
minAnchorPrice: 8854
jumpLog: 0.016260520871780326
anchorLog: 0.00011293692484766977
143.9787819060298
maxTicks: 1
maxTicks_: 143
1
virtual: 9000
weight: 1
jumpSize: 41
minAnchorPrice: 8785
jumpLog: 0.024097551579060524
anchorLog: 0.00011382391452729436
211.70903916928688
maxTicks: 1
maxTicks_: 211
1
Opening pool with 1 dirac utxos and 1 param utxos
traces.length: 20
Opening: 14
Closing: 4
Swapping: 2
--- DONE ---
Opening: 14
Closing: 4
Swapping: 2
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(5s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(34s)[0m

