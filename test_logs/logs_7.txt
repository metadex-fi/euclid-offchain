[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 10

trials left: 1 - iteration: 0 - block: 0
virtual: 1
weight: 85
jumpSize: 57
minAnchorPrice: 83
jumpLog: 0.01739174271186924
anchorLog: 0.01197619104671562
1.4521931592464696
maxTicks: 7370
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 7370
maxTicks_: 88
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1
virtual: 2
weight: 100
jumpSize: 100
minAnchorPrice: 198
jumpLog: 0.009950330853168092
anchorLog: 0.005037794029957081
1.9751364970458831
maxTicks: 1
maxTicks_: 1
1
virtual: 1
weight: 100
jumpSize: 17
minAnchorPrice: 94
jumpLog: 0.05715841383994862
anchorLog: 0.010582109330537008
5.401419703253814
maxTicks: 1
maxTicks_: 5
1
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 1
maxTicks_: 3119
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 2 - block: 2

          maxBuying: 215
          maxSelling: 1
          maxBuyingA0: 86215
          maxSellingA0: 497353
          maxSwapA0: 86215
          spotBuying: 497353
          spotSelling: 401
          buyingAmount: 215
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  400 > 
        spotSelling 397

          maxBuying: 5104
          maxSelling: 1
          maxBuyingA0: 2046704
          maxSellingA0: 9000
          maxSwapA0: 9000
          spotBuying: 9000
          spotSelling: 401
          buyingAmount: 22
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  400 > 
        spotSelling 397

          maxBuying: 1
          maxSelling: 5267
          maxBuyingA0: 1045615
          maxSellingA0: 1048133
          maxSwapA0: 1045615
          spotBuying: 199
          spotSelling: 1045615
          buyingAmount: 1
          sellingAmount: 5255
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  1044400 > 
        spotSelling 987525

          maxBuying: 5104
          maxSelling: 5267
          maxBuyingA0: 5336818960
          maxSellingA0: 47403000
          maxSwapA0: 47403000
          spotBuying: 9000
          spotSelling: 1045615
          buyingAmount: 45
          sellingAmount: 5229
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  1041800 > 
        spotSelling 987525

          maxBuying: 1
          maxSelling: 3896
          maxBuyingA0: 18000
          maxSellingA0: 775304
          maxSwapA0: 18000
          spotBuying: 199
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 91
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  14104 > 
        spotSelling 9000

          maxBuying: 215
          maxSelling: 3896
          maxBuyingA0: 3870000
          maxSellingA0: 1937687288
          maxSwapA0: 3870000
          spotBuying: 497353
          spotSelling: 18000
          buyingAmount: 215
          sellingAmount: 8
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  14104 > 
        spotSelling 9000
subSwap: 2334 sold
subSwap: 1 bought
boughtAssetForSale (new):
        sellingAmm  1044400 > 
        spotSelling 987525
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 204d17e56395f1b8ed8585c61e528da2525f49eed9a60898a5f745bb, 
   +     +  virtual: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 2,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 1,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 9000
   +     +  ], 
   +     +  weights: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 100,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 100,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 100,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 17,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 204d17e56395f1b8ed8585c61e528da2525f49eed9a60898a5f745bb,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 1e55f53503af7d025c827ff52719b9a42017c49b070d658bc2eb2d6926ea604e),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 4ad674478d22863ddc7c55baa50cefa6205536991b5cf7121812b3b5a0baba09),
   +     +  anchorPrices: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 198,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 94,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 4500
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3361800,
   +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 1,
   +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 5104,
   +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 5188
   +  ]
     )
  boughtAsset:  Asset(2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde, T0EDNAlL9lIHQNQspdyx44seRTYQkoaR)
  soldAsset:    Asset(e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3, jLt8mjrEvmorF57Rh25xCGuimVfP)
  boughtAmount: 1
  soldAmount:   5255
  boughtSpot:   199
  soldSpot:     1045615
  (boughtA0:    1045615)
  (soldA0:      1045745)
  boughtExp:    1
  soldExp:      163
  spotPrice:    5254.346733668342
  eff.Price:    5255
  maxBuying:    1
  (maxBuyingA0: 1045615)
)

trials left: 1 - iteration: 3 - block: 1002

trials left: 1 - iteration: 4 - block: 1003

          maxBuying: 568
          maxSelling: 1
          maxBuyingA0: 170400
          maxSellingA0: 987525
          maxSwapA0: 170400
          spotBuying: 987525
          spotSelling: 300
          buyingAmount: 568
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  300 > 
        spotSelling 297

          maxBuying: 5104
          maxSelling: 1
          maxBuyingA0: 1531200
          maxSellingA0: 9000
          maxSwapA0: 9000
          spotBuying: 9000
          spotSelling: 300
          buyingAmount: 30
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  300 > 
        spotSelling 297

          maxBuying: 5104
          maxSelling: 627
          maxBuyingA0: 5650750688
          maxSellingA0: 5643000
          maxSwapA0: 5643000
          spotBuying: 9000
          spotSelling: 1107122
          buyingAmount: 5
          sellingAmount: 616
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  1106000 > 
        spotSelling 1045615

          maxBuying: 568
          maxSelling: 1
          maxBuyingA0: 10224000
          maxSellingA0: 987525
          maxSwapA0: 987525
          spotBuying: 987525
          spotSelling: 18000
          buyingAmount: 54
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  14104 > 
        spotSelling 9000
subSwap: 1 bought
boughtAssetForSale (new):
        sellingAmm  300 > 
        spotSelling 297
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 204d17e56395f1b8ed8585c61e528da2525f49eed9a60898a5f745bb, 
   +     +  virtual: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 2,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 1,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 9000
   +     +  ], 
   +     +  weights: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 100,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 100,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 100,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 17,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 204d17e56395f1b8ed8585c61e528da2525f49eed9a60898a5f745bb,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 1e55f53503af7d025c827ff52719b9a42017c49b070d658bc2eb2d6926ea604e),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 4ad674478d22863ddc7c55baa50cefa6205536991b5cf7121812b3b5a0baba09),
   +     +  anchorPrices: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 198,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 94,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 4500
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3361800,
   +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 5104,
   +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 10443
   +  ]
     )
  boughtAsset:  Asset(2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc, )
  soldAsset:    Asset(2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde, T0EDNAlL9lIHQNQspdyx44seRTYQkoaR)
  boughtAmount: 1
  soldAmount:   1
  boughtSpot:   9000
  soldSpot:     300
  (boughtA0:    300)
  (soldA0:      9000)
  boughtExp:    1
  soldExp:      42
  spotPrice:    0.03333333333333333
  eff.Price:    1
  maxBuying:    1
  (maxBuyingA0: 300)
)

trials left: 1 - iteration: 5 - block: 2003

          maxBuying: 568
          maxSelling: 1
          maxBuyingA0: 227768
          maxSellingA0: 987525
          maxSwapA0: 227768
          spotBuying: 987525
          spotSelling: 401
          buyingAmount: 568
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  400 > 
        spotSelling 397

          maxBuying: 5103
          maxSelling: 1
          maxBuyingA0: 2046303
          maxSellingA0: 9000
          maxSwapA0: 9000
          spotBuying: 9000
          spotSelling: 401
          buyingAmount: 22
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  400 > 
        spotSelling 397

          maxBuying: 5103
          maxSelling: 3745
          maxBuyingA0: 7518632625
          maxSellingA0: 33705000
          maxSwapA0: 33705000
          spotBuying: 9000
          spotSelling: 1473375
          buyingAmount: 22
          sellingAmount: 3602
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  1404600 > 
        spotSelling 1391521

          maxBuying: 1
          maxSelling: 3897
          maxBuyingA0: 18000
          maxSellingA0: 775503
          maxSwapA0: 18000
          spotBuying: 199
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 91
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  14103 > 
        spotSelling 9000

          maxBuying: 568
          maxSelling: 3897
          maxBuyingA0: 10224000
          maxSellingA0: 3848384925
          maxSwapA0: 10224000
          spotBuying: 987525
          spotSelling: 18000
          buyingAmount: 568
          sellingAmount: 11
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  14103 > 
        spotSelling 9000
subSwap: 1 sold
boughtAssetForSale (new):
        sellingAmm  400 > 
        spotSelling 397
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 204d17e56395f1b8ed8585c61e528da2525f49eed9a60898a5f745bb, 
   +     +  virtual: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 2,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 1,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 9000
   +     +  ], 
   +     +  weights: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 100,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 100,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 100,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 17,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 204d17e56395f1b8ed8585c61e528da2525f49eed9a60898a5f745bb,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 1e55f53503af7d025c827ff52719b9a42017c49b070d658bc2eb2d6926ea604e),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 4ad674478d22863ddc7c55baa50cefa6205536991b5cf7121812b3b5a0baba09),
   +     +  anchorPrices: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 198,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 94,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 4500
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3361800,
   +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 1,
   +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 5103,
   +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 10443
   +  ]
     )
  boughtAsset:  Asset(2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc, )
  soldAsset:    Asset(2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde, T0EDNAlL9lIHQNQspdyx44seRTYQkoaR)
  boughtAmount: 22
  soldAmount:   1
  boughtSpot:   9000
  soldSpot:     401
  (boughtA0:    8822)
  (soldA0:      9000)
  boughtExp:    1
  soldExp:      71
  spotPrice:    0.04455555555555556
  eff.Price:    0.045454545454545456
  maxBuying:    5103
  (maxBuyingA0: 2046303)
)

trials left: 1 - iteration: 6 - block: 3003

          maxBuying: 568
          maxSelling: 1
          maxBuyingA0: 286272
          maxSellingA0: 987525
          maxSwapA0: 286272
          spotBuying: 987525
          spotSelling: 504
          buyingAmount: 568
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  500 > 
        spotSelling 499

          maxBuying: 5081
          maxSelling: 1
          maxBuyingA0: 2560824
          maxSellingA0: 9000
          maxSwapA0: 9000
          spotBuying: 9000
          spotSelling: 504
          buyingAmount: 17
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  500 > 
        spotSelling 499

          maxBuying: 5081
          maxSelling: 3745
          maxBuyingA0: 7486218375
          maxSellingA0: 33705000
          maxSwapA0: 33705000
          spotBuying: 9000
          spotSelling: 1473375
          buyingAmount: 22
          sellingAmount: 3602
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  1404600 > 
        spotSelling 1391521

          maxBuying: 1
          maxSelling: 3919
          maxBuyingA0: 18000
          maxSellingA0: 1175700
          maxSwapA0: 18000
          spotBuying: 300
          spotSelling: 18000
          buyingAmount: 1
          sellingAmount: 60
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  14081 > 
        spotSelling 9000

          maxBuying: 568
          maxSelling: 3919
          maxBuyingA0: 10224000
          maxSellingA0: 3870110475
          maxSwapA0: 10224000
          spotBuying: 987525
          spotSelling: 18000
          buyingAmount: 568
          sellingAmount: 11
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  14081 > 
        spotSelling 9000
subSwap: 8 bought
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[31mFAILED[0m [0m[38;5;245m(2s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[1m[37m[41m ERRORS [0m

emulator [0m[38;5;245m=> ./tests/emulator.test.ts:15:6[0m
[0m[1m[31merror[0m: AssertionError: lowering selling price should fail: Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 204d17e56395f1b8ed8585c61e528da2525f49eed9a60898a5f745bb, 
   +     +  virtual: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 2,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 1,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 9000
   +     +  ], 
   +     +  weights: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 100,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 100,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 100,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 17,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 204d17e56395f1b8ed8585c61e528da2525f49eed9a60898a5f745bb,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 1e55f53503af7d025c827ff52719b9a42017c49b070d658bc2eb2d6926ea604e),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 4ad674478d22863ddc7c55baa50cefa6205536991b5cf7121812b3b5a0baba09),
   +     +  anchorPrices: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 198,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 94,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 4500
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3361800,
   +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 2,
   +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 5081,
   +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 10443
   +  ]
     )
  boughtAsset:  Asset(2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc, )
  soldAsset:    Asset(e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3, jLt8mjrEvmorF57Rh25xCGuimVfP)
  boughtAmount: 8
  soldAmount:   1310
  boughtSpot:   9000
  soldSpot:     1473375
  (boughtA0:    11787000)
  (soldA0:      11790000)
  boughtExp:    1
  soldExp:      169
  spotPrice:    163.70833333333334
  eff.Price:    163.75
  maxBuying:    8
  (maxBuyingA0: 11787000)
)
~~~>
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 204d17e56395f1b8ed8585c61e528da2525f49eed9a60898a5f745bb, 
   +     +  virtual: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 2,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 1,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 9000
   +     +  ], 
   +     +  weights: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 100,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 100,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 100,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 17,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 204d17e56395f1b8ed8585c61e528da2525f49eed9a60898a5f745bb,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 1e55f53503af7d025c827ff52719b9a42017c49b070d658bc2eb2d6926ea604e),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 4ad674478d22863ddc7c55baa50cefa6205536991b5cf7121812b3b5a0baba09),
   +     +  anchorPrices: +[
   +     +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 198,
   +     +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 94,
   +     +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 4500
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 3361800,
   +  +  2882859f1bf53af3df5685fbe035d85ebe7846d3884d6406cae20bde_T0EDNAlL9lIHQNQspdyx44seRTYQkoaR: 2,
   +  +  2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc_: 5081,
   +  +  e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3_jLt8mjrEvmorF57Rh25xCGuimVfP: 10443
   +  ]
     )
  boughtAsset:  Asset(2abd329a546a7b7baa9ebb454e063ffff444c9c95986c38915dd48bc, )
  soldAsset:    Asset(e97099b607be6e4dd5b2fd4154f9680a48a72ec1e60b569b66cdbff3, jLt8mjrEvmorF57Rh25xCGuimVfP)
  boughtAmount: 8
  soldAmount:   1310
  boughtSpot:   9000
  soldSpot:     1391521
  (boughtA0:    11132168)
  (soldA0:      11790000)
  boughtExp:    1
  soldExp:      168
  spotPrice:    154.61344444444444
  eff.Price:    163.75
  maxBuying:    8
  (maxBuyingA0: 11132168)
)
    throw new AssertionError(msg);
[0m[31m          ^[0m
    at [0m[1m[3massert[0m ([0m[36mhttps://deno.land/std@0.167.0/testing/asserts.ts[0m:[0m[33m141[0m:[0m[33m11[0m)
    at [0m[1m[3mSwapping.testSellingPrice[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/swapping.ts[0m:[0m[33m640[0m:[0m[33m7[0m)
    at [0m[1m[3mSwapping.corruptionTests[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/swapping.ts[0m:[0m[33m516[0m:[0m[33m10[0m)
    at new [0m[1m[3mSwapping[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/swapping.ts[0m:[0m[33m56[0m:[0m[33m36[0m)
    at [0m[1m[3mSwapping.subSwap[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/swapping.ts[0m:[0m[33m228[0m:[0m[33m12[0m)
    at [0m[1m[3mSwapping.randomSubSwap[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/swapping.ts[0m:[0m[33m249[0m:[0m[33m28[0m)
    at [0m[1m[3mFunction.genOfUser[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/swapping.ts[0m:[0m[33m327[0m:[0m[33m36[0m)
    at [0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/action.ts[0m:[0m[33m18[0m:[0m[33m16[0m
    at [0m[1m[3mPermutation.try[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/action.ts[0m:[0m[33m44[0m:[0m[33m12[0m)
    at [0m[1m[3mPermutation.try[0m ([0m[36mfile:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/src/chain/actions/action.ts[0m:[0m[33m44[0m:[0m[33m37[0m)

[0m[1m[37m[41m FAILURES [0m

emulator [0m[38;5;245m=> ./tests/emulator.test.ts:15:6[0m

[0m[31mFAILED[0m | 0 passed | 1 failed [0m[38;5;245m(27s)[0m

[0m[1m[31merror[0m: Test failed
