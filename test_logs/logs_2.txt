[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 2

trials left: 1 - iteration: 0 - block: 0

trials left: 1 - iteration: 1 - block: 65

trials left: 1 - iteration: 2 - block: 254

trials left: 1 - iteration: 3 - block: 1254

trials left: 1 - iteration: 4 - block: 2179

trials left: 1 - iteration: 5 - block: 3179

trials left: 1 - iteration: 6 - block: 3180

trials left: 1 - iteration: 7 - block: 4180

trials left: 1 - iteration: 8 - block: 4710

trials left: 1 - iteration: 9 - block: 4877

trials left: 1 - iteration: 10 - block: 4878

trials left: 1 - iteration: 11 - block: 4879

trials left: 1 - iteration: 12 - block: 5879

trials left: 1 - iteration: 13 - block: 6750

trials left: 1 - iteration: 14 - block: 6980

trials left: 1 - iteration: 15 - block: 6981

trials left: 1 - iteration: 16 - block: 6982

trials left: 1 - iteration: 17 - block: 7982

trials left: 1 - iteration: 18 - block: 8982

trials left: 1 - iteration: 19 - block: 8983
traces.length: 0
trials left: 1
accounts: 10

trials left: 1 - iteration: 0 - block: 0

trials left: 1 - iteration: 1 - block: 1000

trials left: 1 - iteration: 2 - block: 1001

trials left: 1 - iteration: 3 - block: 1002

trials left: 1 - iteration: 4 - block: 2002

trials left: 1 - iteration: 5 - block: 2003

trials left: 1 - iteration: 6 - block: 2004

trials left: 1 - iteration: 7 - block: 3004

trials left: 1 - iteration: 8 - block: 4004

trials left: 1 - iteration: 9 - block: 4005

trials left: 1 - iteration: 10 - block: 5005

trials left: 1 - iteration: 11 - block: 5082

trials left: 1 - iteration: 12 - block: 6082

trials left: 1 - iteration: 13 - block: 7082

trials left: 1 - iteration: 14 - block: 8082

trials left: 1 - iteration: 15 - block: 9082

trials left: 1 - iteration: 16 - block: 9083

trials left: 1 - iteration: 17 - block: 9084

trials left: 1 - iteration: 18 - block: 10084

trials left: 1 - iteration: 19 - block: 10085
traces.length: 0
trials left: 1
accounts: 1

trials left: 1 - iteration: 0 - block: 0
virtual: 1
weight: 93
jumpSize: 70
minAnchorPrice: 91
jumpLog: 0.014184634991956381
anchorLog: 0.01092907053219023
1.2978811830500396
maxTicks: 1
maxTicks_: 1
1
virtual: 2
weight: 88
jumpSize: 100
minAnchorPrice: 174
jumpLog: 0.009950330853168092
anchorLog: 0.0057306747089850745
1.7363279820379711
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 98

          maxBuying: 8642
          maxSelling: 1
          maxBuyingA0: 2411118
          maxSellingA0: 199120187
          maxSwapA0: 2411118
          spotBuying: 199120187
          spotSelling: 279
          buyingAmount: 8642
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  279 > 
        spotSelling 275
subSwap: 6428 bought
boughtAssetForSale (new):
        sellingAmm  279 > 
        spotSelling 275
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: ff73ecf27597118b70d251ed09b1f949c33ec673b95ac38756e91bb2, 
   +     +  virtual: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 1,
   +     +  +  _: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 93,
   +     +  +  _: 88
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 70,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: ff73ecf27597118b70d251ed09b1f949c33ec673b95ac38756e91bb2,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3f5cc23c3d43ac7f987518fa81446c84f5a4faabcc9f58d2a02a0159dac6eec1),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 9f18b8f1b807dd7ae80a4484dd49578161fd5fa06a701762aaab83f1bc3329bf),
   +     +  anchorPrices: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 91,
   +     +  +  _: 174
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2271370,
   +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 1
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06, iYy)
  boughtAmount: 6428
  soldAmount:   1
  boughtSpot:   199120187
  soldSpot:     279
  (boughtA0:    1793412)
  (soldA0:      199120187)
  boughtExp:    1402
  soldExp:      79
  spotPrice:    0.0000014011638106788239
  eff.Price:    0.00015556938394523958
  maxBuying:    6428
  (maxBuyingA0: 1793412)
)

trials left: 1 - iteration: 2 - block: 261

          maxBuying: 8642
          maxSelling: 1
          maxBuyingA0: 3240750
          maxSellingA0: 199120187
          maxSwapA0: 3240750
          spotBuying: 199120187
          spotSelling: 375
          buyingAmount: 8642
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  372 > 
        spotSelling 370
subSwap: 1 sold
boughtAssetForSale (new):
        sellingAmm  372 > 
        spotSelling 370
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: ff73ecf27597118b70d251ed09b1f949c33ec673b95ac38756e91bb2, 
   +     +  virtual: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 1,
   +     +  +  _: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 93,
   +     +  +  _: 88
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 70,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: ff73ecf27597118b70d251ed09b1f949c33ec673b95ac38756e91bb2,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3f5cc23c3d43ac7f987518fa81446c84f5a4faabcc9f58d2a02a0159dac6eec1),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 9f18b8f1b807dd7ae80a4484dd49578161fd5fa06a701762aaab83f1bc3329bf),
   +     +  anchorPrices: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 91,
   +     +  +  _: 174
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2271370,
   +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 2
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06, iYy)
  boughtAmount: 8642
  soldAmount:   1
  boughtSpot:   199120187
  soldSpot:     375
  (boughtA0:    3240750)
  (soldA0:      199120187)
  boughtExp:    1402
  soldExp:      100
  spotPrice:    0.0000018832846917726127
  eff.Price:    0.00011571395510298542
  maxBuying:    2271370
  (maxBuyingA0: 851763750)
)

trials left: 1 - iteration: 3 - block: 1076

          maxBuying: 8642
          maxSelling: 1
          maxBuyingA0: 4018530
          maxSellingA0: 199120187
          maxSwapA0: 4018530
          spotBuying: 199120187
          spotSelling: 465
          buyingAmount: 8642
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (new):
        sellingAmm  465 > 
        spotSelling 458
subSwap: 1 sold
boughtAssetForSale (new):
        sellingAmm  465 > 
        spotSelling 458
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: ff73ecf27597118b70d251ed09b1f949c33ec673b95ac38756e91bb2, 
   +     +  virtual: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 1,
   +     +  +  _: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 93,
   +     +  +  _: 88
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 70,
   +     +  +  _: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: ff73ecf27597118b70d251ed09b1f949c33ec673b95ac38756e91bb2,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3f5cc23c3d43ac7f987518fa81446c84f5a4faabcc9f58d2a02a0159dac6eec1),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 9f18b8f1b807dd7ae80a4484dd49578161fd5fa06a701762aaab83f1bc3329bf),
   +     +  anchorPrices: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 91,
   +     +  +  _: 174
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2271370,
   +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 3
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06, iYy)
  boughtAmount: 8642
  soldAmount:   1
  boughtSpot:   199120187
  soldSpot:     465
  (boughtA0:    4018530)
  (soldA0:      199120187)
  boughtExp:    1402
  soldExp:      115
  spotPrice:    0.00000233527301779804
  eff.Price:    0.00011571395510298542
  maxBuying:    2271370
  (maxBuyingA0: 1056187050)
)

trials left: 1 - iteration: 4 - block: 1128

trials left: 1 - iteration: 5 - block: 1173
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 1
maxTicks_: 88
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 1753
virtual: 2
weight: 82
jumpSize: 100
minAnchorPrice: 162
jumpLog: 0.009950330853168092
anchorLog: 0.006153865574378286
1.6169236608931543
maxTicks: 6012
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 6012
maxTicks_: 88
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 7 - block: 2753

trials left: 1 - iteration: 8 - block: 3753

trials left: 1 - iteration: 9 - block: 4753
virtual: 4947
weight: 1
jumpSize: 47
minAnchorPrice: 4843
jumpLog: 0.021053409197832263
anchorLog: 0.00020646226975370362
101.97218708748889
maxTicks: 1
maxTicks_: 101
1
virtual: 1
weight: 100
jumpSize: 78
minAnchorPrice: 98
jumpLog: 0.012739025777429712
anchorLog: 0.010152371464017908
1.2547832614852046
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 10 - block: 4754

trials left: 1 - iteration: 11 - block: 4872
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 6013
maxTicks_: 1
1
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 6013
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 12 - block: 5872

trials left: 1 - iteration: 13 - block: 6835
virtual: 3921
weight: 2
jumpSize: 8
minAnchorPrice: 6970
jumpLog: 0.11778303565638346
anchorLog: 0.0001434617318292438
821.0066486341838
maxTicks: 2765
maxTicks_: 821
3
virtual: 2105
weight: 8
jumpSize: 1
minAnchorPrice: 8420
jumpLog: 0.6931471805599453
anchorLog: 0.00011875779361987163
5836.645827040371
maxTicks: 921
maxTicks_: 5836
3
virtual: 3921
weight: 2
jumpSize: 8
minAnchorPrice: 6970
jumpLog: 0.11778303565638346
anchorLog: 0.0001434617318292438
821.0066486341838
virtual: 3921
weight: 2
jumpSize: 8
minAnchorPrice: 6970
jumpLog: 0.11778303565638346
anchorLog: 0.0001434617318292438
821.0066486341838
virtual: 2105
weight: 8
jumpSize: 1
minAnchorPrice: 8420
jumpLog: 0.6931471805599453
anchorLog: 0.00011875779361987163
5836.645827040371
virtual: 2105
weight: 8
jumpSize: 1
minAnchorPrice: 8420
jumpLog: 0.6931471805599453
anchorLog: 0.00011875779361987163
5836.645827040371
virtual: 2105
weight: 8
jumpSize: 1
minAnchorPrice: 8420
jumpLog: 0.6931471805599453
anchorLog: 0.00011875779361987163
5836.645827040371
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 14 - block: 7151

          maxBuying: 135195
          maxSelling: 120
          maxBuyingA0: 1341675180
          maxSellingA0: 2069299200
          maxSwapA0: 1341675180
          spotBuying: 17244160
          spotSelling: 9924
          buyingAmount: 135195
          sellingAmount: 78
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9684 > 
        spotSelling 8821

          maxBuying: 135195
          maxSelling: 318
          maxBuyingA0: 1395347595
          maxSellingA0: 5483642880
          maxSwapA0: 1395347595
          spotBuying: 17244160
          spotSelling: 10321
          buyingAmount: 135195
          sellingAmount: 81
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9684 > 
        spotSelling 9174

          maxBuying: 135195
          maxSelling: 525
          maxBuyingA0: 1451183130
          maxSellingA0: 9053184000
          maxSwapA0: 1451183130
          spotBuying: 17244160
          spotSelling: 10734
          buyingAmount: 135195
          sellingAmount: 85
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  9684 > 
        spotSelling 9541
subSwap: 1 bought
boughtAssetForSale (old):
        sellingAmm  9684 > 
        spotSelling 9541
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: ff73ecf27597118b70d251ed09b1f949c33ec673b95ac38756e91bb2, 
   +     +  virtual: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 3921,
   +     +  +  _: 2105
   +     +  ], 
   +     +  weights: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 2,
   +     +  +  _: 8
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 8,
   +     +  +  _: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: ff73ecf27597118b70d251ed09b1f949c33ec673b95ac38756e91bb2,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 7de8c00dee4d0908380fbd628012ffc730dc13a4e671d956baa65d5f8f54d429),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 9f18b8f1b807dd7ae80a4484dd49578161fd5fa06a701762aaab83f1bc3329bf),
   +     +  anchorPrices: +[
   +     +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 7539,
   +     +  +  _: 8420
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2288610,
   +  +  c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06_iYy: 921
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(c5a0fbb55383b9eedfcdf20553814e078d8f9dd4c39263fe38ba5f06, iYy)
  boughtAmount: 1
  soldAmount:   1
  boughtSpot:   17244160
  soldSpot:     10734
  (boughtA0:    10734)
  (soldA0:      17244160)
  boughtExp:    11
  soldExp:      3
  spotPrice:    0.0006224716077790974
  eff.Price:    1
  maxBuying:    1
  (maxBuyingA0: 10734)
)

trials left: 1 - iteration: 15 - block: 8151

trials left: 1 - iteration: 16 - block: 9151
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 2238
maxTicks_: 3119
3
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 1119
maxTicks_: 1
1
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 17 - block: 10140

trials left: 1 - iteration: 18 - block: 11140
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 1
maxTicks_: 1
1
virtual: 8318
weight: 1
jumpSize: 100
minAnchorPrice: 8235
jumpLog: 0.009950330853168092
anchorLog: 0.0001214255359393354
81.94594964060369
maxTicks: 1
maxTicks_: 81
1
virtual: 9000
weight: 1
jumpSize: 92
minAnchorPrice: 8903
jumpLog: 0.010810916104215676
anchorLog: 0.0001123153817095552
96.2549914327179
maxTicks: 1
maxTicks_: 96
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 12140
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 6012
maxTicks_: 3119
3
virtual: 1
weight: 96
jumpSize: 92
minAnchorPrice: 94
jumpLog: 0.010810916104215676
anchorLog: 0.010582109330537008
1.021622038341486
maxTicks: 6012
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos
traces.length: 20
Opening: 9
Swapping: 4
Closing: 7
--- DONE ---
Opening: 9
Swapping: 4
Closing: 7
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(3s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(32s)[0m

