[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 7

trials left: 1 - iteration: 0 - block: 0
virtual: 9000
weight: 1
jumpSize: 4
minAnchorPrice: 7200
jumpLog: 0.22314355131420976
anchorLog: 0.00013887924472015046
1606.7451386552157
maxTicks: 9000
maxTicks_: 1606
3
virtual: 2900
weight: 3
jumpSize: 71
minAnchorPrice: 8579
jumpLog: 0.01398624197473987
anchorLog: 0.0001165569090428101
119.99496288635171
maxTicks: 9000
maxTicks_: 119
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 600
virtual: 1
weight: 100
jumpSize: 17
minAnchorPrice: 94
jumpLog: 0.05715841383994862
anchorLog: 0.010582109330537008
5.401419703253814
maxTicks: 1
maxTicks_: 5
1
virtual: 1
weight: 5
jumpSize: 1
minAnchorPrice: 2
jumpLog: 0.6931471805599453
anchorLog: 0.4054651081081644
1.7095112913514547
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 2 - block: 1600
virtual: 1
weight: 88
jumpSize: 1
minAnchorPrice: 44
jumpLog: 0.6931471805599453
anchorLog: 0.022472855852058576
30.84375146278754
maxTicks: 1
maxTicks_: 30
1
virtual: 9000
weight: 1
jumpSize: 74
minAnchorPrice: 8880
jumpLog: 0.01342302033214077
anchorLog: 0.00011260627228826434
119.20313193370578
maxTicks: 1
maxTicks_: 119
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 3 - block: 2477
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 9000
maxTicks_: 1
1
virtual: 1
weight: 9
jumpSize: 6
minAnchorPrice: 7
jumpLog: 0.15415067982725836
anchorLog: 0.13353139262452257
1.1544152786657085
maxTicks: 9000
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 4 - block: 3477

trials left: 1 - iteration: 5 - block: 3478
virtual: 9000
weight: 1
jumpSize: 64
minAnchorPrice: 8861
jumpLog: 0.015504186535965254
anchorLog: 0.000112847712132288
137.39034884278522
maxTicks: 1
maxTicks_: 137
1
virtual: 1
weight: 86
jumpSize: 1
minAnchorPrice: 43
jumpLog: 0.6931471805599453
anchorLog: 0.02298951822469878
30.150574439409645
maxTicks: 1
maxTicks_: 30
1
virtual: 1
weight: 46
jumpSize: 45
minAnchorPrice: 45
jumpLog: 0.021978906718775167
anchorLog: 0.021978906718775167
1
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 6 - block: 3479

          maxBuying: 322184
          maxSelling: 3432
          maxBuyingA0: 10557325312
          maxSellingA0: 64200306456
          maxSwapA0: 10557325312
          spotBuying: 18706383
          spotSelling: 32768
          buyingAmount: 322184
          sellingAmount: 565
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  18002 > 
        spotSelling 16384
subSwap: 1 sold
boughtAssetForSale (old):
        sellingAmm  18002 > 
        spotSelling 16384
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 6549ff8c7be7991f09b36a7b75b72ee05d3e92b3f2a7547e4a01b539, 
   +     +  virtual: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 1,
   +     +  +  _: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 2,
   +     +  +  _: 9
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 1,
   +     +  +  _: 6
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 6549ff8c7be7991f09b36a7b75b72ee05d3e92b3f2a7547e4a01b539,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 99cc75d04f49e0755ac6ba6940baba904c378817a163df3178fd845e9bd01fc1),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 636b02f151d4e47c1f8f55ebceab5d43b042ab4a1ff60f6b11cf7f3aa54c1ea0),
   +     +  anchorPrices: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 1,
   +     +  +  _: 7
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2400670,
   +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 9000
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2, OQCcC7sXlbCw7Hi6Wk)
  boughtAmount: 570
  soldAmount:   1
  boughtSpot:   18706383
  soldSpot:     32768
  (boughtA0:    18677760)
  (soldA0:      18706383)
  boughtExp:    96
  soldExp:      15
  spotPrice:    0.0017517015448684013
  eff.Price:    0.0017543859649122807
  maxBuying:    2400670
  (maxBuyingA0: 78665154560)
)

trials left: 1 - iteration: 7 - block: 3788
virtual: 9000
weight: 1
jumpSize: 59
minAnchorPrice: 8850
jumpLog: 0.01680711831638119
anchorLog: 0.000112987966901702
148.75140050093262
maxTicks: 1124
maxTicks_: 148
3
virtual: 7984
weight: 1
jumpSize: 100
minAnchorPrice: 7904
jumpLog: 0.009950330853168092
anchorLog: 0.0001265102158685843
78.65239012400588
maxTicks: 1124
maxTicks_: 78
3
virtual: 7984
weight: 1
jumpSize: 100
minAnchorPrice: 7904
jumpLog: 0.009950330853168092
anchorLog: 0.0001265102158685843
78.65239012400588
virtual: 7984
weight: 1
jumpSize: 100
minAnchorPrice: 7904
jumpLog: 0.009950330853168092
anchorLog: 0.0001265102158685843
78.65239012400588
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 4788
virtual: 6939
weight: 1
jumpSize: 100
minAnchorPrice: 6870
jumpLog: 0.009950330853168092
anchorLog: 0.00014554981468087707
68.3637480060317
maxTicks: 2519
maxTicks_: 68
3
virtual: 1
weight: 94
jumpSize: 32
minAnchorPrice: 91
jumpLog: 0.030771658666753687
anchorLog: 0.01092907053219023
2.815578742594767
maxTicks: 2519
maxTicks_: 2
2
virtual: 1
weight: 94
jumpSize: 32
minAnchorPrice: 91
jumpLog: 0.030771658666753687
anchorLog: 0.01092907053219023
2.815578742594767
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 9 - block: 5788
virtual: 1049
weight: 4
jumpSize: 100
minAnchorPrice: 4154
jumpLog: 0.009950330853168092
anchorLog: 0.00024070285349098378
41.338649329891766
maxTicks: 7877
maxTicks_: 41
3
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
maxTicks: 2625
maxTicks_: 3119
3
virtual: 1049
weight: 4
jumpSize: 100
minAnchorPrice: 4154
jumpLog: 0.009950330853168092
anchorLog: 0.00024070285349098378
41.338649329891766
virtual: 1049
weight: 4
jumpSize: 100
minAnchorPrice: 4154
jumpLog: 0.009950330853168092
anchorLog: 0.00024070285349098378
41.338649329891766
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
virtual: 9000
weight: 1
jumpSize: 1
minAnchorPrice: 4500
jumpLog: 0.6931471805599453
anchorLog: 0.00022219753452146847
3119.5088732767836
Opening pool with 6 dirac utxos and 1 param utxos

trials left: 1 - iteration: 10 - block: 5789

trials left: 1 - iteration: 11 - block: 5790

          maxBuying: 322184
          maxSelling: 1
          maxBuyingA0: 10557325312
          maxSellingA0: 18706383
          maxSwapA0: 18706383
          spotBuying: 18706383
          spotSelling: 32768
          buyingAmount: 570
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  18004 > 
        spotSelling 16384

          maxBuying: 48295
          maxSelling: 1
          maxBuyingA0: 396840015
          maxSellingA0: 222338676
          maxSwapA0: 222338676
          spotBuying: 222338676
          spotSelling: 8217
          buyingAmount: 27058
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  8198 > 
        spotSelling 8136

          maxBuying: 22303
          maxSelling: 1
          maxBuyingA0: 183263751
          maxSellingA0: 224781959
          maxSwapA0: 183263751
          spotBuying: 224781959
          spotSelling: 8217
          buyingAmount: 22303
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  8198 > 
        spotSelling 8136
subSwap: 22303 bought
boughtAssetForSale (old):
        sellingAmm  8198 > 
        spotSelling 8136
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: a9835de50e6d63355f099dd7d0694ed4664bc9405e000dd6b434c9bd, 
   +     +  virtual: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 6939,
   +     +  +  _: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 1,
   +     +  +  _: 94
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 100,
   +     +  +  _: 32
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: a9835de50e6d63355f099dd7d0694ed4664bc9405e000dd6b434c9bd,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3c8153b25fcda420c01ead3a0ca0cbeeda02506d066539b9c5fadfcbfe33fe69),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: b357bed46a772dff7f3abaeb83adf60d1bb6c7bd40d8724185b3ae74f7577251),
   +     +  anchorPrices: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 6870,
   +     +  +  _: 92
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2413600,
   +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 1259
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2, OQCcC7sXlbCw7Hi6Wk)
  boughtAmount: 22303
  soldAmount:   1
  boughtSpot:   224781959
  soldSpot:     8217
  (boughtA0:    183263751)
  (soldA0:      224781959)
  boughtExp:    478
  soldExp:      18
  spotPrice:    0.00003655542480613402
  eff.Price:    0.000044837017441599784
  maxBuying:    22303
  (maxBuyingA0: 183263751)
)

trials left: 1 - iteration: 12 - block: 6790

trials left: 1 - iteration: 13 - block: 6855

          maxBuying: 48295
          maxSelling: 1
          maxBuyingA0: 396840015
          maxSellingA0: 222338676
          maxSwapA0: 222338676
          spotBuying: 222338676
          spotSelling: 8217
          buyingAmount: 27058
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  8198 > 
        spotSelling 8136

          maxBuying: 22303
          maxSelling: 1
          maxBuyingA0: 183263751
          maxSellingA0: 224781959
          maxSwapA0: 183263751
          spotBuying: 224781959
          spotSelling: 8217
          buyingAmount: 22303
          sellingAmount: 1
        
Swapping.boundary()
subSwap: 27058 bought
boughtAssetForSale (old):
        sellingAmm  8199 > 
        spotSelling 8136
boughtAssetForSale (old):
        sellingAmm  8198 > 
        spotSelling 8136
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: a9835de50e6d63355f099dd7d0694ed4664bc9405e000dd6b434c9bd, 
   +     +  virtual: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 6939,
   +     +  +  _: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 1,
   +     +  +  _: 94
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 100,
   +     +  +  _: 32
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: a9835de50e6d63355f099dd7d0694ed4664bc9405e000dd6b434c9bd,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3d6a7426d24ac6e203c44f3af46999dd2c2342a2f269d15a0d50f2eab36343a3),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: b357bed46a772dff7f3abaeb83adf60d1bb6c7bd40d8724185b3ae74f7577251),
   +     +  anchorPrices: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 6870,
   +     +  +  _: 91
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2413600,
   +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 1259
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2, OQCcC7sXlbCw7Hi6Wk)
  boughtAmount: 27058
  soldAmount:   1
  boughtSpot:   222338676
  soldSpot:     8217
  (boughtA0:    222335586)
  (soldA0:      222338676)
  boughtExp:    478
  soldExp:      18
  spotPrice:    0.000036957132910155496
  eff.Price:    0.00003695764653706852
  maxBuying:    27058
  (maxBuyingA0: 222335586)
)

trials left: 1 - iteration: 14 - block: 7746

trials left: 1 - iteration: 15 - block: 8746

trials left: 1 - iteration: 16 - block: 9738
virtual: 1
weight: 100
jumpSize: 14
minAnchorPrice: 93
jumpLog: 0.06899287148695142
anchorLog: 0.01069528911674795
6.450771992588233
maxTicks: 3431
maxTicks_: 6
3
virtual: 9000
weight: 1
jumpSize: 100
minAnchorPrice: 8910
jumpLog: 0.009950330853168092
anchorLog: 0.00011222714786481952
88.66242297410535
maxTicks: 3431
maxTicks_: 88
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 17 - block: 10078

trials left: 1 - iteration: 18 - block: 10079

trials left: 1 - iteration: 19 - block: 10384

          maxBuying: 48295
          maxSelling: 18
          maxBuyingA0: 396840015
          maxSellingA0: 4002096168
          maxSwapA0: 396840015
          spotBuying: 222338676
          spotSelling: 8217
          buyingAmount: 48295
          sellingAmount: 2
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  8199 > 
        spotSelling 8136

          maxBuying: 22303
          maxSelling: 18
          maxBuyingA0: 183263751
          maxSellingA0: 4046075262
          maxSwapA0: 183263751
          spotBuying: 224781959
          spotSelling: 8217
          buyingAmount: 22303
          sellingAmount: 1
        
Swapping.boundary()
boughtAssetForSale (old):
        sellingAmm  8199 > 
        spotSelling 8136
subSwap: 1 sold
boughtAssetForSale (old):
        sellingAmm  8199 > 
        spotSelling 8136
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: a9835de50e6d63355f099dd7d0694ed4664bc9405e000dd6b434c9bd, 
   +     +  virtual: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 6939,
   +     +  +  _: 1
   +     +  ], 
   +     +  weights: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 1,
   +     +  +  _: 94
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 100,
   +     +  +  _: 32
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: a9835de50e6d63355f099dd7d0694ed4664bc9405e000dd6b434c9bd,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3c8153b25fcda420c01ead3a0ca0cbeeda02506d066539b9c5fadfcbfe33fe69),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: b357bed46a772dff7f3abaeb83adf60d1bb6c7bd40d8724185b3ae74f7577251),
   +     +  anchorPrices: +[
   +     +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 6870,
   +     +  +  _: 92
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2413600,
   +  +  530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2_OQCcC7sXlbCw7Hi6Wk: 1260
   +  ]
     )
  boughtAsset:  Asset(, )
  soldAsset:    Asset(530e4a5a1b1c6c03734a5c4186eff6bd65c387612414b8d3a4774ca2, OQCcC7sXlbCw7Hi6Wk)
  boughtAmount: 22303
  soldAmount:   1
  boughtSpot:   224781959
  soldSpot:     8217
  (boughtA0:    183263751)
  (soldA0:      224781959)
  boughtExp:    478
  soldExp:      18
  spotPrice:    0.00003655542480613402
  eff.Price:    0.000044837017441599784
  maxBuying:    2413600
  (maxBuyingA0: 19832551200)
)
traces.length: 18
Opening: 9
Closing: 5
Swapping: 4
--- DONE ---
Opening: 9
Closing: 5
Swapping: 4
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(5s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(32s)[0m

