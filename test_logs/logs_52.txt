[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 3

trials left: 1 - iteration: 0 - block: 0
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 9007199254740991
weight: 1
jumpSize: 61
minAnchorPrice: 8861921847406458
jumpLog: 0.016260520871780326
anchorLog: 2.2204460492503128e-16
73230875739000.06
maxTicks: 1
maxTicks_: 73230875739000
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1

trials left: 1 - iteration: 2 - block: 2

trials left: 1 - iteration: 3 - block: 1002
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
virtual: 2
weight: 55
jumpSize: 100
minAnchorPrice: 108
jumpLog: 0.009950330853168092
anchorLog: 0.009216655104924048
1.0796032551822488
maxTicks: 1
maxTicks_: 1
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 4 - block: 1839
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  242222100 > 
        spotBuying 419430400
boughtAssetForSale (new):
        sellingAmm  300 > 
        spotSelling 200
subSwap: 325069 bought
boughtAssetForSale (old): 
        buyingAmm  242222100 > 
        spotBuying 419430400
boughtAssetForSale (new):
        sellingAmm  300 > 
        spotSelling 200
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 7bbc0ab3eb50eed3e627d45ae8a9ff12646b9e90282fe3f3f4afc8fd, 
   +     +  virtual: +[
   +     +  +  f9b1e5874694bd197aaf930961390494b00563871b705238a66bca5c_: 1,
   +     +  +  _: 1,
   +     +  +  9ef0ab4b01cf61284e75193133af90297dbcf721566095c4e1e97267_OBuFG9O: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  f9b1e5874694bd197aaf930961390494b00563871b705238a66bca5c_: 100,
   +     +  +  _: 100,
   +     +  +  9ef0ab4b01cf61284e75193133af90297dbcf721566095c4e1e97267_OBuFG9O: 55
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  f9b1e5874694bd197aaf930961390494b00563871b705238a66bca5c_: 1,
   +     +  +  _: 1,
   +     +  +  9ef0ab4b01cf61284e75193133af90297dbcf721566095c4e1e97267_OBuFG9O: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 7bbc0ab3eb50eed3e627d45ae8a9ff12646b9e90282fe3f3f4afc8fd,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 845df3ca26af2abfe64335708ddbca4945d0e466139f6fa29807e81edb9a08b7),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3b5adac5e683e167e80876b90b718d410c332ce6f15ad8a48e2c2012a98d36dc),
   +     +  anchorPrices: +[
   +     +  +  f9b1e5874694bd197aaf930961390494b00563871b705238a66bca5c_: 50,
   +     +  +  _: 50,
   +     +  +  9ef0ab4b01cf61284e75193133af90297dbcf721566095c4e1e97267_OBuFG9O: 108
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2422220,
   +  +  f9b1e5874694bd197aaf930961390494b00563871b705238a66bca5c_: 1
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(f9b1e5874694bd197aaf930961390494b00563871b705238a66bca5c, )
  boughtAmount: 325069
  soldAmount: 1
  boughtSpot: 209715200
  soldSpot: 400
  boughtExp: 22
  soldExp: 3
  spotPrice: 0.0000019073486328125
  effectivePrice: 0.00000307626996114671
)

trials left: 1 - iteration: 5 - block: 1843

trials left: 1 - iteration: 6 - block: 1844
Swapping.boundary()
boughtAssetForSale (old): 
        buyingAmm  242222100 > 
        spotBuying 419430400
boughtAssetForSale (old):
        sellingAmm  300 > 
        spotSelling 200
subSwap: 1 sold
boughtAssetForSale (old): 
        buyingAmm  242222100 > 
        spotBuying 419430400
boughtAssetForSale (old):
        sellingAmm  300 > 
        spotSelling 200
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 7bbc0ab3eb50eed3e627d45ae8a9ff12646b9e90282fe3f3f4afc8fd, 
   +     +  virtual: +[
   +     +  +  f9b1e5874694bd197aaf930961390494b00563871b705238a66bca5c_: 1,
   +     +  +  _: 1,
   +     +  +  9ef0ab4b01cf61284e75193133af90297dbcf721566095c4e1e97267_OBuFG9O: 2
   +     +  ], 
   +     +  weights: +[
   +     +  +  f9b1e5874694bd197aaf930961390494b00563871b705238a66bca5c_: 100,
   +     +  +  _: 100,
   +     +  +  9ef0ab4b01cf61284e75193133af90297dbcf721566095c4e1e97267_OBuFG9O: 55
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  f9b1e5874694bd197aaf930961390494b00563871b705238a66bca5c_: 1,
   +     +  +  _: 1,
   +     +  +  9ef0ab4b01cf61284e75193133af90297dbcf721566095c4e1e97267_OBuFG9O: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 7bbc0ab3eb50eed3e627d45ae8a9ff12646b9e90282fe3f3f4afc8fd,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 845df3ca26af2abfe64335708ddbca4945d0e466139f6fa29807e81edb9a08b7),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 3b5adac5e683e167e80876b90b718d410c332ce6f15ad8a48e2c2012a98d36dc),
   +     +  anchorPrices: +[
   +     +  +  f9b1e5874694bd197aaf930961390494b00563871b705238a66bca5c_: 50,
   +     +  +  _: 50,
   +     +  +  9ef0ab4b01cf61284e75193133af90297dbcf721566095c4e1e97267_OBuFG9O: 108
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2422220,
   +  +  f9b1e5874694bd197aaf930961390494b00563871b705238a66bca5c_: 2
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(f9b1e5874694bd197aaf930961390494b00563871b705238a66bca5c, )
  boughtAmount: 325069
  soldAmount: 1
  boughtSpot: 209715200
  soldSpot: 400
  boughtExp: 22
  soldExp: 3
  spotPrice: 0.0000019073486328125
  effectivePrice: 0.00000307626996114671
)

trials left: 1 - iteration: 7 - block: 2844

trials left: 1 - iteration: 8 - block: 3844
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 3
maxTicks_: 1
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 3
maxTicks_: 3121657384082680
3
virtual: 5638045630437916
weight: 3
jumpSize: 1
minAnchorPrice: 8457068445656874
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 9 - block: 3926

trials left: 1 - iteration: 10 - block: 3927
virtual: 573430032777366
weight: 1
jumpSize: 75
minAnchorPrice: 565884900767137
jumpLog: 0.013245226750020723
anchorLog: 1.7763568394002489e-15
7456399781978.889
maxTicks: 1
maxTicks_: 7456399781978
1
virtual: 1514098789275026
weight: 1
jumpSize: 23
minAnchorPrice: 1451011339721899
jumpLog: 0.0425596144187959
anchorLog: 6.661338147750937e-16
63890487879173.76
maxTicks: 1
maxTicks_: 63890487879173
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 11 - block: 4927

trials left: 1 - iteration: 12 - block: 5927

trials left: 1 - iteration: 13 - block: 6927
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 14 - block: 6928

trials left: 1 - iteration: 15 - block: 7928

trials left: 1 - iteration: 16 - block: 8928
virtual: 1
weight: 55
jumpSize: 54
minAnchorPrice: 54
jumpLog: 0.018349138668196617
anchorLog: 0.018349138668196617
1
maxTicks: 485321026112072
maxTicks_: 1
1
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 485321026112072
maxTicks_: 35
3
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 17 - block: 9928

trials left: 1 - iteration: 18 - block: 9997

trials left: 1 - iteration: 19 - block: 10788
traces.length: 13
Opening: 6
Closing: 5
Swapping: 2
--- DONE ---
Opening: 6
Closing: 5
Swapping: 2
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(43s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(3m4s)[0m

