[0m[32mTask[0m [0m[36mtest[0m deno test --allow-env --allow-read --allow-net tests
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/emulator.test.ts
[0m[32mCheck[0m file:///Users/ChrisHiatt/Projects/adaswap/vasil_2022Q3/euclid-offchain/tests/types.test.ts
[0m[38;5;245mrunning 1 test from ./tests/emulator.test.ts[0m
emulator ...
[0m[38;5;245m------- output -------[0m
trials left: 1
accounts: 10

trials left: 1 - iteration: 0 - block: 0
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 8927515532084817
maxTicks_: 44812306322540
3
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 4463757766042408
maxTicks_: 35
3
virtual: 4544902210910898
weight: 1
jumpSize: 100
minAnchorPrice: 4499903179119700
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 4463757766042408
maxTicks_: 44812306322540
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
Opening pool with 2 dirac utxos and 1 param utxos

trials left: 1 - iteration: 1 - block: 1
virtual: 2414435573330779
weight: 1
jumpSize: 100
minAnchorPrice: 2390530270624533
jumpLog: 0.009950330853168092
anchorLog: 4.440892098500625e-16
22406153161270.49
maxTicks: 9007199254740991
maxTicks_: 22406153161270
3
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 9007199254740991
maxTicks_: 3121657384082680
3
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 2 - block: 1001
Swapping.boundary()
addedBuyingA0: 11116308297867865934301
addedSellingA0: 11116308297868011110400
diff: -145176099
Swapping.boundary()
addedBuyingA0: 1346565265610624033546
addedSellingA0: 1346571686073964953600
diff: -6420463340920054
Swapping.boundary()
addedBuyingA0: 30274599753529944760400
addedSellingA0: 30274601818268206984440
diff: -2064738262224040
subSwap: 49920691605199 sold
addedBuyingA0: 10469120352799307304523
addedSellingA0: 10469120352799476940800
diff: -169636277
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 14a13bd29e245f7ac073100d9d6d12c7d9b56ef4887cea0875dfe188, 
   +     +  virtual: +[
   +     +  +  4fa49adb63bcbfd00eadf7d67a41aa12d55c95d422ebf5c538094b40_rit0ZFlWcUXqAmydLpuUNBTJg6RcVNvP: 9007199254740991,
   +     +  +  _: 1,
   +     +  +  e51109fe860afd9540002a537e7b1dd5087caa7de1480233f0576898_0rN9qbfJNuF5cFEBlxZoOgIl0c8UQw83: 4544902210910898
   +     +  ], 
   +     +  weights: +[
   +     +  +  4fa49adb63bcbfd00eadf7d67a41aa12d55c95d422ebf5c538094b40_rit0ZFlWcUXqAmydLpuUNBTJg6RcVNvP: 1,
   +     +  +  _: 100,
   +     +  +  e51109fe860afd9540002a537e7b1dd5087caa7de1480233f0576898_0rN9qbfJNuF5cFEBlxZoOgIl0c8UQw83: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  4fa49adb63bcbfd00eadf7d67a41aa12d55c95d422ebf5c538094b40_rit0ZFlWcUXqAmydLpuUNBTJg6RcVNvP: 100,
   +     +  +  _: 1,
   +     +  +  e51109fe860afd9540002a537e7b1dd5087caa7de1480233f0576898_0rN9qbfJNuF5cFEBlxZoOgIl0c8UQw83: 100
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 14a13bd29e245f7ac073100d9d6d12c7d9b56ef4887cea0875dfe188,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 012e11a574b880f6923e70fd5bd86d4731fa5ec0f49456366961ec1333e481ae),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 17ae8f1b6c577f634ab141fff89d54143e72fe8e195c7cfb48e9913b6475059b),
   +     +  anchorPrices: +[
   +     +  +  4fa49adb63bcbfd00eadf7d67a41aa12d55c95d422ebf5c538094b40_rit0ZFlWcUXqAmydLpuUNBTJg6RcVNvP: 8918019064099991,
   +     +  +  _: 50,
   +     +  +  e51109fe860afd9540002a537e7b1dd5087caa7de1480233f0576898_0rN9qbfJNuF5cFEBlxZoOgIl0c8UQw83: 4499903179119700
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2917870,
   +  +  4fa49adb63bcbfd00eadf7d67a41aa12d55c95d422ebf5c538094b40_rit0ZFlWcUXqAmydLpuUNBTJg6RcVNvP: 4463757766042408
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(4fa49adb63bcbfd00eadf7d67a41aa12d55c95d422ebf5c538094b40, rit0ZFlWcUXqAmydLpuUNBTJg6RcVNvP)
  boughtAmount: 772937
  soldAmount: 49920655979154
  boughtSpot: 209715200
  soldSpot: 13544597234702579
  boughtExp: 22
  soldExp: 42
  spotPrice: 64585672.544014834
  effectivePrice: 64585672.54401588
)

trials left: 1 - iteration: 3 - block: 2001
virtual: 8740018587386577
weight: 1
jumpSize: 96
minAnchorPrice: 8649915302980529
jumpLog: 0.010362787035546658
anchorLog: 2.2204460492503128e-16
46669843831807.74
maxTicks: 1
maxTicks_: 46669843831807
1
virtual: 3178203418381035
weight: 2
jumpSize: 100
minAnchorPrice: 6293472115606009
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 4 - block: 2002
virtual: 7674635432345105
weight: 1
jumpSize: 100
minAnchorPrice: 7598648942915945
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 4745362777123859
maxTicks_: 44812306322540
3
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1581787592374619
maxTicks_: 1
1
virtual: 7674635432345105
weight: 1
jumpSize: 100
minAnchorPrice: 7598648942915945
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 7674635432345105
weight: 1
jumpSize: 100
minAnchorPrice: 7598648942915945
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
Opening pool with 3 dirac utxos and 1 param utxos

trials left: 1 - iteration: 5 - block: 2003

trials left: 1 - iteration: 6 - block: 2184
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 6361433919146270
maxTicks_: 44812306322540
3
virtual: 914647631091145
weight: 9
jumpSize: 100
minAnchorPrice: 8150325425564658
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 2120477973048756
maxTicks_: 44812306322540
3
virtual: 13903422488382
weight: 1
jumpSize: 88
minAnchorPrice: 13747204258175
jumpLog: 0.011299555253933466
anchorLog: 7.283063041540762e-14
155148392777.6492
maxTicks: 2120477973048756
maxTicks_: 155148392777
3
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
virtual: 13903422488382
weight: 1
jumpSize: 88
minAnchorPrice: 13747204258175
jumpLog: 0.011299555253933466
anchorLog: 7.283063041540762e-14
155148392777.6492
virtual: 13903422488382
weight: 1
jumpSize: 88
minAnchorPrice: 13747204258175
jumpLog: 0.011299555253933466
anchorLog: 7.283063041540762e-14
155148392777.6492
virtual: 13903422488382
weight: 1
jumpSize: 88
minAnchorPrice: 13747204258175
jumpLog: 0.011299555253933466
anchorLog: 7.283063041540762e-14
155148392777.6492
virtual: 13903422488382
weight: 1
jumpSize: 88
minAnchorPrice: 13747204258175
jumpLog: 0.011299555253933466
anchorLog: 7.283063041540762e-14
155148392777.6492
virtual: 13903422488382
weight: 1
jumpSize: 88
minAnchorPrice: 13747204258175
jumpLog: 0.011299555253933466
anchorLog: 7.283063041540762e-14
155148392777.6492
virtual: 13903422488382
weight: 1
jumpSize: 88
minAnchorPrice: 13747204258175
jumpLog: 0.011299555253933466
anchorLog: 7.283063041540762e-14
155148392777.6492
Opening pool with 9 dirac utxos and 1 param utxos

trials left: 1 - iteration: 7 - block: 2185
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 8 - block: 2371
Swapping.boundary()
addedBuyingA0: 4974348146625165055803
addedSellingA0: 4974351837304140595200
diff: -3690678975539397
Swapping.boundary()
addedBuyingA0: 1346565265610624033546
addedSellingA0: 1346571686073964953600
diff: -6420463340920054
Swapping.boundary()
addedBuyingA0: 30274599753529944760400
addedSellingA0: 30274601818268206984440
diff: -2064738262224040
Swapping.boundary()
addedBuyingA0: 22913246058738343230860
addedSellingA0: 22913251188411231465681
diff: -5129672888234821
Swapping.boundary()
addedBuyingA0: 28081124376719667195160
addedSellingA0: 28081124382412551479594
diff: -5692884284434
Swapping.boundary()
addedBuyingA0: 28174417834079801987200
addedSellingA0: 28174417834975794246361
diff: -895992259161
Swapping.boundary()
addedBuyingA0: 27988139840354365391520
addedSellingA0: 27988139849993578050266
diff: -9639212658746
Swapping.boundary()
addedBuyingA0: 28081124376719667195160
addedSellingA0: 28081124382321649066896
diff: -5601981871736
Swapping.boundary()
addedBuyingA0: 28081124376719667195160
addedSellingA0: 28081124377860266987307
diff: -1140599792147
Swapping.boundary()
addedBuyingA0: 28174417834079801987200
addedSellingA0: 28174417843851548641632
diff: -9771746654432
Swapping.boundary()
addedBuyingA0: 28174417834079801987200
addedSellingA0: 28174417838756041083324
diff: -4676239096124
Swapping.boundary()
addedBuyingA0: 27988139840354365391520
addedSellingA0: 27988139840817922231752
diff: -463556840232
Swapping.boundary()
addedBuyingA0: 27988139840354365391520
addedSellingA0: 27988139853091919866682
diff: -12737554475162
subSwap: 2629100 bought
addedBuyingA0: 30274599753529944760400
addedSellingA0: 30274601818268206984440
diff: -2064738262224040
Swapping (
  paramUtxo: ParamUtxo (
     +  param: Param (
   +     +  owner: 5bf12b3ac1353742b15daa5418cdf6e5361641c19f68c35e7de391db, 
   +     +  virtual: +[
   +     +  +  4fa49adb63bcbfd00eadf7d67a41aa12d55c95d422ebf5c538094b40_rit0ZFlWcUXqAmydLpuUNBTJg6RcVNvP: 2414435573330779,
   +     +  +  _: 9007199254740991
   +     +  ], 
   +     +  weights: +[
   +     +  +  4fa49adb63bcbfd00eadf7d67a41aa12d55c95d422ebf5c538094b40_rit0ZFlWcUXqAmydLpuUNBTJg6RcVNvP: 1,
   +     +  +  _: 1
   +     +  ]
   +     +  jumpSizes: +[
   +     +  +  4fa49adb63bcbfd00eadf7d67a41aa12d55c95d422ebf5c538094b40_rit0ZFlWcUXqAmydLpuUNBTJg6RcVNvP: 100,
   +     +  +  _: 1
   +     +  ], 
   +     +  active: 1
   +     )
     )
  diracUtxo: DiracUtxo (
     +  dirac: Dirac(
   +     +  owner: 5bf12b3ac1353742b15daa5418cdf6e5361641c19f68c35e7de391db,
   +     +  threadNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: 55021cd9b8fd673bd72746a97d525c096f8b95da868aeddb797aaf6f6ae621d8),
   +     +  paramNFT: IdNFT (Currency(49a0b0e032416036152977ff1fac1aed683512166af02b36f2eb1851), Hash: a1a619a07b55af622a823c782d6a5acbcaa8c1726c6c5061bf7fdd22ed1d20dc),
   +     +  anchorPrices: +[
   +     +  +  4fa49adb63bcbfd00eadf7d67a41aa12d55c95d422ebf5c538094b40_rit0ZFlWcUXqAmydLpuUNBTJg6RcVNvP: 2390530270624533,
   +     +  +  _: 4503599627370495
   +     +  ],
   +     ),
     +  balance: +[
   +  +  _: 2629100,
   +  +  4fa49adb63bcbfd00eadf7d67a41aa12d55c95d422ebf5c538094b40_rit0ZFlWcUXqAmydLpuUNBTJg6RcVNvP: 9007199254740991
   +  ]
     )
  boughtAsset: Asset(, )
  soldAsset: Asset(4fa49adb63bcbfd00eadf7d67a41aa12d55c95d422ebf5c538094b40, rit0ZFlWcUXqAmydLpuUNBTJg6RcVNvP)
  boughtAmount: 2629100
  soldAmount: 3361156
  boughtSpot: 9007199254740990
  soldSpot: 11515195220238844
  boughtExp: 1
  soldExp: 158
  spotPrice: 1.2784434866562717
  effectivePrice: 1.2784435738465634
)

trials left: 1 - iteration: 9 - block: 3371
virtual: 9007199254740991
weight: 1
jumpSize: 63
minAnchorPrice: 8866461766385663
jumpLog: 0.015748356968139112
anchorLog: 2.2204460492503128e-16
70924294573408.88
maxTicks: 1
maxTicks_: 70924294573408
1
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 10 - block: 4173

trials left: 1 - iteration: 11 - block: 5173
virtual: 9007199254740991
weight: 1
jumpSize: 1
minAnchorPrice: 4503599627370495
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 7196648569891937
weight: 1
jumpSize: 19
minAnchorPrice: 6836816141397340
jumpLog: 0.05129329438755048
anchorLog: 2.2204460492503128e-16
231004461490377.53
maxTicks: 1
maxTicks_: 231004461490377
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 12 - block: 5174

trials left: 1 - iteration: 13 - block: 6174
virtual: 2
weight: 51
jumpSize: 100
minAnchorPrice: 100
jumpLog: 0.009950330853168092
anchorLog: 0.009950330853168092
1
maxTicks: 1
maxTicks_: 1
1
virtual: 1449940622755552
weight: 2
jumpSize: 78
minAnchorPrice: 2863173887972988
jumpLog: 0.012739025777429712
anchorLog: 4.440892098500625e-16
28685735872147.805
maxTicks: 1
maxTicks_: 28685735872147
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 14 - block: 7070

trials left: 1 - iteration: 15 - block: 7962

trials left: 1 - iteration: 16 - block: 7963
virtual: 1
weight: 100
jumpSize: 1
minAnchorPrice: 50
jumpLog: 0.6931471805599453
anchorLog: 0.01980262729617973
35.0027887811465
maxTicks: 1
maxTicks_: 35
1
virtual: 5507428499947568
weight: 1
jumpSize: 1
minAnchorPrice: 2753714249973784
jumpLog: 0.6931471805599453
anchorLog: 4.440892098500625e-16
1560828692041340
maxTicks: 1
maxTicks_: 1560828692041340
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 17 - block: 8963
virtual: 9007199254740991
weight: 1
jumpSize: 6
minAnchorPrice: 7720456504063706
jumpLog: 0.15415067982725836
anchorLog: 2.2204460492503128e-16
694232944228949.5
maxTicks: 1
maxTicks_: 694232944228949
1
virtual: 5492111512121362
weight: 2
jumpSize: 1
minAnchorPrice: 5492111512121362
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 18 - block: 9092
virtual: 1668791257290048
weight: 10
jumpSize: 1
minAnchorPrice: 8343956286450240
jumpLog: 0.6931471805599453
anchorLog: 2.2204460492503128e-16
3121657384082680
maxTicks: 1
maxTicks_: 3121657384082680
1
virtual: 1
weight: 2
jumpSize: 1
minAnchorPrice: 1
jumpLog: 0.6931471805599453
anchorLog: 0.6931471805599453
1
maxTicks: 1
maxTicks_: 1
1
virtual: 9007199254740991
weight: 1
jumpSize: 100
minAnchorPrice: 8918019064099991
jumpLog: 0.009950330853168092
anchorLog: 2.2204460492503128e-16
44812306322540.98
maxTicks: 1
maxTicks_: 44812306322540
1
Opening pool with 1 dirac utxos and 1 param utxos

trials left: 1 - iteration: 19 - block: 10092
traces.length: 20
Opening: 12
Swapping: 2
Closing: 6
--- DONE ---
Opening: 12
Swapping: 2
Closing: 6
[0m[38;5;245m----- output end -----[0m
emulator ... [0m[32mok[0m [0m[38;5;245m(1m1s)[0m
[0m[38;5;245mrunning 0 tests from ./tests/types.test.ts[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(3m12s)[0m

